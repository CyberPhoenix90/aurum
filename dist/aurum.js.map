{"version":3,"file":"aurum.js","sourceRoot":"src/","sources":["utilities/linkedlist/linked_list_node.ts","utilities/linkedlist/linked_list.ts","utilities/cancellation_token.ts","stream/data_source.ts","utilities/common.ts","nodes/template.ts","stream/event_emitter.ts","stream/array_data_source.ts","nodes/aurum_element.ts","jsx/jsx_factory.ts","utilities/owner_symbol.ts","utilities/aurum.ts","nodes/button.ts","nodes/div.ts","nodes/input.ts","nodes/li.ts","nodes/span.ts","nodes/style.ts","nodes/ul.ts","aurum.ts"],"names":[],"mappings":"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","sourcesContent":["export class LinkedListNode<T> {\n    public next: LinkedListNode<T>;\n    public previous: LinkedListNode<T>;\n    public data: T;\n\n    constructor(data: T) {\n        this.data = data;\n    }\n\n    public deleteNext() {\n        if (this.next) {\n            const overNext = this.next.next;\n            this.next.next = undefined;\n            this.next.previous = undefined;\n            this.next = overNext;\n            this.next.previous = this;\n        }\n    }\n\n    public deletePrevious() {\n        if (this.previous) {\n            this.previous = this.previous.previous;\n            this.previous.next = undefined;\n            this.previous.previous = undefined;\n        }\n    }\n}\n","import { LinkedListNode } from './linked_list_node';\nimport { Predicate } from '../common';\n\nexport class LinkedList<T> {\n\tpublic rootNode: LinkedListNode<T>;\n\tpublic lastNode: LinkedListNode<T>;\n\tpublic length: number;\n\n\tconstructor(data: T[] = []) {\n\t\tthis.length = 0;\n\t\tdata.forEach((d) => this.append(d));\n\t}\n\n\tpublic find(predicate: Predicate<LinkedListNode<T>>): LinkedListNode<T> {\n\t\tlet ptr: LinkedListNode<T> = this.rootNode;\n\t\twhile (ptr && !predicate(ptr)) {\n\t\t\tptr = ptr.next;\n\t\t}\n\n\t\treturn ptr;\n\t}\n\n\tpublic append(element: T): T {\n\t\tif (!this.rootNode && !this.lastNode) {\n\t\t\tthis.rootNode = this.lastNode = new LinkedListNode(element);\n\t\t} else {\n\t\t\tthis.lastNode.next = new LinkedListNode(element);\n\t\t\tthis.lastNode.next.previous = this.lastNode;\n\t\t\tthis.lastNode = this.lastNode.next;\n\t\t}\n\n\t\tthis.length++;\n\t\treturn element;\n\t}\n\n\tpublic forEach(cb: (d: T) => void) {\n\t\tthis.find((n) => {\n\t\t\tcb(n.data);\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tpublic prepend(element: T): T {\n\t\tif (!this.rootNode && !this.lastNode) {\n\t\t\tthis.rootNode = this.lastNode = new LinkedListNode(element);\n\t\t} else {\n\t\t\tthis.rootNode.previous = new LinkedListNode(element);\n\t\t\tthis.rootNode.previous.next = this.rootNode;\n\t\t\tthis.rootNode = this.rootNode.previous;\n\t\t}\n\t\tthis.length++;\n\t\treturn element;\n\t}\n\n\tpublic remove(element: T) {\n\t\tif (element === this.rootNode.data) {\n\t\t\tthis.rootNode = this.rootNode.next;\n\t\t\tthis.length--;\n\t\t} else {\n\t\t\tconst result = this.find((e) => e.next && e.next.data === element);\n\t\t\tif (result) {\n\t\t\t\tif (result.next === this.lastNode) {\n\t\t\t\t\tthis.lastNode = result;\n\t\t\t\t}\n\t\t\t\tresult.deleteNext();\n\t\t\t\tthis.length--;\n\t\t\t}\n\t\t}\n\t}\n}\n","import { Delegate, Callback } from './common';\nimport { LinkedList } from './linkedlist/linked_list';\n\nexport class CancellationToken {\n\tprivate cancelables: LinkedList<Delegate>;\n\tprivate _isCancelled: boolean;\n\n\tpublic get isCanceled(): boolean {\n\t\treturn this._isCancelled;\n\t}\n\n\tconstructor(...cancellables: Delegate[]) {\n\t\tthis.cancelables = new LinkedList(cancellables);\n\t\tthis._isCancelled = false;\n\t}\n\n\t/**\n\t * Attaches a new cancelable to this token\n\t * @param delegate\n\t */\n\tpublic addCancelable(delegate: Delegate): this {\n\t\tthis.throwIfCancelled('attempting to add cancellable to token that is already cancelled');\n\n\t\tthis.cancelables.append(delegate);\n\n\t\tif (this.cancelables.length > 200) {\n\t\t\tconsole.log('potential memory leak: cancellation token has over 200 clean up calls');\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tpublic removeCancelable(delegate: Delegate): this {\n\t\tthis.throwIfCancelled('attempting to remove cancellable from token that is already cancelled');\n\n\t\tthis.cancelables.remove(delegate);\n\n\t\treturn this;\n\t}\n\n\tpublic addDisposable(disposable: { dispose(): any }): this {\n\t\tthis.addCancelable(() => disposable.dispose());\n\n\t\treturn this;\n\t}\n\n\tpublic callIfNotCancelled(action: Delegate): void {\n\t\tif (!this.isCanceled) {\n\t\t\taction();\n\t\t}\n\t}\n\n\tpublic setTimeout(cb: Delegate, time: number = 0): void {\n\t\tconst id = setTimeout(cb, time);\n\t\tthis.addCancelable(() => clearTimeout(id));\n\t}\n\n\tpublic setInterval(cb: Delegate, time: number): void {\n\t\tconst id = setInterval(cb, time);\n\t\tthis.addCancelable(() => clearInterval(id));\n\t}\n\n\tpublic requestAnimationFrame(cb: Callback<number>): void {\n\t\tconst id: number = requestAnimationFrame(cb);\n\t\tthis.addCancelable(() => cancelAnimationFrame(id));\n\t}\n\n\tpublic animationLoop(cb: Callback<number>): void {\n\t\tlet id: number = requestAnimationFrame(function f(time: number) {\n\t\t\tcb(time);\n\t\t\tid = requestAnimationFrame(f);\n\t\t});\n\n\t\tthis.addCancelable(() => cancelAnimationFrame(id));\n\t}\n\n\tpublic throwIfCancelled(msg: string): void {\n\t\tif (this.isCanceled) {\n\t\t\tthrow new Error(msg || 'cancellation token is cancelled');\n\t\t}\n\t}\n\n\tpublic chain(target: CancellationToken, twoWays: boolean = false): CancellationToken {\n\t\tif (twoWays) {\n\t\t\ttarget.chain(this, false);\n\t\t}\n\n\t\tthis.addCancelable(() => target.cancel());\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Registers an event using addEventListener and if you cancel the token the event will be canceled as well\n\t */\n\tpublic registerDomEvent(eventEmitter: HTMLElement | Document, event: string, callback: (e: Event) => void): this {\n\t\t(eventEmitter as HTMLElement).addEventListener(event, callback);\n\t\tthis.addCancelable(() => eventEmitter.removeEventListener(event, callback));\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Cancels everything attached to this token\n\t */\n\tpublic cancel(): void {\n\t\tif (this.isCanceled) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isCancelled = true;\n\t\tthis.cancelables.forEach((c) => c());\n\t\tthis.cancelables = undefined;\n\t}\n}\n","import { CancellationToken } from '../utilities/cancellation_token';\nimport { Callback } from '../utilities/common';\n\nexport class DataSource<T> {\n\tpublic value: T;\n\tprivate listeners: Array<(value: T) => void>;\n\n\tconstructor(initialValue?: T) {\n\t\tthis.value = initialValue;\n\t\tthis.listeners = [];\n\t}\n\n\tpublic update(newValue: T) {\n\t\tthis.value = newValue;\n\t\tfor (const l of this.listeners) {\n\t\t\tl(newValue);\n\t\t}\n\t}\n\n\tpublic listen(callback: (value: T) => void, cancellationToken?: CancellationToken): Callback<void> {\n\t\tthis.listeners.push(callback);\n\t\tconst cancel = () => {\n\t\t\tconst index = this.listeners.indexOf(callback);\n\t\t\tif (index !== -1) {\n\t\t\t\tthis.listeners.splice(index, 1);\n\t\t\t}\n\t\t};\n\t\tcancellationToken?.addCancelable(() => {\n\t\t\tcancel();\n\t\t});\n\t\treturn cancel;\n\t}\n\n\tpublic filter(callback: (value: T) => boolean, cancellationToken?: CancellationToken): DataSource<T> {\n\t\tconst filteredSource = new DataSource<T>();\n\t\tthis.listen((value) => {\n\t\t\tif (callback(value)) {\n\t\t\t\tfilteredSource.update(value);\n\t\t\t}\n\t\t}, cancellationToken);\n\t\treturn filteredSource;\n\t}\n\n\tpublic pipe(targetDataSource: DataSource<T>, cancellationToken?: CancellationToken): void {\n\t\tthis.listen((v) => targetDataSource.update(v), cancellationToken);\n\t}\n\n\tpublic map<D>(callback: (value: T) => D, cancellationToken?: CancellationToken): DataSource<D> {\n\t\tconst mappedSource = new DataSource<D>(callback(this.value));\n\t\tthis.listen((value) => {\n\t\t\tmappedSource.update(callback(value));\n\t\t}, cancellationToken);\n\t\treturn mappedSource;\n\t}\n\n\tpublic unique(cancellationToken?: CancellationToken): DataSource<T> {\n\t\tconst uniqueSource = new DataSource<T>();\n\t\tthis.listen((value) => {\n\t\t\tif (value !== uniqueSource.value) {\n\t\t\t\tuniqueSource.update(value);\n\t\t\t}\n\t\t}, cancellationToken);\n\t\treturn uniqueSource;\n\t}\n\n\tpublic reduce(reducer: (p: T, c: T) => T, cancellationToken?: CancellationToken): DataSource<T> {\n\t\tconst reduceSource = new DataSource<T>();\n\t\tthis.listen((v) => reduceSource.update(reducer(reduceSource.value, v)), cancellationToken);\n\n\t\treturn reduceSource;\n\t}\n\n\tpublic combine<D, E>(\n\t\totherSource: DataSource<D>,\n\t\tcombinator: (self: T, other: D) => E,\n\t\tcancellationToken?: CancellationToken\n\t): DataSource<E> {\n\t\tconst combinedDataSource = new DataSource<E>();\n\n\t\tthis.listen(() => combinedDataSource.update(combinator(this.value, otherSource.value)), cancellationToken);\n\t\totherSource.listen(\n\t\t\t() => combinedDataSource.update(combinator(this.value, otherSource.value)),\n\t\t\tcancellationToken\n\t\t);\n\n\t\treturn combinedDataSource;\n\t}\n\n\tpublic pick(key: keyof T, cancellationToken?: CancellationToken): DataSource<T[typeof key]> {\n\t\tconst subDataSource: DataSource<T[typeof key]> = new DataSource();\n\n\t\tthis.listen((v) => {\n\t\t\tsubDataSource.update(v[key]);\n\t\t}, cancellationToken);\n\n\t\treturn subDataSource;\n\t}\n\n\tpublic cancelAll(): void {\n\t\tthis.listeners.length = 0;\n\t}\n}\n","import { DataSource } from \"../stream/data_source\";\n\nexport type Callback<T> = (data?: T) => void;\nexport type Delegate = () => void;\nexport type Predicate<T> = (data: T) => boolean;\nexport type Provider<T> = () => T;\nexport type Comparator<T1, T2> = (value1: T1, value2: T2) => boolean;\nexport type Constructor<T> = new (...args: any[]) => T;\nexport type MapLike<T> = { [key: string]: T };\nexport type Primitive = number | string | boolean | null | undefined;\nexport type JSONObject<T> = { [key: string]: T | JSONObject<T> };\nexport type ValueOrProvider<T> = T | Provider<T>;\nexport type ValueOrArray<T> = T | T[];\n\nexport interface PointLike {\n\tx: number;\n\ty: number;\n}\n\nexport type DataDrain<T> = Callback<T> | DataSource<T>","import { AurumElement, AurumElementProps } from './aurum_element';\n\nexport interface TemplateProps<T> extends AurumElementProps {\n\tonAttach?(entity: Template<T>): void;\n\tonDetach?(entity: Template<T>): void;\n\tgenerator(model: T): AurumElement;\n\tref?: string;\n}\n\nexport class Template<T> extends AurumElement {\n\tpublic generate: (model: T) => AurumElement;\n\tref: string;\n\n\tconstructor(props: TemplateProps<T>) {\n\t\tsuper(props, 'template');\n\t\tthis.ref = props.ref;\n\t\tthis.generate = props.generator;\n\t}\n}\n","import { CancellationToken } from '../utilities/cancellation_token';\n\nexport interface EventSubscriptionFacade {\n\tcancel(): void;\n}\n\nexport type EventCallback<T> = (data: T) => void;\n\ninterface EventSubscription<T> {\n\tcallback: EventCallback<T>;\n}\n\nexport interface EventConfig {\n\t// if true defines events for this events subscription changes\n\tobservable?: boolean;\n\t// if passed attaches cancelAll to this token\n\tcancellationToken?: CancellationToken;\n\t/**\n\t * Fire will only do anything every N executions, it's faster than throttling the callbacks if they all have the same rate\n\t */\n\tthrottled?: number;\n}\n\nexport class EventEmitter<T> {\n\tpublic onSubscribe: EventEmitter<void> | undefined;\n\tpublic onSubscribeOnce: EventEmitter<void> | undefined;\n\tpublic onCancelAll: EventEmitter<void> | undefined;\n\tpublic onCancel: EventEmitter<void> | undefined;\n\n\tprivate isFiring: boolean;\n\tprivate onAfterFire: Array<() => void>;\n\n\tpublic get subscriptions(): number {\n\t\treturn this.subscribeChannel.length;\n\t}\n\n\tpublic get oneTimeSubscriptions(): number {\n\t\treturn this.subscribeOnceChannel.length;\n\t}\n\n\tprivate linkedEvents: EventEmitter<T>[] | undefined;\n\tprivate subscribeChannel: EventSubscription<T>[];\n\tprivate subscribeOnceChannel: EventSubscription<T>[];\n\tprivate readonly throttle: number;\n\tprivate throttleCount: number;\n\n\tconstructor(config?: EventConfig) {\n\t\tthis.subscribeChannel = [];\n\t\tthis.subscribeOnceChannel = [];\n\t\tthis.throttleCount = 0;\n\t\tthis.onAfterFire = [];\n\n\t\tif (config) {\n\t\t\tif (config.observable) {\n\t\t\t\tthis.makeObservable();\n\t\t\t}\n\t\t\tif (config.cancellationToken) {\n\t\t\t\tconfig.cancellationToken.addCancelable(() => this.cancelAll());\n\t\t\t}\n\n\t\t\tif (config.throttled) {\n\t\t\t\tthis.throttle = config.throttled;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic linkEvent(eventToLink: EventEmitter<T>): void {\n\t\tif (!this.linkedEvents) {\n\t\t\tthis.linkedEvents = [];\n\t\t}\n\n\t\tthis.linkedEvents.push(eventToLink);\n\t}\n\n\tpublic unlinkEvent(eventToUnlink: EventEmitter<T>): void {\n\t\tif (!this.linkedEvents || !this.linkedEvents.includes(eventToUnlink)) {\n\t\t\tthrow new Error('Cannot unlink event that is not linked');\n\t\t}\n\n\t\tthis.linkedEvents.splice(this.linkedEvents.indexOf(eventToUnlink), 1);\n\t}\n\n\tpublic makeObservable(): void {\n\t\tif (!this.onSubscribe) {\n\t\t\tthis.onSubscribe = new EventEmitter<void>();\n\t\t\tthis.onSubscribeOnce = new EventEmitter<void>();\n\t\t\tthis.onCancelAll = new EventEmitter<void>();\n\t\t\tthis.onCancel = new EventEmitter<void>();\n\t\t}\n\t}\n\n\tpublic swapSubscriptions(event: EventEmitter<T>): void {\n\t\tconst sub: EventSubscription<T>[] = this.subscribeChannel;\n\t\tconst subOnce: EventSubscription<T>[] = this.subscribeOnceChannel;\n\n\t\tthis.subscribeChannel = event.subscribeChannel;\n\t\tthis.subscribeOnceChannel = event.subscribeOnceChannel;\n\n\t\tevent.subscribeChannel = sub;\n\t\tevent.subscribeOnceChannel = subOnce;\n\t}\n\n\tpublic subscribe(callback: EventCallback<T>, cancellationToken?: CancellationToken): EventSubscriptionFacade {\n\t\tif (this.onSubscribe) {\n\t\t\tthis.onSubscribe.fire();\n\t\t}\n\n\t\tconst { facade } = this.createSubscription(callback, this.subscribeChannel, cancellationToken);\n\n\t\treturn facade;\n\t}\n\n\tpublic hasSubscriptions(): boolean {\n\t\treturn this.subscriptions > 0 || this.oneTimeSubscriptions > 0;\n\t}\n\tpublic subscribeOnce(cancellationToken?: CancellationToken): Promise<T> {\n\t\tif (this.onSubscribeOnce) {\n\t\t\tthis.onSubscribeOnce.fire();\n\t\t}\n\n\t\treturn new Promise<T>((resolved) => {\n\t\t\tthis.createSubscription((data: T) => resolved(data), this.subscribeOnceChannel, cancellationToken);\n\t\t});\n\t}\n\n\tpublic cancelAll(): void {\n\t\tif (this.onCancelAll !== undefined) {\n\t\t\tthis.onCancelAll.fire();\n\t\t}\n\t}\n\n\tpublic fire(data?: T, data2?: T, data3?: T, data4?: T, data5?: T): void {\n\t\tif (this.throttle && this.throttleCount++ % this.throttle !== 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isFiring = true;\n\n\t\tlet length = this.subscribeChannel.length;\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tthis.subscribeChannel[i].callback(data);\n\t\t}\n\n\t\tlength = this.subscribeOnceChannel.length;\n\n\t\tif (this.subscribeOnceChannel.length > 0) {\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tthis.subscribeOnceChannel[i].callback(data);\n\t\t\t}\n\t\t\tthis.subscribeOnceChannel.length = 0;\n\t\t}\n\n\t\t//TODO: Optimize this to only fire on events that have subscriptions\n\t\tif (this.linkedEvents) {\n\t\t\tfor (let event of this.linkedEvents) {\n\t\t\t\tevent.fire(data, data2, data3, data4, data5);\n\t\t\t}\n\t\t}\n\n\t\tthis.isFiring = false;\n\t\tif (this.onAfterFire.length > 0) {\n\t\t\tthis.onAfterFire.forEach((cb) => cb());\n\t\t\tthis.onAfterFire.length = 0;\n\t\t}\n\t}\n\n\tprivate createSubscription(\n\t\tcallback: EventCallback<T>,\n\t\tchannel: EventSubscription<T>[],\n\t\tcancellationToken?: CancellationToken\n\t): { subscription: EventSubscription<T>; facade: EventSubscriptionFacade } {\n\t\tconst that: this = this;\n\n\t\tconst subscription: EventSubscription<T> = {\n\t\t\tcallback\n\t\t};\n\n\t\tconst facade: EventSubscriptionFacade = {\n\t\t\tcancel() {\n\t\t\t\tthat.cancel(subscription, channel);\n\t\t\t}\n\t\t};\n\n\t\tif (cancellationToken !== undefined) {\n\t\t\tcancellationToken.addCancelable(() => that.cancel(subscription, channel));\n\t\t}\n\t\tchannel.push(subscription);\n\n\t\treturn { subscription, facade };\n\t}\n\n\tprivate cancel(subscription: EventSubscription<T>, channel: EventSubscription<T>[]): void {\n\t\tlet index: number = channel.indexOf(subscription);\n\t\tif (index >= 0) {\n\t\t\tif (!this.isFiring) {\n\t\t\t\tchannel.splice(index, 1);\n\t\t\t} else {\n\t\t\t\tthis.onAfterFire.push(() => this.cancel(subscription, channel));\n\t\t\t}\n\t\t}\n\t}\n}\n","import { EventEmitter } from './event_emitter';\nimport { DataSource } from './data_source';\nimport { CancellationToken } from '../utilities/cancellation_token';\nimport { Predicate } from '../utilities/common';\n\nexport interface CollectionChange<T> {\n\toperation: 'replace' | 'append' | 'prepend' | 'removeLeft' | 'removeRight' | 'remove';\n\tcount: number;\n\tindex: number;\n\ttarget?: T;\n\titems: T[];\n\tnewState: T[];\n}\nexport class ArrayDataSource<T> {\n\tprotected data: T[];\n\tpublic onChange: EventEmitter<CollectionChange<T>>;\n\n\tconstructor(initialData?: T[]) {\n\t\tif (initialData) {\n\t\t\tthis.data = initialData.slice();\n\t\t} else {\n\t\t\tthis.data = [];\n\t\t}\n\t\tthis.onChange = new EventEmitter();\n\t}\n\n\tpublic get length() {\n\t\treturn this.data.length;\n\t}\n\n\tpublic getData(): T[] {\n\t\treturn this.data.slice();\n\t}\n\n\tpublic get(index: number): T {\n\t\treturn this.data[index];\n\t}\n\n\tpublic set(index: number, item: T): void {\n\t\tconst old = this.data[index];\n\t\tif (old === item) {\n\t\t\treturn;\n\t\t}\n\t\tthis.data[index] = item;\n\t\tthis.onChange.fire({ operation: 'replace', target: old, count: 1, index, items: [item], newState: this.data });\n\t}\n\n\tpublic push(...items: T[]) {\n\t\tthis.data.push(...items);\n\t\tthis.onChange.fire({\n\t\t\toperation: 'append',\n\t\t\tcount: items.length,\n\t\t\tindex: this.data.length - items.length,\n\t\t\titems,\n\t\t\tnewState: this.data\n\t\t});\n\t}\n\n\tpublic unshift(...items: T[]) {\n\t\tthis.data.unshift(...items);\n\t\tthis.onChange.fire({ operation: 'prepend', count: items.length, items, index: 0, newState: this.data });\n\t}\n\n\tpublic pop(): T {\n\t\tconst item = this.data.pop();\n\t\tthis.onChange.fire({\n\t\t\toperation: 'removeRight',\n\t\t\tcount: 1,\n\t\t\tindex: this.data.length,\n\t\t\titems: [item],\n\t\t\tnewState: this.data\n\t\t});\n\n\t\treturn item;\n\t}\n\n\tpublic merge(newData: T[]): void {\n\t\tfor (let i = 0; i < newData.length; i++) {\n\t\t\tif (this.data[i] !== newData[i]) {\n\t\t\t\tif (this.length > i) {\n\t\t\t\t\tthis.set(i, newData[i]);\n\t\t\t\t} else {\n\t\t\t\t\tthis.push(newData[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.length > newData.length) {\n\t\t\tthis.removeRight(this.length - newData.length);\n\t\t}\n\t}\n\n\tpublic removeRight(count: number): void {\n\t\tconst result = this.data.splice(this.length - count, count);\n\t\tthis.onChange.fire({ operation: 'removeRight', count, index: this.length, items: result, newState: this.data });\n\t}\n\n\tpublic removeLeft(count: number): void {\n\t\tconst result = this.data.splice(0, count);\n\t\tthis.onChange.fire({ operation: 'removeLeft', count, index: 0, items: result, newState: this.data });\n\t}\n\n\tpublic remove(item: T): void {\n\t\tconst index = this.data.indexOf(item);\n\t\tif (index !== -1) {\n\t\t\tthis.data.splice(index, 1);\n\t\t\tthis.onChange.fire({ operation: 'remove', count: 1, index, items: [item], newState: this.data });\n\t\t}\n\t}\n\n\tpublic clear(): void {\n\t\tconst items = this.data;\n\t\tthis.data = [];\n\t\tthis.onChange.fire({\n\t\t\toperation: 'remove',\n\t\t\tcount: items.length,\n\t\t\tindex: 0,\n\t\t\titems,\n\t\t\tnewState: this.data\n\t\t});\n\t}\n\n\tpublic shift(): T {\n\t\tconst item = this.data.shift();\n\t\tthis.onChange.fire({ operation: 'removeLeft', items: [item], count: 1, index: 0, newState: this.data });\n\n\t\treturn item;\n\t}\n\n\tpublic toArray(): T[] {\n\t\treturn this.data.slice();\n\t}\n\n\tpublic filter(callback: Predicate<T>, cancellationToken?: CancellationToken): FilteredArrayView<T> {\n\t\treturn new FilteredArrayView(this, callback, cancellationToken);\n\t}\n\n\tpublic forEach(callbackfn: (value: T, index: number, array: T[]) => void, thisArg?: any): void {\n\t\treturn this.data.forEach(callbackfn, thisArg);\n\t}\n\n\tpublic toDataSource(): DataSource<T[]> {\n\t\tconst stream = new DataSource(this.data);\n\t\tthis.onChange.subscribe((s) => {\n\t\t\tstream.update(s.newState);\n\t\t});\n\t\treturn stream;\n\t}\n}\n\nexport class FilteredArrayView<T> extends ArrayDataSource<T> {\n\tprivate viewFilter: Predicate<T>;\n\tprivate parent: ArrayDataSource<T>;\n\n\tconstructor(parent: ArrayDataSource<T>, filter: Predicate<T>, cancellationToken?: CancellationToken) {\n\t\tconst initial = (parent as FilteredArrayView<T>).data.filter(filter);\n\t\tsuper(initial);\n\n\t\tthis.parent = parent;\n\t\tthis.viewFilter = filter;\n\n\t\tparent.onChange.subscribe((change) => {\n\t\t\tlet filteredItems;\n\t\t\tswitch (change.operation) {\n\t\t\t\tcase 'remove':\n\t\t\t\tcase 'removeLeft':\n\t\t\t\tcase 'removeRight':\n\t\t\t\t\tfor (const item of change.items) {\n\t\t\t\t\t\tthis.remove(item);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'prepend':\n\t\t\t\t\tfilteredItems = change.items.filter(this.viewFilter);\n\t\t\t\t\tthis.unshift(...filteredItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'append':\n\t\t\t\t\tfilteredItems = change.items.filter(this.viewFilter);\n\t\t\t\t\tthis.push(...filteredItems);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'replace':\n\t\t\t\t\tconst index = this.data.indexOf(change.target);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tconst acceptNew = this.viewFilter(change.items[0]);\n\t\t\t\t\t\tif (acceptNew) {\n\t\t\t\t\t\t\tthis.set(index, change.items[0]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.remove(change.target);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t}\n\t\t}, cancellationToken);\n\t}\n\n\tpublic updateFilter(filter: Predicate<T>): void {\n\t\tif (this.viewFilter === filter) {\n\t\t\treturn;\n\t\t}\n\t\tthis.viewFilter = filter;\n\t\tthis.refresh();\n\t}\n\n\tprotected refresh() {\n\t\tthis.clear();\n\t\tconst data = (this.parent as FilteredArrayView<T>).data.filter(this.viewFilter);\n\t\tthis.push(...data);\n\t}\n}\n","import { DataSource } from '../stream/data_source';\nimport { CancellationToken } from '../utilities/cancellation_token';\nimport { DataDrain } from '../utilities/common';\nimport { Template } from './template';\nimport { ArrayDataSource } from '../stream/array_data_source';\n\nexport type StringSource = string | DataSource<string>;\nexport type ClassType = string | DataSource<string> | DataSource<string[]> | Array<string | DataSource<string>>;\n\nexport interface AurumElementProps {\n\tid?: StringSource;\n\tclass?: ClassType;\n\trepeatModel?: ArrayDataSource<any> | any[];\n\n\tonClick?: DataDrain<MouseEvent>;\n\tonKeydown?: DataDrain<KeyboardEvent>;\n\tonKeyup?: DataDrain<KeyboardEvent>;\n\tonMousedown?: DataDrain<KeyboardEvent>;\n\tonMouseup?: DataDrain<KeyboardEvent>;\n\tonMouseenter?: DataDrain<KeyboardEvent>;\n\tonMouseleave?: DataDrain<KeyboardEvent>;\n\n\tonAttach?: (node: AurumElement) => void;\n\ttemplate?: Template<any>;\n}\n\nexport abstract class AurumElement {\n\tprotected cancellationToken: CancellationToken;\n\tprivate cachedChildren: AurumElement[];\n\tprotected repeatData: ArrayDataSource<any>;\n\tprivate rerenderPending: boolean;\n\n\tpublic readonly node: HTMLElement;\n\tpublic readonly domNodeName: string;\n\n\tpublic template: Template<any>;\n\tpublic onClick: DataSource<MouseEvent>;\n\tpublic onKeydown: DataSource<KeyboardEvent>;\n\tpublic onKeyup: DataSource<KeyboardEvent>;\n\tpublic onMousedown: DataSource<KeyboardEvent>;\n\tpublic onMouseup: DataSource<KeyboardEvent>;\n\tpublic onMouseenter: DataSource<KeyboardEvent>;\n\tpublic onMouseleave: DataSource<KeyboardEvent>;\n\n\tconstructor(props: AurumElementProps, domNodeName: string) {\n\t\tthis.domNodeName = domNodeName;\n\t\tthis.template = props.template;\n\t\tthis.cancellationToken = new CancellationToken();\n\t\tthis.node = this.create(props);\n\t\tthis.initialize(props);\n\n\t\tif (props.onAttach) {\n\t\t\tprops.onAttach(this);\n\t\t}\n\t}\n\n\tprotected createEventHandlers(keys: string[], props: any) {\n\t\tfor (const key of keys) {\n\t\t\tconst computedEventName = 'on' + key[0].toUpperCase() + key.slice(1);\n\n\t\t\tlet eventEmitter;\n\t\t\tObject.defineProperty(this, computedEventName, {\n\t\t\t\tget() {\n\t\t\t\t\tif (!eventEmitter) {\n\t\t\t\t\t\teventEmitter = new DataSource();\n\t\t\t\t\t}\n\t\t\t\t\treturn eventEmitter;\n\t\t\t\t},\n\t\t\t\tset() {\n\t\t\t\t\tthrow new Error(computedEventName + ' is read only');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (props[computedEventName]) {\n\t\t\t\tif (props[computedEventName] instanceof DataSource) {\n\t\t\t\t\tthis[computedEventName].listen(props[computedEventName].update.bind(props.onClick), this.cancellationToken);\n\t\t\t\t} else if (typeof props[computedEventName] === 'function') {\n\t\t\t\t\tthis[computedEventName].listen(props[computedEventName], this.cancellationToken);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.cancellationToken.registerDomEvent(this.node, key, (e: MouseEvent) => this[computedEventName].update(e));\n\t\t}\n\t}\n\n\tprivate initialize(props: AurumElementProps) {\n\t\t//@ts-ignore\n\t\tthis.node.owner = this;\n\n\t\tthis.createEventHandlers(['click', 'keydown', 'keyhit', 'keyup', 'mousedown, mouseup', 'mouseenter', 'mouseleave'], props);\n\n\t\tif (props.id) {\n\t\t\tthis.assignStringSourceToAttribute(props.id, 'id');\n\t\t}\n\t\tif (props.class) {\n\t\t\tthis.handleClass(props.class);\n\t\t}\n\n\t\tif (props.repeatModel) {\n\t\t\tthis.cachedChildren = [];\n\t\t\tthis.handleRepeat(props.repeatModel);\n\t\t}\n\t}\n\n\tprivate handleRepeat(dataSource: ArrayDataSource<any> | any[]): void {\n\t\tif (dataSource instanceof ArrayDataSource) {\n\t\t\tthis.repeatData = dataSource;\n\t\t} else {\n\t\t\tthis.repeatData = new ArrayDataSource<any>(dataSource);\n\t\t}\n\n\t\tif (this.repeatData.length) {\n\t\t\tthis.cachedChildren.push(...(this.repeatData as ArrayDataSource<any>).toArray().map((i) => this.template.generate(i)));\n\t\t\tthis.renderRepeat();\n\t\t}\n\n\t\tthis.repeatData.onChange.subscribe((change) => {\n\t\t\tswitch (change.operation) {\n\t\t\t\tcase 'append':\n\t\t\t\t\tthis.cachedChildren.push(...change.items.map((i) => this.template.generate(i)));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'removeLeft':\n\t\t\t\t\tthis.cachedChildren.splice(0, change.count);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'removeRight':\n\t\t\t\t\tthis.cachedChildren.splice(this.node.childElementCount - change.count, change.count);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'remove':\n\t\t\t\t\tthis.cachedChildren.splice(change.index, change.count);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.cachedChildren.length = 0;\n\t\t\t\t\tthis.cachedChildren.push(...(this.repeatData as ArrayDataSource<any>).toArray().map((i) => this.template.generate(i)));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis.renderRepeat();\n\t\t});\n\t}\n\n\tprotected renderRepeat(): void {\n\t\tif (this.rerenderPending) {\n\t\t\treturn;\n\t\t}\n\n\t\tsetTimeout(() => {\n\t\t\tfor (let i = 0; i < this.cachedChildren.length; i++) {\n\t\t\t\tif (this.node.childElementCount <= i) {\n\t\t\t\t\tthis.addChildren(this.cachedChildren.slice(i, this.cachedChildren.length));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (((this.node.children[i] as any).owner as AurumElement) !== this.cachedChildren[i]) {\n\t\t\t\t\tif (!this.cachedChildren.includes((this.node.children[i] as any).owner as AurumElement)) {\n\t\t\t\t\t\tthis.node.children[i].remove();\n\t\t\t\t\t\ti--;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst index = this.getChildIndex(this.cachedChildren[i].node);\n\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\tthis.swapChildren(i, index);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.addChildAt(this.cachedChildren[i], i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\twhile (this.node.childElementCount > this.cachedChildren.length) {\n\t\t\t\tthis.node.removeChild(this.node.lastChild);\n\t\t\t}\n\t\t\t// this.onUpdate.fire(this);\n\t\t\tthis.rerenderPending = false;\n\t\t});\n\t\tthis.rerenderPending = true;\n\t}\n\n\tprotected assignStringSourceToAttribute(data: StringSource, key: string) {\n\t\tif (typeof data === 'string') {\n\t\t\tthis.node[key] = data;\n\t\t} else {\n\t\t\tif (data.value) {\n\t\t\t\tthis.node[key] = data.value;\n\t\t\t}\n\t\t\tdata.unique(this.cancellationToken).listen((v) => (this.node.id = v), this.cancellationToken);\n\t\t}\n\t}\n\n\tprivate handleClass(data: ClassType) {\n\t\tif (typeof data === 'string') {\n\t\t\tthis.node.className = data;\n\t\t} else if (data instanceof DataSource) {\n\t\t\tif (data.value) {\n\t\t\t\tif (Array.isArray(data.value)) {\n\t\t\t\t\tthis.node.className = data.value.join(' ');\n\t\t\t\t\tdata.unique(this.cancellationToken).listen(() => {\n\t\t\t\t\t\tthis.node.className = (data.value as string[]).join(' ');\n\t\t\t\t\t}, this.cancellationToken);\n\t\t\t\t} else {\n\t\t\t\t\tthis.node.className = data.value;\n\t\t\t\t\tdata.unique(this.cancellationToken).listen(() => {\n\t\t\t\t\t\tthis.node.className = data.value as string;\n\t\t\t\t\t}, this.cancellationToken);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdata.unique(this.cancellationToken).listen((v) => (this.node.className = v), this.cancellationToken);\n\t\t} else {\n\t\t\tconst value: string = data.reduce<string>((p, c) => {\n\t\t\t\tif (typeof c === 'string') {\n\t\t\t\t\treturn `${p} ${c}`;\n\t\t\t\t} else {\n\t\t\t\t\tif (c.value) {\n\t\t\t\t\t\treturn `${p} ${c.value}`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn p;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, '');\n\t\t\tthis.node.className = value;\n\t\t\tfor (const i of data) {\n\t\t\t\tif (i instanceof DataSource) {\n\t\t\t\t\ti.unique(this.cancellationToken).listen((v) => {\n\t\t\t\t\t\tconst value: string = data.reduce<string>((p, c) => {\n\t\t\t\t\t\t\tif (typeof c === 'string') {\n\t\t\t\t\t\t\t\treturn `${p} ${c}`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (c.value) {\n\t\t\t\t\t\t\t\t\treturn `${p} ${c.value}`;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn p;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, '');\n\t\t\t\t\t\tthis.node.className = value;\n\t\t\t\t\t}, this.cancellationToken);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic create(props: AurumElementProps): HTMLElement {\n\t\tconst node = document.createElement(this.domNodeName);\n\t\treturn node;\n\t}\n\n\tprotected getChildIndex(node: HTMLElement): number {\n\t\tlet i = 0;\n\t\tfor (const child of node.children) {\n\t\t\tif (child === node) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\treturn -1;\n\t}\n\n\tprotected hasChild(node: HTMLElement): boolean {\n\t\tfor (const child of node.children) {\n\t\t\tif (child === node) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic setInnerText(value: string) {\n\t\tthis.node.innerText = value;\n\t}\n\n\tpublic swapChildren(indexA: number, indexB: number) {\n\t\tif (indexA === indexB) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst nodeA = this.node.children[indexA];\n\t\tconst nodeB = this.node.children[indexB];\n\t\tnodeA.remove();\n\t\tnodeB.remove();\n\t\tif (indexA < indexB) {\n\t\t\tthis.addDomNodeAt(nodeB as HTMLElement, indexA);\n\t\t\tthis.addDomNodeAt(nodeA as HTMLElement, indexB);\n\t\t} else {\n\t\t\tthis.addDomNodeAt(nodeA as HTMLElement, indexB);\n\t\t\tthis.addDomNodeAt(nodeB as HTMLElement, indexA);\n\t\t}\n\t}\n\n\tprotected addDomNodeAt(node: HTMLElement, index: number) {\n\t\tif (index >= this.node.childElementCount) {\n\t\t\tthis.node.appendChild(node);\n\t\t} else {\n\t\t\tthis.node.insertBefore(node, this.node.children[index]);\n\t\t}\n\t}\n\n\tpublic addChildAt(child: AurumElement, index: number) {\n\t\tif (child instanceof Template) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.addDomNodeAt(child.node, index);\n\t}\n\n\tpublic addChildren(nodes: AurumElement[]) {\n\t\tif (nodes.length === 0) {\n\t\t\treturn;\n\t\t}\n\t\tlet dataSegments: Array<string | DataSource<any>> = [];\n\t\tfor (const c of nodes) {\n\t\t\tif (c instanceof Template) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (typeof c === 'string') {\n\t\t\t\tdataSegments.push(c);\n\t\t\t} else if (c instanceof DataSource) {\n\t\t\t\tdataSegments.push(c);\n\t\t\t\tthis.setInnerText(c.value);\n\t\t\t\tc.listen((v) => {\n\t\t\t\t\tconst value: string = dataSegments.reduce<string>((p, c) => p + (c instanceof DataSource ? (c.value ?? '').toString() : c), '');\n\t\t\t\t\tthis.setInnerText(value);\n\t\t\t\t}, this.cancellationToken);\n\t\t\t} else {\n\t\t\t\tthis.node.appendChild(c.node);\n\t\t\t}\n\t\t}\n\t\tif (dataSegments.length) {\n\t\t\tconst value: string = dataSegments.reduce<string>((p, c) => p + (c instanceof DataSource ? (c.value ?? '').toString() : c), '');\n\t\t\tthis.setInnerText(value);\n\t\t}\n\t}\n}\n","import { MapLike, Constructor } from '../utilities/common';\nimport { AurumElement } from '../nodes/aurum_element';\nimport { Template } from '../nodes/template';\n\nclass JavascriptXMLSyntax {\n\tpublic deserialize(node: Constructor<AurumElement> | ((...args: any[]) => AurumElement), args: MapLike<any>, ...innerNodes: AurumElement[]): AurumElement {\n\t\tif (typeof node === 'string') {\n\t\t\treturn;\n\t\t}\n\t\tconst children = [].concat(...innerNodes).filter((e) => e);\n\t\tconst refs = {};\n\t\tlet hasRef: boolean = false;\n\t\tfor (const c of children) {\n\t\t\tif (typeof c === 'string') {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (c instanceof Template && !c.ref) {\n\t\t\t\trefs['template'] = c;\n\t\t\t\thasRef = true;\n\t\t\t}\n\n\t\t\tif (c.ref) {\n\t\t\t\trefs[c.ref] = c;\n\t\t\t\thasRef = true;\n\t\t\t}\n\t\t}\n\n\t\tif (hasRef) {\n\t\t\tObject.assign(args, refs);\n\t\t}\n\n\t\tlet instance: AurumElement;\n\t\tif (node.prototype) {\n\t\t\t//@ts-ignore\n\t\t\tinstance = new node(args || {});\n\t\t} else {\n\t\t\t//@ts-ignore\n\t\t\tinstance = node(args || {});\n\t\t}\n\t\tinstance.addChildren(children);\n\n\t\treturn instance;\n\t}\n}\n\nexport const jsx: JavascriptXMLSyntax = new JavascriptXMLSyntax();\n","export const ownerSymbol = Symbol('owner');\n","import { AurumElement } from '../nodes/aurum_element';\nimport { ownerSymbol } from './owner_symbol';\n\nexport class Aurum {\n\tpublic static attach(node: AurumElement, dom: HTMLElement) {\n\t\tif (dom[ownerSymbol]) {\n\t\t\tthrow new Error('This node is already managed by aurum and cannot be used');\n\t\t}\n\t\tdom.appendChild(node.node);\n\t\tdom[ownerSymbol] = node;\n\t}\n\n\tpublic static detach(domNode: HTMLElement): void {\n\t\tif (domNode[ownerSymbol]) {\n\t\t\tdomNode[ownerSymbol].dispose();\n\t\t\tdomNode[ownerSymbol] = undefined;\n\t\t}\n\t}\n}\n","import { AurumElement, AurumElementProps } from './aurum_element';\n\nexport interface ButtonProps extends AurumElementProps {}\n\nexport class Button extends AurumElement {\n\tconstructor(props: ButtonProps) {\n\t\tsuper(props, 'button');\n\t}\n}\n","import { AurumElement, AurumElementProps } from './aurum_element';\n\nexport interface DivProps extends AurumElementProps {}\n\nexport class Div extends AurumElement {\n\tconstructor(props: DivProps) {\n\t\tsuper(props, 'div');\n\t}\n}\n","import { AurumElement, AurumElementProps, StringSource } from './aurum_element';\nimport { DataSource } from '../stream/data_source';\nimport { DataDrain } from '../utilities/common';\n\nexport interface InputProps extends AurumElementProps {\n\tonAttach?: (node: Input) => void;\n\tplaceholder?: StringSource;\n\tonChange?: DataDrain<InputEvent>;\n\tonInput?: DataDrain<InputEvent>;\n\tinputValueSource?: DataSource<string>;\n}\n\nexport class Input extends AurumElement {\n\tpublic node: HTMLInputElement;\n\n\tpublic onChange: DataSource<InputEvent>;\n\tpublic onInput: DataSource<InputEvent>;\n\tpublic onFocus: DataSource<FocusEvent>;\n\tpublic onBlur: DataSource<FocusEvent>;\n\n\tconstructor(props: InputProps) {\n\t\tsuper(props, 'input');\n\t\tif (props.inputValueSource) {\n\t\t\tprops.inputValueSource.listen((value) => (this.node.value = value), this.cancellationToken);\n\t\t}\n\t\tif (props.placeholder) {\n\t\t\tthis.assignStringSourceToAttribute(props.placeholder, 'placeholder');\n\t\t}\n\n\t\tthis.createEventHandlers(['input', 'change', 'focus', 'blur'], props);\n\t}\n}\n","import { AurumElement, AurumElementProps } from './aurum_element';\n\nexport interface LiProps extends AurumElementProps {}\n\nexport class Li extends AurumElement {\n\tconstructor(props: LiProps) {\n\t\tsuper(props, 'li');\n\t}\n}\n","import { AurumElement, AurumElementProps } from './aurum_element';\n\nexport interface SpanProps extends AurumElementProps {}\n\nexport class Span extends AurumElement {\n\tconstructor(props: SpanProps) {\n\t\tsuper(props, 'span');\n\t}\n}\n","import { AurumElement, AurumElementProps } from './aurum_element';\n\nexport interface StyleProps extends AurumElementProps {}\n\nexport class Style extends AurumElement {\n\tconstructor(props: StyleProps) {\n\t\tsuper(props, 'style');\n\t}\n}\n","import { AurumElement, AurumElementProps } from './aurum_element';\nimport { ArrayDataSource } from '../stream/array_data_source';\n\nexport interface UlProps extends AurumElementProps {\n\tonAttach?: (node: Ul) => void;\n}\n\nexport class Ul extends AurumElement {\n\tconstructor(props: UlProps) {\n\t\tsuper(props, 'ul');\n\t}\n}\n","export * from './jsx/jsx_factory';\nexport * from './stream/array_data_source';\nexport * from './stream/data_source';\nexport * from './stream/event_emitter';\nexport * from './utilities/cancellation_token';\nexport * from './utilities/aurum';\n\nexport * from './nodes/aurum_element';\nexport * from './nodes/button';\nexport * from './nodes/div';\nexport * from './nodes/input';\nexport * from './nodes/li';\nexport * from './nodes/span';\nexport * from './nodes/style';\nexport * from './nodes/template';\nexport * from './nodes/ul';\n"]}