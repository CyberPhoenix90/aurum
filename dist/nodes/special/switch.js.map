{"version":3,"file":"switch.js","sourceRoot":"","sources":["../../../src/nodes/special/switch.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,YAAY,EAA+B,MAAM,kBAAkB,CAAC;AAU7E,MAAM,OAAO,MAAoB,SAAQ,YAAY;IAMpD,YAAY,KAAqB;QAChC,KAAK,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;QALhB,gBAAW,GAAG,IAAI,CAAC;QAO1B,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC,WAAW,CAAC;QACrC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACrC,KAAK,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,IAAI,EAAE,EAAE;YAC3B,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QACzB,CAAC,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;IAC5B,CAAC;IAES,YAAY,CAAC,IAAO;;QAC7B,IAAI,IAAI,KAAK,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,WAAW,EAAE;YAChD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;YACtB,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,IAAI,KAAK,SAAS,IAAI,IAAI,KAAK,IAAI,EAAE;gBACxC,MAAM,QAAQ,SAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC,uCAAI,IAAI,CAAC,QAAQ,EAAA,CAAC;gBACpE,IAAI,QAAQ,EAAE;oBACb,MAAM,MAAM,GAAG,QAAQ,CAAC,QAAQ,EAAE,CAAC;oBACnC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;iBACtB;aACD;iBAAM,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACzB,MAAM,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC;gBACxC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;aACtB;SACD;IACF,CAAC;CACD","sourcesContent":["import { AurumElement, AurumElementProps, Template } from '../aurum_element';\nimport { MapLike } from '../../utilities/common';\nimport { DataSource } from '../../stream/data_source';\n\nexport interface SwitchProps<T = boolean> extends AurumElementProps {\n\tstate: DataSource<T>;\n\ttemplateMap?: MapLike<Template<void>>;\n\ttemplate?: Template<void>;\n}\n\nexport class Switch<T = boolean> extends AurumElement {\n\tprivate lastValue: T;\n\tprivate firstRender = true;\n\tpublic templateMap: MapLike<Template<void>>;\n\tpublic template: Template<void>;\n\n\tconstructor(props: SwitchProps<T>) {\n\t\tsuper(props, 'switch');\n\n\t\tthis.templateMap = props.templateMap;\n\t\tthis.renderSwitch(props.state.value);\n\t\tprops.state.listen((data) => {\n\t\t\tthis.renderSwitch(data);\n\t\t}, this.cancellationToken);\n\t}\n\n\tprotected renderSwitch(data: T): void {\n\t\tif (data !== this.lastValue || this.firstRender) {\n\t\t\tthis.lastValue = data;\n\t\t\tthis.firstRender = false;\n\t\t\tthis.clearChildren();\n\t\t\tif (data !== undefined && data !== null) {\n\t\t\t\tconst template = this.templateMap[data.toString()] ?? this.template;\n\t\t\t\tif (template) {\n\t\t\t\t\tconst result = template.generate();\n\t\t\t\t\tthis.addChild(result);\n\t\t\t\t}\n\t\t\t} else if (this.template) {\n\t\t\t\tconst result = this.template.generate();\n\t\t\t\tthis.addChild(result);\n\t\t\t}\n\t\t}\n\t}\n}\n"]}