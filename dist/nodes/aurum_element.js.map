{"version":3,"file":"aurum_element.js","sourceRoot":"","sources":["../../src/nodes/aurum_element.ts"],"names":[],"mappings":"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","sourcesContent":["import { DataSource, ArrayDataSource } from '../stream/data_source';\nimport { CancellationToken } from '../utilities/cancellation_token';\nimport { DataDrain, StringSource, ClassType, Callback, MapLike } from '../utilities/common';\nimport { ownerSymbol } from '../utilities/owner_symbol';\nimport { AurumTextElement } from './aurum_text';\n\nexport interface AurumElementProps {\n\tid?: StringSource;\n\tname?: StringSource;\n\tdraggable?: StringSource;\n\tclass?: ClassType;\n\ttabindex?: ClassType;\n\tstyle?: StringSource;\n\ttitle?: StringSource;\n\trole?: StringSource;\n\tcontentEditable?: StringSource;\n\n\trepeatModel?: ArrayDataSource<any> | any[];\n\n\tonDblclick?: DataDrain<MouseEvent>;\n\tonClick?: DataDrain<MouseEvent>;\n\tonKeydown?: DataDrain<KeyboardEvent>;\n\tonKeyup?: DataDrain<KeyboardEvent>;\n\tonMousedown?: DataDrain<KeyboardEvent>;\n\tonMouseup?: DataDrain<KeyboardEvent>;\n\tonMouseenter?: DataDrain<KeyboardEvent>;\n\tonMouseleave?: DataDrain<KeyboardEvent>;\n\tonMousewheel?: DataDrain<WheelEvent>;\n\tonBlur?: DataDrain<FocusEvent>;\n\tonFocus?: DataDrain<FocusEvent>;\n\tonDrag?: DataDrain<DragEvent>;\n\tonDragend?: DataDrain<DragEvent>;\n\tonDragenter?: DataDrain<DragEvent>;\n\tonDragexit?: DataDrain<DragEvent>;\n\tonDragleave?: DataDrain<DragEvent>;\n\tonDragover?: DataDrain<DragEvent>;\n\tonDragstart?: DataDrain<DragEvent>;\n\n\tonAttach?: Callback<AurumElement>;\n\tonDetach?: Callback<AurumElement>;\n\tonCreate?: Callback<AurumElement>;\n\tonDispose?: Callback<AurumElement>;\n\ttemplate?: Template<any>;\n}\n\n//@ts-ignore\nconst defaultEvents: MapLike<string> = {\n\tdrag: 'onDrag',\n\tdragstart: 'onDragStart',\n\tdragend: 'onDragEnd',\n\tdragexit: 'onDragExit',\n\tdragover: 'onDragOver',\n\tdragenter: 'onDragEnter',\n\tdragleave: 'onDragLeave',\n\tblur: 'onBlur',\n\tfocus: 'onFocus',\n\tclick: 'onClick',\n\tdblclick: 'onDblClick',\n\tkeydown: 'onKeyDown',\n\tkeyhit: 'onKeyHit',\n\tkeyup: 'onKeyUp',\n\tmousedown: 'onMouseDown',\n\tmouseup: 'onMouseUp',\n\tmousemove: 'onMouseMove',\n\tmouseenter: 'onMouseEnter',\n\tmouseleave: 'onMouseLeave',\n\tmousewheel: 'onMouseWheel'\n};\n\nconst defaultProps: string[] = ['id', 'name', 'draggable', 'tabindex', 'style', 'role', 'contentEditable'];\n\nexport type ChildNode = AurumElement | string | DataSource<string>;\n\nexport abstract class AurumElement {\n\tprivate onAttach?: Callback<AurumElement>;\n\tprivate onDetach?: Callback<AurumElement>;\n\tprivate onDispose?: Callback<AurumElement>;\n\n\tprivate children: AurumElement[];\n\tprotected needAttach: boolean;\n\n\tprotected cancellationToken: CancellationToken;\n\tprotected repeatData: ArrayDataSource<any>;\n\n\tpublic node: HTMLElement;\n\n\tpublic template: Template<any>;\n\n\tconstructor(props: AurumElementProps, domNodeName: string) {\n\t\tthis.cancellationToken = new CancellationToken();\n\t\tthis.node = this.create(domNodeName);\n\t\tthis.children = [];\n\n\t\tif (props !== null) {\n\t\t\tthis.onDispose = props.onDispose;\n\t\t\tif (props.onAttach) {\n\t\t\t\tthis.onAttach = props.onAttach;\n\t\t\t\tthis.needAttach = true;\n\t\t\t}\n\t\t\tthis.onDetach = props.onDetach;\n\n\t\t\tthis.template = props.template;\n\t\t\tthis.initialize(props);\n\t\t\tprops.onCreate?.(this);\n\t\t}\n\t}\n\n\tprivate initialize(props: AurumElementProps) {\n\t\tthis.createEventHandlers(defaultEvents, props);\n\n\t\tconst dataProps = Object.keys(props).filter((e) => e.includes('-'));\n\t\tthis.bindProps(defaultProps, props, dataProps);\n\n\t\tif (props.class) {\n\t\t\tthis.handleClass(props.class);\n\t\t}\n\n\t\tif (props.repeatModel) {\n\t\t\tthis.handleRepeat(props.repeatModel);\n\t\t}\n\t}\n\n\tprotected bindProps(keys: string[], props: any, dynamicProps?: string[]) {\n\t\tfor (const key of keys) {\n\t\t\tif (props[key]) {\n\t\t\t\tthis.assignStringSourceToAttribute(props[key], key);\n\t\t\t}\n\t\t}\n\t\tif (dynamicProps) {\n\t\t\tfor (const key of dynamicProps) {\n\t\t\t\tif (props[key]) {\n\t\t\t\t\tthis.assignStringSourceToAttribute(props[key], key);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected createEventHandlers(events: MapLike<string>, props: any) {\n\t\tfor (const key in events) {\n\t\t\tif (props[events[key]]) {\n\t\t\t\tconst eventName = props[events[key]];\n\t\t\t\tif (props[eventName] instanceof DataSource) {\n\t\t\t\t\tthis.node.addEventListener(key, (e: MouseEvent) => props[eventName].update(e));\n\t\t\t\t} else if (typeof props[eventName] === 'function') {\n\t\t\t\t\tthis.node.addEventListener(key, (e: MouseEvent) => props[eventName](e));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate handleRepeat(dataSource: ArrayDataSource<any> | any[]): void {\n\t\tif (dataSource instanceof ArrayDataSource) {\n\t\t\tthis.repeatData = dataSource;\n\t\t} else {\n\t\t\tthis.repeatData = new ArrayDataSource<any>(dataSource);\n\t\t}\n\n\t\tthis.repeatData.listenAndRepeat((change) => {\n\t\t\tswitch (change.operationDetailed) {\n\t\t\t\tcase 'swap':\n\t\t\t\t\tconst itemA = this.children[change.index];\n\t\t\t\t\tconst itemB = this.children[change.index2];\n\t\t\t\t\tthis.children[change.index2] = itemA;\n\t\t\t\t\tthis.children[change.index] = itemB;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'append':\n\t\t\t\t\tconst old = this.children;\n\t\t\t\t\tthis.children = new Array(old.length);\n\t\t\t\t\tlet i = 0;\n\t\t\t\t\tfor (i = 0; i < old.length; i++) {\n\t\t\t\t\t\tthis.children[i] = old[i];\n\t\t\t\t\t}\n\t\t\t\t\tfor (let index = 0; index < change.items.length; index++) {\n\t\t\t\t\t\tthis.children[i + index] = this.template.generate(change.items[index]);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'prepend':\n\t\t\t\t\tthis.children.unshift(...change.items.map((i) => this.template.generate(i)));\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'remove':\n\t\t\t\tcase 'removeLeft':\n\t\t\t\tcase 'removeRight':\n\t\t\t\t\tthis.children.splice(change.index, change.count);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'clear':\n\t\t\t\t\tthis.children = [];\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error('unhandled operation');\n\t\t\t}\n\t\t\tthis.render();\n\t\t});\n\t}\n\n\tprotected render(): void {\n\t\tif (this.cancellationToken.isCanceled) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (let i = 0; i < this.children.length; i++) {\n\t\t\tif (this.node.childNodes.length <= i) {\n\t\t\t\tfor (let n = i; n < this.children.length; n++) {\n\t\t\t\t\tthis.addChildDom(this.children[n]);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (this.node.childNodes[i][ownerSymbol] !== this.children[i]) {\n\t\t\t\tif (!this.children.includes(this.node.childNodes[i][ownerSymbol] as AurumElement)) {\n\t\t\t\t\tconst child = this.node.childNodes[i];\n\t\t\t\t\tchild.remove();\n\t\t\t\t\tchild[ownerSymbol].dispose();\n\t\t\t\t\ti--;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst index = this.getChildIndex(this.children[i].node);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tthis.swapChildrenDom(i, index);\n\t\t\t\t} else {\n\t\t\t\t\tthis.addDomNodeAt(this.children[i].node, i);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\twhile (this.node.childNodes.length > this.children.length) {\n\t\t\tconst child = this.node.childNodes[this.node.childNodes.length - 1];\n\t\t\tthis.node.removeChild(child);\n\t\t\tchild[ownerSymbol].dispose();\n\t\t}\n\t}\n\n\tprotected assignStringSourceToAttribute(data: StringSource, key: string) {\n\t\tif (typeof data === 'string') {\n\t\t\tthis.node.setAttribute(key, data);\n\t\t} else {\n\t\t\tif (data.value) {\n\t\t\t\tthis.node.setAttribute(key, data.value);\n\t\t\t}\n\t\t\tdata.unique(this.cancellationToken).listen((v) => (this.node as HTMLElement).setAttribute(key, v), this.cancellationToken);\n\t\t}\n\t}\n\n\tprotected handleAttach(parent: AurumElement) {\n\t\tif (this.needAttach) {\n\t\t\tif (parent.isConnected) {\n\t\t\t\tthis.onAttach?.(this);\n\t\t\t\tfor (const child of this.node.childNodes) {\n\t\t\t\t\tchild[ownerSymbol].handleAttach?.(this);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tparent.needAttach = true;\n\t\t\t}\n\t\t}\n\t}\n\n\t//@ts-ignore\n\tprivate handleDetach() {\n\t\tif (!this.node.isConnected) {\n\t\t\tthis.onDetach?.(this);\n\t\t\tfor (const child of this.node.childNodes) {\n\t\t\t\tif (child[ownerSymbol]) {\n\t\t\t\t\tchild[ownerSymbol].handleDetach?.();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate handleClass(data: ClassType) {\n\t\tif (typeof data === 'string') {\n\t\t\tthis.node.className = data;\n\t\t} else if (data instanceof DataSource) {\n\t\t\tif (data.value) {\n\t\t\t\tif (Array.isArray(data.value)) {\n\t\t\t\t\tthis.node.className = data.value.join(' ');\n\t\t\t\t\tdata.unique(this.cancellationToken).listen(() => {\n\t\t\t\t\t\t(this.node as HTMLElement).className = (data.value as string[]).join(' ');\n\t\t\t\t\t}, this.cancellationToken);\n\t\t\t\t} else {\n\t\t\t\t\tthis.node.className = data.value;\n\t\t\t\t\tdata.unique(this.cancellationToken).listen(() => {\n\t\t\t\t\t\t(this.node as HTMLElement).className = data.value as string;\n\t\t\t\t\t}, this.cancellationToken);\n\t\t\t\t}\n\t\t\t}\n\t\t\tdata.unique(this.cancellationToken).listen((v) => ((this.node as HTMLElement).className = v), this.cancellationToken);\n\t\t} else {\n\t\t\tconst value: string = data.reduce<string>((p, c) => {\n\t\t\t\tif (typeof c === 'string') {\n\t\t\t\t\treturn `${p} ${c}`;\n\t\t\t\t} else {\n\t\t\t\t\tif (c.value) {\n\t\t\t\t\t\treturn `${p} ${c.value}`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn p;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}, '');\n\t\t\tthis.node.className = value;\n\t\t\tfor (const i of data) {\n\t\t\t\tif (i instanceof DataSource) {\n\t\t\t\t\ti.unique(this.cancellationToken).listen((v) => {\n\t\t\t\t\t\tconst value: string = data.reduce<string>((p, c) => {\n\t\t\t\t\t\t\tif (typeof c === 'string') {\n\t\t\t\t\t\t\t\treturn `${p} ${c}`;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (c.value) {\n\t\t\t\t\t\t\t\t\treturn `${p} ${c.value}`;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\treturn p;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, '');\n\t\t\t\t\t\t(this.node as HTMLElement).className = value;\n\t\t\t\t\t}, this.cancellationToken);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected resolveStringSource(source: StringSource): string {\n\t\tif (typeof source === 'string') {\n\t\t\treturn source;\n\t\t} else {\n\t\t\treturn source.value;\n\t\t}\n\t}\n\n\tprotected create(domNodeName: string): HTMLElement {\n\t\tconst node = document.createElement(domNodeName);\n\t\tnode[ownerSymbol] = this;\n\t\treturn node;\n\t}\n\n\tprotected getChildIndex(node: HTMLElement | Text): number {\n\t\tlet i = 0;\n\t\tfor (const child of node.childNodes) {\n\t\t\tif (child === node) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t\ti++;\n\t\t}\n\t\treturn -1;\n\t}\n\n\tprotected hasChild(node: HTMLElement): boolean {\n\t\tfor (const child of node.children) {\n\t\t\tif (child === node) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprotected addChildDom(child: AurumElement): void {\n\t\tthis.node.appendChild(child.node);\n\t\tchild.handleAttach?.(this);\n\t}\n\n\tprotected swapChildrenDom(indexA: number, indexB: number) {\n\t\tif (indexA === indexB) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst nodeA = this.node.children[indexA];\n\t\tconst nodeB = this.node.children[indexB];\n\t\tnodeA.remove();\n\t\tnodeB.remove();\n\t\tif (indexA < indexB) {\n\t\t\tthis.addDomNodeAt(nodeB as HTMLElement, indexA);\n\t\t\tthis.addDomNodeAt(nodeA as HTMLElement, indexB);\n\t\t} else {\n\t\t\tthis.addDomNodeAt(nodeA as HTMLElement, indexB);\n\t\t\tthis.addDomNodeAt(nodeB as HTMLElement, indexA);\n\t\t}\n\t}\n\n\tprotected addDomNodeAt(node: HTMLElement | Text, index: number): void {\n\t\tif (index >= this.node.childElementCount) {\n\t\t\tthis.node.appendChild(node);\n\t\t\tnode[ownerSymbol].handleAttach?.(this);\n\t\t} else {\n\t\t\tthis.node.insertBefore(node, this.node.children[index]);\n\t\t\tnode[ownerSymbol].handleAttach?.(this);\n\t\t}\n\t}\n\n\tpublic remove(): void {\n\t\tif (this.hasParent()) {\n\t\t\tthis.node.parentElement[ownerSymbol].removeChild(this.node);\n\t\t}\n\t}\n\n\tpublic hasParent(): boolean {\n\t\treturn !!this.node.parentElement;\n\t}\n\n\tpublic isConnected(): boolean {\n\t\treturn this.node.isConnected;\n\t}\n\n\tpublic removeChild(child: AurumElement): void {\n\t\tconst index = this.children.indexOf(child);\n\t\tif (index !== -1) {\n\t\t\tthis.children.splice(index, 1);\n\t\t}\n\t\tthis.render();\n\t}\n\n\tpublic removeChildAt(index: number): void {\n\t\tthis.children.splice(index, 1);\n\t\tthis.render();\n\t}\n\n\tpublic swapChildren(indexA: number, indexB: number): void {\n\t\tif (indexA === indexB) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst nodeA = this.children[indexA];\n\t\tconst nodeB = this.children[indexB];\n\t\tthis.children[indexA] = nodeB;\n\t\tthis.children[indexB] = nodeA;\n\t\tthis.render();\n\t}\n\n\tpublic clearChildren(): void {\n\t\tthis.children.length = 0;\n\t\tthis.render();\n\t}\n\n\tpublic addChild(child: ChildNode) {\n\t\tif (child instanceof Template) {\n\t\t\treturn;\n\t\t}\n\t\tchild = this.childNodeToAurum(child);\n\n\t\tthis.children.push(child);\n\t\tthis.render();\n\t}\n\n\tprivate childNodeToAurum(child: ChildNode): AurumElement {\n\t\tif (typeof child === 'string' || child instanceof DataSource) {\n\t\t\tchild = new AurumTextElement(child) as any;\n\t\t} else if (!(child instanceof AurumElement)) {\n\t\t\tchild = new AurumTextElement((child as any).toString()) as any;\n\t\t}\n\t\treturn child as any;\n\t}\n\n\tpublic addChildAt(child: ChildNode, index: number) {\n\t\tif (child instanceof Template) {\n\t\t\treturn;\n\t\t}\n\n\t\tchild = this.childNodeToAurum(child);\n\t\tthis.children.splice(index, 0, child);\n\t\tthis.render();\n\t}\n\n\tpublic addChildren(nodes: ChildNode[]) {\n\t\tif (nodes.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const child of nodes) {\n\t\t\tthis.addChild(child);\n\t\t}\n\t}\n\n\tpublic dispose(): void {\n\t\tthis.internalDispose(true);\n\t}\n\n\tprivate internalDispose(detach: boolean) {\n\t\tif (this.cancellationToken.isCanceled) {\n\t\t\treturn;\n\t\t}\n\t\tthis.cancellationToken.cancel();\n\t\tif (detach) {\n\t\t\tthis.remove();\n\t\t}\n\t\tfor (const child of this.node.childNodes) {\n\t\t\tif (child[ownerSymbol]) {\n\t\t\t\tchild[ownerSymbol].dispose(false);\n\t\t\t}\n\t\t}\n\t\tdelete this.node[ownerSymbol];\n\t\tdelete this.node;\n\t\tthis.onDispose?.(this);\n\t}\n}\n\nexport interface TemplateProps<T> extends AurumElementProps {\n\tonAttach?(entity: Template<T>): void;\n\tonDetach?(entity: Template<T>): void;\n\tgenerator(model: T): AurumElement;\n\tref?: string;\n}\n\nexport class Template<T> extends AurumElement {\n\tpublic generate: (model: T) => AurumElement;\n\tref: string;\n\n\tconstructor(props: TemplateProps<T>) {\n\t\tsuper(props, 'template');\n\t\tthis.ref = props.ref;\n\t\tthis.generate = props.generator;\n\t}\n}\n"]}