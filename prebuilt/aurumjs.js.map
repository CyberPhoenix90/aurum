{"version":3,"file":"aurumjs.js","sources":["../dist/utilities/event_emitter.js","../dist/stream/data_source.js","../dist/stream/object_data_source.js","../dist/utilities/owner_symbol.js","../dist/stream/duplex_data_source.js","../dist/nodes/special/aurum_text.js","../dist/nodes/special/aurum_element.js","../dist/nodes/div.js","../dist/nodes/button.js","../dist/nodes/input.js","../dist/nodes/li.js","../dist/nodes/span.js","../dist/nodes/style.js","../dist/nodes/audio.js","../dist/nodes/ul.js","../dist/nodes/p.js","../dist/nodes/img.js","../dist/nodes/link.js","../dist/nodes/canvas.js","../dist/nodes/a.js","../dist/nodes/article.js","../dist/nodes/br.js","../dist/nodes/form.js","../dist/nodes/label.js","../dist/nodes/ol.js","../dist/nodes/pre.js","../dist/nodes/progress.js","../dist/nodes/table.js","../dist/nodes/td.js","../dist/nodes/tr.js","../dist/nodes/th.js","../dist/nodes/textarea.js","../dist/nodes/h1.js","../dist/nodes/h2.js","../dist/nodes/h3.js","../dist/nodes/h4.js","../dist/nodes/h5.js","../dist/nodes/h6.js","../dist/nodes/header.js","../dist/nodes/footer.js","../dist/nodes/nav.js","../dist/nodes/b.js","../dist/nodes/i.js","../dist/nodes/script.js","../dist/nodes/abbr.js","../dist/nodes/area.js","../dist/nodes/aside.js","../dist/nodes/em.js","../dist/nodes/heading.js","../dist/nodes/iframe.js","../dist/nodes/noscript.js","../dist/nodes/q.js","../dist/nodes/select.js","../dist/nodes/source.js","../dist/nodes/title.js","../dist/nodes/video.js","../dist/nodes/tbody.js","../dist/nodes/tfoot.js","../dist/nodes/thead.js","../dist/nodes/summary.js","../dist/nodes/details.js","../dist/nodes/sub.js","../dist/nodes/sup.js","../dist/nodes/svg.js","../dist/nodes/data.js","../dist/nodes/time.js","../dist/utilities/aurum.js","../dist/nodes/option.js","../dist/nodes/template.js","../dist/utilities/linkedlist/linked_list_node.js","../dist/utilities/linkedlist/linked_list.js","../dist/utilities/cancellation_token.js","../dist/nodes/special/custom.js","../dist/nodes/special/router.js","../dist/nodes/special/switch.js","../dist/nodes/special/suspense.js"],"sourcesContent":["export class EventEmitter {\n    constructor() {\n        this.subscribeChannel = [];\n        this.onAfterFire = [];\n    }\n    get subscriptions() {\n        return this.subscribeChannel.length;\n    }\n    subscribe(callback, cancellationToken) {\n        const { facade } = this.createSubscription(callback, this.subscribeChannel, cancellationToken);\n        return facade;\n    }\n    hasSubscriptions() {\n        return this.subscriptions > 0;\n    }\n    cancelAll() {\n        if (!this.isFiring) {\n            this.subscribeChannel.length = 0;\n        }\n        else {\n            this.onAfterFire.push(() => (this.subscribeChannel.length = 0));\n        }\n    }\n    afterFire() {\n        if (this.onAfterFire.length > 0) {\n            this.onAfterFire.forEach((cb) => cb());\n            this.onAfterFire.length = 0;\n        }\n    }\n    fire(data) {\n        this.isFiring = true;\n        const length = this.subscribeChannel.length;\n        for (let i = 0; i < length; i++) {\n            this.subscribeChannel[i].callback(data);\n        }\n        this.isFiring = false;\n        this.afterFire();\n    }\n    createSubscription(callback, channel, cancellationToken) {\n        const that = this;\n        const subscription = {\n            callback\n        };\n        const facade = {\n            cancel() {\n                that.cancel(subscription, channel);\n            }\n        };\n        if (cancellationToken !== undefined) {\n            cancellationToken.addCancelable(() => that.cancel(subscription, channel));\n        }\n        channel.push(subscription);\n        return { subscription, facade };\n    }\n    cancel(subscription, channel) {\n        let index = channel.indexOf(subscription);\n        if (index >= 0) {\n            if (!this.isFiring) {\n                channel.splice(index, 1);\n            }\n            else {\n                this.onAfterFire.push(() => this.cancel(subscription, channel));\n            }\n        }\n    }\n}\n//# sourceMappingURL=event_emitter.js.map","import { EventEmitter } from '../utilities/event_emitter';\nexport class DataSource {\n    constructor(initialValue) {\n        this.value = initialValue;\n        this.updateEvent = new EventEmitter();\n    }\n    update(newValue) {\n        if (this.updating) {\n            throw new Error('Problem in datas source: Unstable value propagation, when updating a value the stream was updated back as a direct response. This can lead to infinite loops and is therefore not allowed');\n        }\n        this.updating = true;\n        this.value = newValue;\n        this.updateEvent.fire(newValue);\n        this.updating = false;\n    }\n    listenAndRepeat(callback, cancellationToken) {\n        callback(this.value);\n        return this.listen(callback, cancellationToken);\n    }\n    listen(callback, cancellationToken) {\n        return this.updateEvent.subscribe(callback, cancellationToken).cancel;\n    }\n    filter(callback, cancellationToken) {\n        const filteredSource = new DataSource();\n        this.listen((value) => {\n            if (callback(value, filteredSource.value)) {\n                filteredSource.update(value);\n            }\n        }, cancellationToken);\n        return filteredSource;\n    }\n    max(cancellationToken) {\n        return this.filter((newValue, oldValue) => {\n            if (typeof newValue === 'string' && typeof oldValue === 'string') {\n                return newValue.localeCompare(oldValue) > 0;\n            }\n            else {\n                return newValue > oldValue;\n            }\n        });\n    }\n    min(cancellationToken) {\n        return this.filter((newValue, oldValue) => {\n            if (typeof newValue === 'string' && typeof oldValue === 'string') {\n                return newValue.localeCompare(oldValue) < 0;\n            }\n            else {\n                return newValue < oldValue;\n            }\n        });\n    }\n    pipe(targetDataSource, cancellationToken) {\n        this.listen((v) => targetDataSource.update(v), cancellationToken);\n    }\n    map(callback, cancellationToken) {\n        const mappedSource = new DataSource(callback(this.value));\n        this.listen((value) => {\n            mappedSource.update(callback(value));\n        }, cancellationToken);\n        return mappedSource;\n    }\n    tap(callback, cancellationToken) {\n        const tapSource = new DataSource(this.value);\n        this.listen((value) => {\n            callback(value);\n            tapSource.update(value);\n        }, cancellationToken);\n        return tapSource;\n    }\n    await(cancellationToken) {\n        const mappedSource = new DataSource();\n        this.listen(async (value) => {\n            mappedSource.update(await value);\n        }, cancellationToken);\n        return mappedSource;\n    }\n    unique(cancellationToken) {\n        const uniqueSource = new DataSource(this.value);\n        this.listen((value) => {\n            if (value !== uniqueSource.value) {\n                uniqueSource.update(value);\n            }\n        }, cancellationToken);\n        return uniqueSource;\n    }\n    diff(cancellationToken) {\n        const diffingSource = new DataSource({\n            new: this.value,\n            old: undefined\n        });\n        this.listen((value) => {\n            diffingSource.update({\n                new: value,\n                old: diffingSource.value\n            });\n        }, cancellationToken);\n        return diffingSource;\n    }\n    reduce(reducer, initialValue, cancellationToken) {\n        const reduceSource = new DataSource(initialValue);\n        this.listen((v) => reduceSource.update(reducer(reduceSource.value, v)), cancellationToken);\n        return reduceSource;\n    }\n    aggregate(otherSource, combinator, cancellationToken) {\n        const aggregatedSource = new DataSource(combinator(this.value, otherSource.value));\n        this.listen(() => aggregatedSource.update(combinator(this.value, otherSource.value)), cancellationToken);\n        otherSource.listen(() => aggregatedSource.update(combinator(this.value, otherSource.value)), cancellationToken);\n        return aggregatedSource;\n    }\n    aggregateThree(second, third, combinator, cancellationToken) {\n        const aggregatedSource = new DataSource(combinator(this.value, second.value, third.value));\n        this.listen(() => aggregatedSource.update(combinator(this.value, second.value, third.value)), cancellationToken);\n        second.listen(() => aggregatedSource.update(combinator(this.value, second.value, third.value)), cancellationToken);\n        third.listen(() => aggregatedSource.update(combinator(this.value, second.value, third.value)), cancellationToken);\n        return aggregatedSource;\n    }\n    aggregateFour(second, third, fourth, combinator, cancellationToken) {\n        const aggregatedSource = new DataSource(combinator(this.value, second.value, third.value, fourth.value));\n        this.listen(() => aggregatedSource.update(combinator(this.value, second.value, third.value, fourth.value)), cancellationToken);\n        second.listen(() => aggregatedSource.update(combinator(this.value, second.value, third.value, fourth.value)), cancellationToken);\n        third.listen(() => aggregatedSource.update(combinator(this.value, second.value, third.value, fourth.value)), cancellationToken);\n        fourth.listen(() => aggregatedSource.update(combinator(this.value, second.value, third.value, fourth.value)), cancellationToken);\n        return aggregatedSource;\n    }\n    stringJoin(seperator, cancellationToken) {\n        const joinSource = new DataSource('');\n        this.listen((v) => joinSource.update(joinSource.value + seperator + v.toString()), cancellationToken);\n        return joinSource;\n    }\n    combine(otherSources, cancellationToken) {\n        const combinedDataSource = new DataSource();\n        this.pipe(combinedDataSource, cancellationToken);\n        for (const otherSource of otherSources) {\n            otherSource.pipe(combinedDataSource, cancellationToken);\n        }\n        return combinedDataSource;\n    }\n    delay(time, cancellationToken) {\n        const delayedDataSource = new DataSource(this.value);\n        this.listen((v) => {\n            setTimeout(() => {\n                delayedDataSource.update(v);\n            }, time);\n        }, cancellationToken);\n        return delayedDataSource;\n    }\n    debounce(time, cancellationToken) {\n        const debouncedDataSource = new DataSource(this.value);\n        let timeout;\n        this.listen((v) => {\n            clearTimeout(timeout);\n            timeout = setTimeout(() => {\n                debouncedDataSource.update(v);\n            }, time);\n        }, cancellationToken);\n        return debouncedDataSource;\n    }\n    throttle(time, cancellationToken) {\n        const throttledDataSource = new DataSource(this.value);\n        let cooldown = false;\n        this.listen((v) => {\n            if (!cooldown) {\n                throttledDataSource.update(v);\n                cooldown = true;\n                setTimeout(() => {\n                    cooldown = false;\n                }, time);\n            }\n        }, cancellationToken);\n        return throttledDataSource;\n    }\n    buffer(time, cancellationToken) {\n        const bufferedDataSource = new DataSource();\n        let timeout;\n        let buffer = [];\n        this.listen((v) => {\n            buffer.push(v);\n            if (!timeout) {\n                timeout = setTimeout(() => {\n                    timeout = undefined;\n                    bufferedDataSource.update(buffer);\n                    buffer = [];\n                }, time);\n            }\n        }, cancellationToken);\n        return bufferedDataSource;\n    }\n    accumulate(cancellationToken) {\n        const queueDataSource = new ArrayDataSource();\n        this.listen((v) => {\n            queueDataSource.push(v);\n        }, cancellationToken);\n        return queueDataSource;\n    }\n    pick(key, cancellationToken) {\n        var _a;\n        const subDataSource = new DataSource((_a = this.value) === null || _a === void 0 ? void 0 : _a[key]);\n        this.listen((v) => {\n            if (v !== undefined && v !== null) {\n                subDataSource.update(v[key]);\n            }\n            else {\n                subDataSource.update(v);\n            }\n        }, cancellationToken);\n        return subDataSource;\n    }\n    cancelAll() {\n        this.updateEvent.cancelAll();\n    }\n}\nexport class ArrayDataSource {\n    constructor(initialData) {\n        if (initialData) {\n            this.data = initialData.slice();\n        }\n        else {\n            this.data = [];\n        }\n        this.lengthSource = new DataSource(this.data.length).unique();\n        this.updateEvent = new EventEmitter();\n    }\n    listenAndRepeat(callback, cancellationToken) {\n        callback({\n            operation: 'add',\n            operationDetailed: 'append',\n            index: 0,\n            items: this.data,\n            newState: this.data,\n            count: this.data.length\n        });\n        return this.listen(callback, cancellationToken);\n    }\n    listen(callback, cancellationToken) {\n        return this.updateEvent.subscribe(callback, cancellationToken).cancel;\n    }\n    get length() {\n        return this.lengthSource;\n    }\n    getData() {\n        return this.data.slice();\n    }\n    get(index) {\n        return this.data[index];\n    }\n    set(index, item) {\n        const old = this.data[index];\n        if (old === item) {\n            return;\n        }\n        this.data[index] = item;\n        this.update({ operation: 'replace', operationDetailed: 'replace', target: old, count: 1, index, items: [item], newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    swap(indexA, indexB) {\n        if (indexA === indexB) {\n            return;\n        }\n        const itemA = this.data[indexA];\n        const itemB = this.data[indexB];\n        this.data[indexB] = itemA;\n        this.data[indexA] = itemB;\n        this.update({ operation: 'swap', operationDetailed: 'swap', index: indexA, index2: indexB, items: [itemA, itemB], newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    swapItems(itemA, itemB) {\n        if (itemA === itemB) {\n            return;\n        }\n        const indexA = this.data.indexOf(itemA);\n        const indexB = this.data.indexOf(itemB);\n        if (indexA !== -1 && indexB !== -1) {\n            this.data[indexB] = itemA;\n            this.data[indexA] = itemB;\n        }\n        this.update({ operation: 'swap', operationDetailed: 'swap', index: indexA, index2: indexB, items: [itemA, itemB], newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    appendArray(items) {\n        const old = this.data;\n        this.data = new Array(old.length);\n        let i = 0;\n        for (i = 0; i < old.length; i++) {\n            this.data[i] = old[i];\n        }\n        for (let n = 0; n < items.length; n++) {\n            this.data[i + n] = items[n];\n        }\n        this.update({\n            operation: 'add',\n            operationDetailed: 'append',\n            count: items.length,\n            index: this.data.length - items.length,\n            items,\n            newState: this.data\n        });\n        this.lengthSource.update(this.data.length);\n    }\n    push(...items) {\n        this.appendArray(items);\n        this.lengthSource.update(this.data.length);\n    }\n    unshift(...items) {\n        this.data.unshift(...items);\n        this.update({ operation: 'add', operationDetailed: 'prepend', count: items.length, items, index: 0, newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    pop() {\n        const item = this.data.pop();\n        this.update({\n            operation: 'remove',\n            operationDetailed: 'removeRight',\n            count: 1,\n            index: this.data.length,\n            items: [item],\n            newState: this.data\n        });\n        this.lengthSource.update(this.data.length);\n        return item;\n    }\n    merge(newData) {\n        for (let i = 0; i < newData.length; i++) {\n            if (this.data[i] !== newData[i]) {\n                if (this.data.length > i) {\n                    this.set(i, newData[i]);\n                }\n                else {\n                    this.push(newData[i]);\n                }\n            }\n        }\n        if (this.data.length > newData.length) {\n            this.removeRight(this.data.length - newData.length);\n        }\n        this.lengthSource.update(this.data.length);\n    }\n    removeRight(count) {\n        const length = this.data.length;\n        const result = this.data.splice(length - count, count);\n        this.update({ operation: 'remove', operationDetailed: 'removeRight', count, index: length - count, items: result, newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    removeLeft(count) {\n        const result = this.data.splice(0, count);\n        this.update({ operation: 'remove', operationDetailed: 'removeLeft', count, index: 0, items: result, newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    remove(item) {\n        const index = this.data.indexOf(item);\n        if (index !== -1) {\n            this.data.splice(index, 1);\n            this.update({ operation: 'remove', operationDetailed: 'remove', count: 1, index, items: [item], newState: this.data });\n            this.lengthSource.update(this.data.length);\n        }\n    }\n    clear() {\n        const items = this.data;\n        this.data = [];\n        this.update({\n            operation: 'remove',\n            operationDetailed: 'clear',\n            count: items.length,\n            index: 0,\n            items,\n            newState: this.data\n        });\n        this.lengthSource.update(this.data.length);\n    }\n    shift() {\n        const item = this.data.shift();\n        this.update({ operation: 'remove', operationDetailed: 'removeLeft', items: [item], count: 1, index: 0, newState: this.data });\n        this.lengthSource.update(this.data.length);\n        return item;\n    }\n    toArray() {\n        return this.data.slice();\n    }\n    sort(comparator, cancellationToken) {\n        return new SortedArrayView(this, comparator, cancellationToken);\n    }\n    map(mapper, cancellationToken) {\n        return new MappedArrayView(this, mapper, cancellationToken);\n    }\n    filter(callback, dependencies = [], cancellationToken) {\n        const view = new FilteredArrayView(this, callback, cancellationToken);\n        dependencies.forEach((dep) => {\n            dep.unique().listen(() => view.refresh());\n        });\n        return view;\n    }\n    forEach(callbackfn) {\n        return this.data.forEach(callbackfn);\n    }\n    update(change) {\n        this.updateEvent.fire(change);\n    }\n}\nexport class MappedArrayView extends ArrayDataSource {\n    constructor(parent, mapper, cancellationToken) {\n        const initial = parent.getData().map(mapper);\n        super(initial);\n        this.mapper = mapper;\n        parent.listen((change) => {\n            switch (change.operationDetailed) {\n                case 'removeLeft':\n                    this.removeLeft(change.count);\n                    break;\n                case 'removeRight':\n                    this.removeRight(change.count);\n                    break;\n                case 'remove':\n                    this.remove(this.data[change.index]);\n                    break;\n                case 'clear':\n                    this.clear();\n                    break;\n                case 'prepend':\n                    this.unshift(...change.items.map(this.mapper));\n                    break;\n                case 'append':\n                    this.appendArray(change.items.map(this.mapper));\n                    break;\n                case 'swap':\n                    this.swap(change.index, change.index2);\n                    break;\n                case 'replace':\n                    this.set(change.index, this.mapper(change.items[0]));\n                    break;\n            }\n        }, cancellationToken);\n    }\n}\nexport class SortedArrayView extends ArrayDataSource {\n    constructor(parent, comparator, cancellationToken) {\n        const initial = parent.getData().sort(comparator);\n        super(initial);\n        this.comparator = comparator;\n        parent.listen((change) => {\n            switch (change.operationDetailed) {\n                case 'removeLeft':\n                    this.removeLeft(change.count);\n                    break;\n                case 'removeRight':\n                    this.removeRight(change.count);\n                    break;\n                case 'remove':\n                    this.remove(change.items[0]);\n                    break;\n                case 'clear':\n                    this.data.length = 0;\n                    break;\n                case 'prepend':\n                    this.unshift(...change.items);\n                    this.data.sort(this.comparator);\n                    break;\n                case 'append':\n                    this.push(...change.items);\n                    this.data.sort(this.comparator);\n                    break;\n                case 'swap':\n                    break;\n                case 'replace':\n                    this.set(change.index, change.items[0]);\n                    this.data.sort(this.comparator);\n                    break;\n            }\n        }, cancellationToken);\n    }\n}\nexport class FilteredArrayView extends ArrayDataSource {\n    constructor(parent, filter, cancellationToken) {\n        if (Array.isArray(parent)) {\n            parent = new ArrayDataSource(parent);\n        }\n        filter = (filter !== null && filter !== void 0 ? filter : (() => true));\n        const initial = parent.data.filter(filter);\n        super(initial);\n        this.parent = parent;\n        this.viewFilter = filter;\n        parent.listen((change) => {\n            let filteredItems;\n            switch (change.operationDetailed) {\n                case 'clear':\n                    this.clear();\n                    break;\n                case 'removeLeft':\n                case 'removeRight':\n                case 'remove':\n                    for (const item of change.items) {\n                        this.remove(item);\n                    }\n                    break;\n                case 'prepend':\n                    filteredItems = change.items.filter(this.viewFilter);\n                    this.unshift(...filteredItems);\n                    break;\n                case 'append':\n                    filteredItems = change.items.filter(this.viewFilter);\n                    this.push(...filteredItems);\n                    break;\n                case 'swap':\n                    const indexA = this.data.indexOf(change.items[0]);\n                    const indexB = this.data.indexOf(change.items[1]);\n                    if (indexA !== -1 && indexB !== -1) {\n                        this.swap(indexA, indexB);\n                    }\n                    break;\n                case 'replace':\n                    const index = this.data.indexOf(change.target);\n                    if (index !== -1) {\n                        const acceptNew = this.viewFilter(change.items[0]);\n                        if (acceptNew) {\n                            this.set(index, change.items[0]);\n                        }\n                        else {\n                            this.remove(change.target);\n                        }\n                    }\n                    break;\n            }\n        }, cancellationToken);\n    }\n    updateFilter(filter) {\n        if (this.viewFilter === filter) {\n            return;\n        }\n        this.viewFilter = filter;\n        this.refresh();\n        return this.data.length;\n    }\n    refresh() {\n        this.clear();\n        const data = this.parent.data.filter(this.viewFilter);\n        this.push(...data);\n    }\n}\n//# sourceMappingURL=data_source.js.map","import { DataSource } from './data_source';\nimport { EventEmitter } from '../utilities/event_emitter';\nexport class ObjectDataSource {\n    constructor(initialData) {\n        if (initialData) {\n            this.data = initialData;\n        }\n        this.updateEvent = new EventEmitter();\n        this.updateEventOnKey = new Map();\n    }\n    pick(key, cancellationToken) {\n        var _a;\n        const subDataSource = new DataSource((_a = this.data) === null || _a === void 0 ? void 0 : _a[key]);\n        this.listenOnKey(key, (v) => {\n            subDataSource.update(v.newValue);\n        }, cancellationToken);\n        return subDataSource;\n    }\n    listen(callback, cancellationToken) {\n        return this.updateEvent.subscribe(callback, cancellationToken).cancel;\n    }\n    listenOnKeyAndRepeat(key, callback, cancellationToken) {\n        callback({\n            key,\n            newValue: this.data[key],\n            oldValue: undefined\n        });\n        return this.listenOnKey(key, callback, cancellationToken);\n    }\n    listenOnKey(key, callback, cancellationToken) {\n        if (!this.updateEventOnKey.has(key)) {\n            this.updateEventOnKey.set(key, new EventEmitter());\n        }\n        const event = this.updateEventOnKey.get(key);\n        return event.subscribe(callback, cancellationToken).cancel;\n    }\n    keys() {\n        return Object.keys(this.data);\n    }\n    values() {\n        return Object.values(this.data);\n    }\n    get(key) {\n        return this.data[key];\n    }\n    delete(key, value) {\n        const old = this.data[key];\n        delete this.data[key];\n        this.updateEvent.fire({ oldValue: old, key, newValue: undefined, deleted: true });\n    }\n    set(key, value) {\n        if (this.data[key] === value) {\n            return;\n        }\n        const old = this.data[key];\n        this.data[key] = value;\n        this.updateEvent.fire({ oldValue: old, key, newValue: this.data[key] });\n        if (this.updateEventOnKey.has(key)) {\n            this.updateEventOnKey.get(key).fire({ oldValue: old, key, newValue: this.data[key] });\n        }\n    }\n    assign(newData) {\n        for (const key of Object.keys(newData)) {\n            this.set(key, newData[key]);\n        }\n    }\n    toObject() {\n        return Object.assign({}, this.data);\n    }\n    toDataSource() {\n        const stream = new DataSource(this.data);\n        this.listen((s) => {\n            stream.update(this.data);\n        });\n        return stream;\n    }\n}\n//# sourceMappingURL=object_data_source.js.map","export const ownerSymbol = Symbol('owner');\n//# sourceMappingURL=owner_symbol.js.map","import { EventEmitter } from '../utilities/event_emitter';\nexport var DataFlow;\n(function (DataFlow) {\n    DataFlow[DataFlow[\"UPSTREAM\"] = 0] = \"UPSTREAM\";\n    DataFlow[DataFlow[\"DOWNSTREAM\"] = 1] = \"DOWNSTREAM\";\n})(DataFlow || (DataFlow = {}));\nexport class DuplexDataSource {\n    constructor(initialValue) {\n        this.value = initialValue;\n        this.updateDownstreamEvent = new EventEmitter();\n        this.updateUpstreamEvent = new EventEmitter();\n    }\n    static fromTwoDataSource(downStream, upstream, initialValue) {\n        const result = new DuplexDataSource(initialValue);\n        result.updateDownstreamEvent = downStream.updateEvent;\n        result.updateUpstreamEvent = upstream.updateEvent;\n    }\n    static createOneWay(direction = DataFlow.DOWNSTREAM, initialValue) {\n        return new DuplexDataSource(initialValue).oneWayFlow(direction);\n    }\n    updateDownstream(newValue) {\n        if (this.updating) {\n            throw new Error('Problem in datas source: Unstable value propagation, when updating a value the stream was updated back as a direct response. This can lead to infinite loops and is therefore not allowed');\n        }\n        this.updating = true;\n        this.value = newValue;\n        this.updateDownstreamEvent.fire(newValue);\n        this.updating = false;\n    }\n    updateUpstream(newValue) {\n        if (this.updating) {\n            throw new Error('Problem in datas source: Unstable value propagation, when updating a value the stream was updated back as a direct response. This can lead to infinite loops and is therefore not allowed');\n        }\n        this.updating = true;\n        this.value = newValue;\n        this.updateUpstreamEvent.fire(newValue);\n        this.updating = false;\n    }\n    listenAndRepeat(callback, cancellationToken) {\n        callback(this.value);\n        return this.listen(callback, cancellationToken);\n    }\n    listen(callback, cancellationToken) {\n        this.updateDownstreamEvent.subscribe(callback, cancellationToken).cancel;\n        return this.updateUpstreamEvent.subscribe(callback, cancellationToken).cancel;\n    }\n    listenUpstream(callback, cancellationToken) {\n        return this.updateUpstreamEvent.subscribe(callback, cancellationToken).cancel;\n    }\n    listenDownstream(callback, cancellationToken) {\n        return this.updateDownstreamEvent.subscribe(callback, cancellationToken).cancel;\n    }\n    filter(downStreamFilter, upstreamFilter, cancellationToken) {\n        if (!upstreamFilter) {\n            upstreamFilter = downStreamFilter;\n        }\n        const filteredSource = new DuplexDataSource();\n        this.listenDownstream((newVal) => {\n            if (downStreamFilter(newVal)) {\n                filteredSource.updateDownstream(newVal);\n            }\n        }, cancellationToken);\n        filteredSource.listenUpstream((newVal) => {\n            if (((upstreamFilter !== null && upstreamFilter !== void 0 ? upstreamFilter : downStreamFilter))(newVal)) {\n                this.updateUpstream(newVal);\n            }\n        }, cancellationToken);\n        return filteredSource;\n    }\n    pipe(targetDataSource, cancellationToken) {\n        this.listenDownstream((newVal) => targetDataSource.updateDownstream(newVal), cancellationToken);\n        targetDataSource.listenUpstream((newVal) => this.updateUpstream(newVal), cancellationToken);\n    }\n    map(mapper, reverseMapper, cancellationToken) {\n        const mappedSource = new DuplexDataSource(mapper(this.value));\n        this.listenDownstream((v) => mappedSource.updateDownstream(mapper(v)), cancellationToken);\n        mappedSource.listenUpstream((v) => this.updateUpstream(reverseMapper(v)), cancellationToken);\n        return mappedSource;\n    }\n    unique(cancellationToken) {\n        const uniqueSource = new DuplexDataSource(this.value);\n        this.listenDownstream((v) => {\n            if (uniqueSource.value !== v) {\n                uniqueSource.updateDownstream(v);\n            }\n        }, cancellationToken);\n        uniqueSource.listenUpstream((v) => {\n            if (this.value !== v) {\n                this.updateUpstream(v);\n            }\n        }, cancellationToken);\n        return uniqueSource;\n    }\n    oneWayFlow(direction = DataFlow.DOWNSTREAM, cancellationToken) {\n        const oneWaySource = new DuplexDataSource(this.value);\n        if (direction === DataFlow.DOWNSTREAM) {\n            this.listenDownstream((v) => oneWaySource.updateDownstream(v), cancellationToken);\n            oneWaySource.updateUpstream = () => void 0;\n        }\n        else {\n            oneWaySource.listenUpstream((v) => this.updateUpstream(v));\n            oneWaySource.updateDownstream = () => void 0;\n        }\n        return oneWaySource;\n    }\n    cancelAll() {\n        this.updateDownstreamEvent.cancelAll();\n        this.updateUpstreamEvent.cancelAll();\n    }\n}\n//# sourceMappingURL=duplex_data_source.js.map","import { DataSource } from '../../stream/data_source';\nimport { ownerSymbol } from '../../utilities/owner_symbol';\nexport class AurumTextElement {\n    constructor(text) {\n        this.node = this.create(text);\n        if (text instanceof DataSource) {\n            text.listen((v) => {\n                if (this.node) {\n                    this.node.textContent = v;\n                }\n            });\n        }\n    }\n    resolveStringSource(source) {\n        if (typeof source === 'string') {\n            return source;\n        }\n        else {\n            return source.value;\n        }\n    }\n    create(text) {\n        const node = document.createTextNode(this.resolveStringSource(text));\n        node[ownerSymbol] = this;\n        return node;\n    }\n    remove() {\n        if (this.hasParent()) {\n            this.node.parentElement[ownerSymbol].removeChild(this.node);\n        }\n    }\n    hasParent() {\n        return !!this.node.parentElement;\n    }\n}\n//# sourceMappingURL=aurum_text.js.map","import { ArrayDataSource, DataSource } from '../../stream/data_source';\nimport { ownerSymbol } from '../../utilities/owner_symbol';\nimport { AurumTextElement } from './aurum_text';\nimport { EventEmitter } from '../../utilities/event_emitter';\nimport { DuplexDataSource } from '../../stream/duplex_data_source';\nexport const aurumElementModelIdentitiy = Symbol('AurumElementModel');\nconst defaultEvents = {\n    drag: 'onDrag',\n    dragstart: 'onDragStart',\n    dragend: 'onDragEnd',\n    dragexit: 'onDragExit',\n    dragover: 'onDragOver',\n    dragenter: 'onDragEnter',\n    dragleave: 'onDragLeave',\n    blur: 'onBlur',\n    focus: 'onFocus',\n    click: 'onClick',\n    dblclick: 'onDblClick',\n    keydown: 'onKeyDown',\n    keyhit: 'onKeyHit',\n    keyup: 'onKeyUp',\n    mousedown: 'onMouseDown',\n    mouseup: 'onMouseUp',\n    mousemove: 'onMouseMove',\n    mouseenter: 'onMouseEnter',\n    mouseleave: 'onMouseLeave',\n    mousewheel: 'onMouseWheel',\n    load: 'onLoad',\n    error: 'onError'\n};\nconst defaultProps = ['id', 'name', 'draggable', 'tabindex', 'style', 'role', 'contentEditable'];\nexport function prerender(model) {\n    if (model && model[aurumElementModelIdentitiy]) {\n        const result = model.constructor(model.props, model.innerNodes);\n        return prerender(result);\n    }\n    else {\n        return model;\n    }\n}\nexport class AurumElement {\n    constructor(props, children, domNodeName) {\n        var _a, _b;\n        this.node = this.create(domNodeName);\n        this.children = [];\n        if (props != null) {\n            if (props.onAttach) {\n                this.onAttach = props.onAttach;\n                this.needAttach = true;\n            }\n            this.onDetach = props.onDetach;\n            this.initialize(props);\n            (_b = (_a = props).onCreate) === null || _b === void 0 ? void 0 : _b.call(_a, this.node);\n        }\n        if (children) {\n            this.addChildren(children);\n        }\n    }\n    initialize(props) {\n        this.createEventHandlers(defaultEvents, props);\n        const dataProps = Object.keys(props).filter((e) => e.includes('-'));\n        this.bindProps(defaultProps, props, dataProps);\n        if (props.class) {\n            this.handleClass(props.class);\n        }\n    }\n    bindProps(keys, props, dynamicProps) {\n        for (const key of keys) {\n            if (props[key]) {\n                this.assignStringSourceToAttribute(props[key], key);\n            }\n        }\n        if (dynamicProps) {\n            for (const key of dynamicProps) {\n                if (props[key]) {\n                    this.assignStringSourceToAttribute(props[key], key);\n                }\n            }\n        }\n    }\n    createEventHandlers(events, props) {\n        for (const key in events) {\n            if (props[events[key]]) {\n                if (props[events[key]] instanceof DataSource) {\n                    this.node.addEventListener(key, (e) => props[events[key]].update(e));\n                }\n                else if (props[events[key]] instanceof DuplexDataSource) {\n                    this.node.addEventListener(key, (e) => props[events[key]].updateDownstream(e));\n                }\n                else if (typeof props[events[key]] === 'function') {\n                    this.node.addEventListener(key, (e) => props[events[key]](e));\n                }\n            }\n        }\n    }\n    render() {\n        let absoluteIndex = 0;\n        for (let i = 0; i < this.children.length; i++, absoluteIndex++) {\n            if (this.children[i] instanceof AurumFragment) {\n                absoluteIndex = this.renderFragment(this.children[i], absoluteIndex);\n            }\n            else {\n                this.renderChild(this.children[i], absoluteIndex);\n            }\n        }\n        while (this.node.childNodes.length > absoluteIndex) {\n            const child = this.node.childNodes[this.node.childNodes.length - 1];\n            this.node.removeChild(child);\n        }\n    }\n    renderFragment(fragment, absoluteIndex) {\n        for (let j = 0; j < fragment.children.length; j++, absoluteIndex++) {\n            if (fragment.children[j] instanceof AurumFragment) {\n                absoluteIndex = this.renderFragment(fragment.children[j], absoluteIndex);\n            }\n            else {\n                this.renderChild(fragment.children[j], absoluteIndex);\n            }\n        }\n        absoluteIndex--;\n        return absoluteIndex;\n    }\n    renderChild(child, index) {\n        if (this.node.childNodes.length <= index) {\n            return this.addChildDom(child);\n        }\n        if (this.node.childNodes[index][ownerSymbol] !== child) {\n            const childIndex = this.getChildIndex(child.node);\n            if (childIndex !== -1) {\n                this.swapChildrenDom(index, childIndex);\n            }\n            else {\n                this.addDomNodeAt(child.node, index);\n            }\n        }\n    }\n    assignStringSourceToAttribute(data, key) {\n        if (typeof data === 'string' || typeof data === 'boolean') {\n            if (typeof data === 'boolean') {\n                if (data) {\n                    this.node.setAttribute(key, '');\n                }\n                else {\n                    this.node.removeAttribute(key);\n                }\n            }\n            else {\n                this.node.setAttribute(key, data);\n            }\n        }\n        else {\n            data.unique().listenAndRepeat((v) => {\n                if (typeof v === 'boolean') {\n                    if (v) {\n                        this.node.setAttribute(key, '');\n                    }\n                    else {\n                        this.node.removeAttribute(key);\n                    }\n                }\n                else {\n                    this.node.setAttribute(key, v);\n                }\n            });\n        }\n    }\n    handleAttach(parent) {\n        var _a, _b, _c, _d, _e;\n        if (this.needAttach) {\n            if (parent.isConnected()) {\n                (_b = (_a = this).onAttach) === null || _b === void 0 ? void 0 : _b.call(_a, this.node);\n                for (const child of this.node.childNodes) {\n                    (_e = (_c = child[ownerSymbol]) === null || _c === void 0 ? void 0 : (_d = _c).handleAttach) === null || _e === void 0 ? void 0 : _e.call(_d, this);\n                }\n            }\n            else {\n                parent.needAttach = true;\n            }\n        }\n    }\n    handleDetach() {\n        var _a, _b, _c, _d;\n        if (!this.node.isConnected) {\n            (_b = (_a = this).onDetach) === null || _b === void 0 ? void 0 : _b.call(_a, this.node);\n            for (const child of this.node.childNodes) {\n                if (child[ownerSymbol]) {\n                    (_d = (_c = child[ownerSymbol]).handleDetach) === null || _d === void 0 ? void 0 : _d.call(_c);\n                }\n            }\n        }\n    }\n    handleClass(data) {\n        if (typeof data === 'string') {\n            this.node.className = data;\n        }\n        else if (data instanceof DataSource) {\n            if (data.value) {\n                if (Array.isArray(data.value)) {\n                    this.node.className = data.value.join(' ');\n                    data.unique().listen(() => {\n                        this.node.className = data.value.join(' ');\n                    });\n                }\n                else {\n                    this.node.className = data.value;\n                    data.unique().listen(() => {\n                        this.node.className = data.value;\n                    });\n                }\n            }\n            data.unique().listen((v) => (this.node.className = v));\n        }\n        else {\n            const value = data.reduce((p, c) => {\n                if (typeof c === 'string') {\n                    return `${p} ${c}`;\n                }\n                else {\n                    if (c.value) {\n                        return `${p} ${c.value}`;\n                    }\n                    else {\n                        return p;\n                    }\n                }\n            }, '');\n            this.node.className = value;\n            for (const i of data) {\n                if (i instanceof DataSource) {\n                    i.unique().listen((v) => {\n                        const value = data.reduce((p, c) => {\n                            if (typeof c === 'string') {\n                                return `${p} ${c}`;\n                            }\n                            else {\n                                if (c.value) {\n                                    return `${p} ${c.value}`;\n                                }\n                                else {\n                                    return p;\n                                }\n                            }\n                        }, '');\n                        this.node.className = value;\n                    });\n                }\n            }\n        }\n    }\n    create(domNodeName) {\n        const node = document.createElement(domNodeName);\n        node[ownerSymbol] = this;\n        return node;\n    }\n    getChildIndex(node) {\n        let i = 0;\n        for (const child of this.node.childNodes) {\n            if (child === node) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n    hasChild(node) {\n        for (const child of node.children) {\n            if (child === node) {\n                return true;\n            }\n        }\n        return false;\n    }\n    addChildDom(child) {\n        var _a, _b;\n        this.node.appendChild(child.node);\n        (_b = (_a = child).handleAttach) === null || _b === void 0 ? void 0 : _b.call(_a, this);\n    }\n    swapChildrenDom(indexA, indexB) {\n        if (indexA === indexB) {\n            return;\n        }\n        const nodeA = this.node.children[indexA];\n        const nodeB = this.node.children[indexB];\n        nodeA.remove();\n        nodeB.remove();\n        if (indexA < indexB) {\n            this.addDomNodeAt(nodeB, indexA);\n            this.addDomNodeAt(nodeA, indexB);\n        }\n        else {\n            this.addDomNodeAt(nodeA, indexB);\n            this.addDomNodeAt(nodeB, indexA);\n        }\n    }\n    addDomNodeAt(node, index) {\n        var _a, _b, _c, _d;\n        if (index >= this.node.childElementCount) {\n            this.node.appendChild(node);\n            (_b = (_a = node[ownerSymbol]).handleAttach) === null || _b === void 0 ? void 0 : _b.call(_a, this);\n        }\n        else {\n            this.node.insertBefore(node, this.node.children[index]);\n            (_d = (_c = node[ownerSymbol]).handleAttach) === null || _d === void 0 ? void 0 : _d.call(_c, this);\n        }\n    }\n    remove() {\n        if (this.hasParent()) {\n            this.node.parentElement[ownerSymbol].removeChild(this.node);\n        }\n    }\n    hasParent() {\n        return !!this.node.parentElement;\n    }\n    isConnected() {\n        return this.node.isConnected;\n    }\n    removeChild(child) {\n        const index = this.children.indexOf(child);\n        if (index !== -1) {\n            this.children.splice(index, 1);\n        }\n        this.render();\n    }\n    removeChildAt(index) {\n        this.children.splice(index, 1);\n        this.render();\n    }\n    swapChildren(indexA, indexB) {\n        if (indexA === indexB) {\n            return;\n        }\n        const nodeA = this.children[indexA];\n        const nodeB = this.children[indexB];\n        this.children[indexA] = nodeB;\n        this.children[indexB] = nodeA;\n        this.render();\n    }\n    clearChildren() {\n        this.children.length = 0;\n        this.render();\n    }\n    addChild(child) {\n        if (child === undefined || child === null) {\n            return;\n        }\n        if (child[aurumElementModelIdentitiy]) {\n            child = prerender(child);\n            if (child === undefined) {\n                return;\n            }\n        }\n        if (Array.isArray(child)) {\n            for (const subChild of child) {\n                this.addChild(subChild);\n            }\n            return;\n        }\n        this.children.push(this.childNodeToAurum(child));\n        this.render();\n    }\n    childNodeToAurum(child) {\n        if (child instanceof AurumElement) {\n            return child;\n        }\n        if (child instanceof Promise) {\n            const result = new AurumFragment({});\n            child.then((value) => {\n                result.addChildren([value]);\n                this.render();\n            });\n            return result;\n        }\n        else if (child instanceof ArrayDataSource) {\n            const result = new AurumFragment({ repeatModel: child });\n            result.onChange.subscribe(() => this.render());\n            return result;\n        }\n        else if (typeof child === 'string' || typeof child === 'number' || typeof child === 'boolean' || typeof child === 'bigint') {\n            return new AurumTextElement(child.toString());\n        }\n        else if (child instanceof DataSource) {\n            const result = new AurumFragment({}, [child]);\n            result.onChange.subscribe(() => this.render());\n            return result;\n        }\n        else {\n            throw new Error('Unsupported child type');\n        }\n    }\n    addChildAt(child, index) {\n        this.children.splice(index, 0, this.childNodeToAurum(child));\n        this.render();\n    }\n    addChildren(nodes) {\n        if (nodes.length === 0) {\n            return;\n        }\n        for (const child of nodes) {\n            this.addChild(child);\n        }\n    }\n}\nexport class AurumFragment {\n    constructor(props, children) {\n        this.onChange = new EventEmitter();\n        this.children = [];\n        if (props.repeatModel) {\n            this.handleRepeat(props.repeatModel);\n        }\n        else if (children) {\n            this.addChildren(children);\n        }\n    }\n    addChildren(children) {\n        for (const child of children) {\n            let renderable;\n            if (child[aurumElementModelIdentitiy]) {\n                renderable = prerender(child);\n            }\n            else {\n                renderable = child;\n            }\n            if (renderable instanceof AurumElement) {\n                this.children.push(renderable);\n            }\n            else if (renderable instanceof DataSource) {\n                let sourceChild = undefined;\n                let wasArray;\n                const freshnessToken = { ts: undefined };\n                renderable.unique().listenAndRepeat((newValue) => {\n                    freshnessToken.ts = Date.now();\n                    if ((newValue === undefined || newValue === null) && wasArray) {\n                        this.children.length = 0;\n                        this.onChange.fire();\n                        wasArray = false;\n                        return;\n                    }\n                    else if (!Array.isArray(newValue) && wasArray) {\n                        this.children.length = 0;\n                        this.onChange.fire();\n                        wasArray = false;\n                    }\n                    if (Array.isArray(newValue)) {\n                        wasArray = true;\n                        this.children.length = 0;\n                        this.onChange.fire();\n                        for (const newSubValue of newValue) {\n                            this.handleSourceChild(newSubValue, undefined, undefined, freshnessToken, freshnessToken.ts);\n                        }\n                    }\n                    else {\n                        sourceChild = this.handleSourceChild(newValue, sourceChild, renderable, freshnessToken, freshnessToken.ts);\n                    }\n                });\n            }\n            else {\n                throw new Error('case not yet implemented');\n            }\n        }\n    }\n    handleSourceChild(newValue, sourceChild, dataSource, freshnessToken, timestamp) {\n        if (newValue === undefined || newValue === null) {\n            if (sourceChild) {\n                this.children.splice(this.children.indexOf(sourceChild), 1);\n                sourceChild = undefined;\n                this.onChange.fire();\n            }\n            return;\n        }\n        if (newValue[aurumElementModelIdentitiy]) {\n            newValue = prerender(newValue);\n        }\n        if (typeof newValue === 'string' || typeof newValue === 'bigint' || typeof newValue === 'number' || typeof newValue === 'boolean') {\n            if (!sourceChild) {\n                const textNode = new AurumTextElement((dataSource !== null && dataSource !== void 0 ? dataSource : newValue));\n                this.children.push(textNode);\n                sourceChild = textNode;\n                this.onChange.fire();\n            }\n            else if (sourceChild instanceof AurumElement) {\n                const textNode = new AurumTextElement((dataSource !== null && dataSource !== void 0 ? dataSource : newValue));\n                this.children.splice(this.children.indexOf(sourceChild), 1, textNode);\n                sourceChild = textNode;\n                this.onChange.fire();\n            }\n        }\n        else if (newValue instanceof AurumElement) {\n            if (newValue !== sourceChild) {\n                if (sourceChild) {\n                    this.children.splice(this.children.indexOf(sourceChild), 1, newValue);\n                }\n                else {\n                    this.children.push(newValue);\n                }\n                sourceChild = newValue;\n                this.onChange.fire();\n            }\n        }\n        else if (newValue instanceof Promise) {\n            newValue.then((value) => {\n                if (freshnessToken.ts === timestamp) {\n                    this.addChildren([value]);\n                    this.onChange.fire();\n                }\n            });\n        }\n        else if (newValue instanceof DataSource) {\n            if (!sourceChild) {\n                const result = new AurumFragment({}, [newValue]);\n                sourceChild = result;\n                this.children.push(result);\n                result.onChange.subscribe(() => this.onChange.fire());\n                this.onChange.fire();\n            }\n            else if (sourceChild !== newValue) {\n                const result = new AurumFragment({}, [newValue]);\n                result.onChange.subscribe(() => this.onChange.fire());\n                this.children.splice(this.children.indexOf(sourceChild), 1, result);\n                sourceChild = result;\n                this.onChange.fire();\n            }\n        }\n        else if (newValue instanceof ArrayDataSource) {\n            if (!sourceChild) {\n                const result = new AurumFragment({ repeatModel: newValue });\n                sourceChild = result;\n                this.children.push(result);\n                result.onChange.subscribe(() => this.onChange.fire());\n                this.onChange.fire();\n            }\n            else if (sourceChild !== newValue) {\n                const result = new AurumFragment({ repeatModel: newValue });\n                result.onChange.subscribe(() => this.onChange.fire());\n                this.children.splice(this.children.indexOf(sourceChild), 1, result);\n                sourceChild = result;\n                this.onChange.fire();\n            }\n        }\n        return sourceChild;\n    }\n    handleRepeat(dataSource) {\n        dataSource.listenAndRepeat((change) => {\n            switch (change.operationDetailed) {\n                case 'replace':\n                    this.children[change.index] = prerender(change.items[0]);\n                    break;\n                case 'swap':\n                    const itemA = this.children[change.index];\n                    const itemB = this.children[change.index2];\n                    this.children[change.index2] = itemA;\n                    this.children[change.index] = itemB;\n                    break;\n                case 'append':\n                    this.children = this.children.concat(change.items.map(prerender));\n                    break;\n                case 'prepend':\n                    this.children.unshift(...change.items.map(prerender));\n                    break;\n                case 'remove':\n                case 'removeLeft':\n                case 'removeRight':\n                    this.children.splice(change.index, change.count);\n                    break;\n                case 'clear':\n                    this.children = [];\n                    break;\n                default:\n                    throw new Error('unhandled operation');\n            }\n            this.onChange.fire();\n        });\n    }\n}\n//# sourceMappingURL=aurum_element.js.map","import { AurumElement } from './special/aurum_element';\nexport class Div extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'div');\n    }\n}\n//# sourceMappingURL=div.js.map","import { AurumElement } from './special/aurum_element';\nexport class Button extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'button');\n        if (props !== null) {\n            this.bindProps(['disabled'], props);\n        }\n    }\n}\n//# sourceMappingURL=button.js.map","import { AurumElement } from './special/aurum_element';\nimport { DataSource } from '../stream/data_source';\nimport { DuplexDataSource } from '../stream/duplex_data_source';\nconst inputEvents = { input: 'onInput', change: 'onChange' };\nconst inputProps = [\n    'placeholder',\n    'readonly',\n    'disabled',\n    'accept',\n    'alt',\n    'autocomplete',\n    'autofocus',\n    'checked',\n    'defaultChecked',\n    'formAction',\n    'formEnctype',\n    'formMethod',\n    'formNoValidate',\n    'formTarget',\n    'max',\n    'maxLength',\n    'min',\n    'minLength',\n    'pattern',\n    'multiple',\n    'required',\n    'type'\n];\nexport class Input extends AurumElement {\n    constructor(props, children) {\n        var _a, _b;\n        super(props, children, 'input');\n        if (props !== null) {\n            if (props.value instanceof DataSource || props.value instanceof DuplexDataSource) {\n                props.value.unique().listenAndRepeat((value) => (this.node.value = value));\n                this.node.addEventListener('input', () => {\n                    if (props.value instanceof DataSource) {\n                        props.value.update(this.node.value);\n                    }\n                    else if (props.value instanceof DuplexDataSource) {\n                        props.value.updateUpstream(this.node.value);\n                    }\n                });\n            }\n            else {\n                this.node.value = (_a = props.value, (_a !== null && _a !== void 0 ? _a : ''));\n            }\n            if (props.checked instanceof DataSource || props.checked instanceof DuplexDataSource) {\n                props.checked.unique().listenAndRepeat((value) => (this.node.checked = value));\n                this.node.addEventListener('change', () => {\n                    if (props.checked instanceof DataSource) {\n                        props.checked.update(this.node.checked);\n                    }\n                    else if (props.checked instanceof DuplexDataSource) {\n                        props.checked.updateUpstream(this.node.checked);\n                    }\n                });\n            }\n            else {\n                this.node.checked = (_b = props.checked, (_b !== null && _b !== void 0 ? _b : false));\n            }\n            this.bindProps(inputProps, props);\n            this.createEventHandlers(inputEvents, props);\n        }\n    }\n}\n//# sourceMappingURL=input.js.map","import { AurumElement } from './special/aurum_element';\nexport class Li extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'li');\n    }\n}\n//# sourceMappingURL=li.js.map","import { AurumElement } from './special/aurum_element';\nexport class Span extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'span');\n    }\n}\n//# sourceMappingURL=span.js.map","import { AurumElement } from './special/aurum_element';\nexport class Style extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'style');\n        if (props !== null) {\n            this.bindProps(['media'], props);\n        }\n    }\n}\n//# sourceMappingURL=style.js.map","import { AurumElement } from './special/aurum_element';\nexport class Audio extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'audio');\n        if (props !== null) {\n            this.bindProps(['controls', 'autoplay', 'loop', 'muted', 'preload', 'src'], props);\n        }\n    }\n}\n//# sourceMappingURL=audio.js.map","import { AurumElement } from './special/aurum_element';\nexport class Ul extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'ul');\n    }\n}\n//# sourceMappingURL=ul.js.map","import { AurumElement } from './special/aurum_element';\nexport class P extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'p');\n    }\n}\n//# sourceMappingURL=p.js.map","import { AurumElement } from './special/aurum_element';\nexport class Img extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'img');\n        if (props !== null) {\n            this.bindProps(['src', 'alt', 'width', 'height', 'referrerPolicy', 'sizes', 'srcset', 'useMap'], props);\n        }\n    }\n}\n//# sourceMappingURL=img.js.map","import { AurumElement } from './special/aurum_element';\nexport class Link extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'link');\n        if (props !== null) {\n            this.bindProps(['href', 'rel', 'media', 'as', 'disabled', 'type'], props);\n        }\n    }\n}\n//# sourceMappingURL=link.js.map","import { AurumElement } from './special/aurum_element';\nexport class Canvas extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'canvas');\n        if (props !== null) {\n            this.bindProps(['width', 'height'], props);\n        }\n    }\n}\n//# sourceMappingURL=canvas.js.map","import { AurumElement } from './special/aurum_element';\nexport class A extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'a');\n        if (props !== null) {\n            this.bindProps(['href', 'target'], props);\n        }\n    }\n}\n//# sourceMappingURL=a.js.map","import { AurumElement } from './special/aurum_element';\nexport class Article extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'article');\n    }\n}\n//# sourceMappingURL=article.js.map","import { AurumElement } from './special/aurum_element';\nexport class Br extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'br');\n    }\n}\n//# sourceMappingURL=br.js.map","import { AurumElement } from './special/aurum_element';\nexport class Form extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'form');\n    }\n}\n//# sourceMappingURL=form.js.map","import { AurumElement } from './special/aurum_element';\nexport class Label extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'label');\n        if (props !== null) {\n            this.bindProps(['for'], props);\n        }\n    }\n}\n//# sourceMappingURL=label.js.map","import { AurumElement } from './special/aurum_element';\nexport class Ol extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'ol');\n    }\n}\n//# sourceMappingURL=ol.js.map","import { AurumElement } from './special/aurum_element';\nexport class Pre extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'pre');\n    }\n}\n//# sourceMappingURL=pre.js.map","import { AurumElement } from './special/aurum_element';\nexport class Progress extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'progress');\n        if (props !== null) {\n            this.bindProps(['max', 'value'], props);\n        }\n    }\n}\n//# sourceMappingURL=progress.js.map","import { AurumElement } from './special/aurum_element';\nexport class Table extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'table');\n    }\n}\n//# sourceMappingURL=table.js.map","import { AurumElement } from './special/aurum_element';\nexport class Td extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'td');\n    }\n}\n//# sourceMappingURL=td.js.map","import { AurumElement } from './special/aurum_element';\nexport class Tr extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'tr');\n    }\n}\n//# sourceMappingURL=tr.js.map","import { AurumElement } from './special/aurum_element';\nexport class Th extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'th');\n    }\n}\n//# sourceMappingURL=th.js.map","import { AurumElement } from './special/aurum_element';\nconst textAreaEvents = { input: 'onInput', change: 'onChange' };\nconst textAreaProps = [\n    'placeholder',\n    'readonly',\n    'disabled',\n    'rows',\n    'wrap',\n    'autocomplete',\n    'autofocus',\n    'max',\n    'maxLength',\n    'min',\n    'minLength',\n    'required',\n    'type'\n];\nexport class TextArea extends AurumElement {\n    constructor(props, children) {\n        var _a, _b, _c;\n        super(props, children, 'textArea');\n        if (props !== null) {\n            if (props.inputValueSource) {\n                this.node.value = (_b = (_a = props.initialValue, (_a !== null && _a !== void 0 ? _a : props.inputValueSource.value)), (_b !== null && _b !== void 0 ? _b : ''));\n                props.inputValueSource.unique().listen((value) => (this.node.value = value));\n            }\n            else {\n                this.node.value = (_c = props.initialValue, (_c !== null && _c !== void 0 ? _c : ''));\n            }\n            this.bindProps(textAreaProps, props);\n            this.createEventHandlers(textAreaEvents, props);\n            if (props.inputValueSource) {\n                this.node.addEventListener('input', () => {\n                    props.inputValueSource.update(this.node.value);\n                });\n            }\n        }\n    }\n}\n//# sourceMappingURL=textarea.js.map","import { AurumElement } from './special/aurum_element';\nexport class H1 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h1');\n    }\n}\n//# sourceMappingURL=h1.js.map","import { AurumElement } from './special/aurum_element';\nexport class H2 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h2');\n    }\n}\n//# sourceMappingURL=h2.js.map","import { AurumElement } from './special/aurum_element';\nexport class H3 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h3');\n    }\n}\n//# sourceMappingURL=h3.js.map","import { AurumElement } from './special/aurum_element';\nexport class H4 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h4');\n    }\n}\n//# sourceMappingURL=h4.js.map","import { AurumElement } from './special/aurum_element';\nexport class H5 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h5');\n    }\n}\n//# sourceMappingURL=h5.js.map","import { AurumElement } from './special/aurum_element';\nexport class H6 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h6');\n    }\n}\n//# sourceMappingURL=h6.js.map","import { AurumElement } from './special/aurum_element';\nexport class Header extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'header');\n    }\n}\n//# sourceMappingURL=header.js.map","import { AurumElement } from './special/aurum_element';\nexport class Footer extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'footer');\n    }\n}\n//# sourceMappingURL=footer.js.map","import { AurumElement } from './special/aurum_element';\nexport class Nav extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'nav');\n    }\n}\n//# sourceMappingURL=nav.js.map","import { AurumElement } from './special/aurum_element';\nexport class B extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'b');\n    }\n}\n//# sourceMappingURL=b.js.map","import { AurumElement } from './special/aurum_element';\nexport class I extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'i');\n    }\n}\n//# sourceMappingURL=i.js.map","import { AurumElement } from './special/aurum_element';\nexport class Script extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'script');\n        if (props !== null) {\n            this.bindProps(['src', 'async', 'defer', 'integrity', 'noModule', 'type'], props);\n        }\n    }\n}\n//# sourceMappingURL=script.js.map","import { AurumElement } from './special/aurum_element';\nexport class Abbr extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'abbr');\n    }\n}\n//# sourceMappingURL=abbr.js.map","import { AurumElement } from './special/aurum_element';\nexport class Area extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'area');\n    }\n}\n//# sourceMappingURL=area.js.map","import { AurumElement } from './special/aurum_element';\nexport class Aside extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'aside');\n    }\n}\n//# sourceMappingURL=aside.js.map","import { AurumElement } from './special/aurum_element';\nexport class Em extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'em');\n    }\n}\n//# sourceMappingURL=em.js.map","import { AurumElement } from './special/aurum_element';\nexport class Heading extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'heading');\n    }\n}\n//# sourceMappingURL=heading.js.map","import { AurumElement } from './special/aurum_element';\nexport class IFrame extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'iframe');\n        if (props !== null) {\n            this.bindProps(['src', 'srcdoc', 'width', 'height', 'allow', 'allowFullscreen', 'allowPaymentRequest'], props);\n        }\n    }\n}\n//# sourceMappingURL=iframe.js.map","import { AurumElement } from './special/aurum_element';\nexport class NoScript extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'noscript');\n    }\n}\n//# sourceMappingURL=noscript.js.map","import { AurumElement } from './special/aurum_element';\nexport class Q extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'q');\n    }\n}\n//# sourceMappingURL=q.js.map","import { AurumElement } from './special/aurum_element';\nconst selectEvents = { change: 'onChange' };\nexport class Select extends AurumElement {\n    constructor(props, children) {\n        var _a;\n        super(props, children, 'select');\n        if (props !== null) {\n            this.createEventHandlers(selectEvents, props);\n            this.initialSelection = props.initialSelection;\n            if (props.selectedIndexSource) {\n                this.selectedIndexSource = props.selectedIndexSource;\n                props.selectedIndexSource.unique().listenAndRepeat((value) => (this.node.selectedIndex = value));\n            }\n            else {\n                this.node.selectedIndex = (_a = props.initialSelection, (_a !== null && _a !== void 0 ? _a : -1));\n            }\n            if (props.selectedIndexSource) {\n                this.needAttach = true;\n                this.node.addEventListener('change', () => {\n                    props.selectedIndexSource.update(this.node.selectedIndex);\n                });\n            }\n        }\n    }\n    handleAttach(parent) {\n        super.handleAttach(parent);\n        if (this.node.isConnected) {\n            if (this.selectedIndexSource) {\n                this.node.selectedIndex = this.selectedIndexSource.value;\n            }\n            else if (this.initialSelection !== undefined) {\n                this.node.selectedIndex = this.initialSelection;\n            }\n        }\n    }\n}\n//# sourceMappingURL=select.js.map","import { AurumElement } from './special/aurum_element';\nexport class Source extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'source');\n        if (props !== null) {\n            this.bindProps(['src', 'srcSet', 'media', 'sizes', 'type'], props);\n        }\n    }\n}\n//# sourceMappingURL=source.js.map","import { AurumElement } from './special/aurum_element';\nexport class Title extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'title');\n    }\n}\n//# sourceMappingURL=title.js.map","import { AurumElement } from './special/aurum_element';\nexport class Video extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'video');\n        if (props !== null) {\n            this.bindProps(['controls', 'autoplay', 'loop', 'muted', 'preload', 'src', 'poster', 'width', 'height'], props);\n        }\n    }\n}\n//# sourceMappingURL=video.js.map","import { AurumElement } from './special/aurum_element';\nexport class Tbody extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'tbody');\n    }\n}\n//# sourceMappingURL=tbody.js.map","import { AurumElement } from './special/aurum_element';\nexport class Tfoot extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'tfoot');\n    }\n}\n//# sourceMappingURL=tfoot.js.map","import { AurumElement } from './special/aurum_element';\nexport class Thead extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'thead');\n    }\n}\n//# sourceMappingURL=thead.js.map","import { AurumElement } from './special/aurum_element';\nexport class Summary extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'summary');\n    }\n}\n//# sourceMappingURL=summary.js.map","import { AurumElement } from './special/aurum_element';\nexport class Details extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'details');\n    }\n}\n//# sourceMappingURL=details.js.map","import { AurumElement } from './special/aurum_element';\nexport class Sub extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'sub');\n    }\n}\n//# sourceMappingURL=sub.js.map","import { AurumElement } from './special/aurum_element';\nexport class Sup extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'sup');\n    }\n}\n//# sourceMappingURL=sup.js.map","import { AurumElement } from './special/aurum_element';\nexport class Svg extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'svg');\n        if (props !== null) {\n            this.bindProps(['width', 'height'], props);\n        }\n    }\n}\n//# sourceMappingURL=svg.js.map","import { AurumElement } from './special/aurum_element';\nexport class Data extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'data');\n        if (props !== null) {\n            this.bindProps(['datalue'], props);\n        }\n    }\n}\n//# sourceMappingURL=data.js.map","import { AurumElement } from './special/aurum_element';\nexport class Time extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'time');\n        if (props !== null) {\n            this.bindProps(['datetime'], props);\n        }\n    }\n}\n//# sourceMappingURL=time.js.map","import { AurumElement, prerender, aurumElementModelIdentitiy } from '../nodes/special/aurum_element';\nimport { ownerSymbol } from './owner_symbol';\nimport { Div } from '../nodes/div';\nimport { Button } from '../nodes/button';\nimport { Input } from '../nodes/input';\nimport { Li } from '../nodes/li';\nimport { Span } from '../nodes/span';\nimport { Style } from '../nodes/style';\nimport { Audio } from '../nodes/audio';\nimport { Ul } from '../nodes/ul';\nimport { P } from '../nodes/p';\nimport { Img } from '../nodes/img';\nimport { Link } from '../nodes/link';\nimport { Canvas } from '../nodes/canvas';\nimport { A } from '../nodes/a';\nimport { Article } from '../nodes/article';\nimport { Br } from '../nodes/br';\nimport { Form } from '../nodes/form';\nimport { Label } from '../nodes/label';\nimport { Ol } from '../nodes/ol';\nimport { Pre } from '../nodes/pre';\nimport { Progress } from '../nodes/progress';\nimport { Table } from '../nodes/table';\nimport { Td } from '../nodes/td';\nimport { Tr } from '../nodes/tr';\nimport { Th } from '../nodes/th';\nimport { TextArea } from '../nodes/textarea';\nimport { H1 } from '../nodes/h1';\nimport { H2 } from '../nodes/h2';\nimport { H3 } from '../nodes/h3';\nimport { H4 } from '../nodes/h4';\nimport { H5 } from '../nodes/h5';\nimport { H6 } from '../nodes/h6';\nimport { Header } from '../nodes/header';\nimport { Footer } from '../nodes/footer';\nimport { Nav } from '../nodes/nav';\nimport { B } from '../nodes/b';\nimport { I } from '../nodes/i';\nimport { Script } from '../nodes/script';\nimport { Abbr } from '../nodes/abbr';\nimport { Area } from '../nodes/area';\nimport { Aside } from '../nodes/aside';\nimport { Em } from '../nodes/em';\nimport { Heading } from '../nodes/heading';\nimport { IFrame } from '../nodes/iframe';\nimport { NoScript } from '../nodes/noscript';\nimport { Q } from '../nodes/q';\nimport { Select } from '../nodes/select';\nimport { Source } from '../nodes/source';\nimport { Title } from '../nodes/title';\nimport { Video } from '../nodes/video';\nimport { Tbody } from '../nodes/tbody';\nimport { Tfoot } from '../nodes/tfoot';\nimport { Thead } from '../nodes/thead';\nimport { Summary } from '../nodes/summary';\nimport { Details } from '../nodes/details';\nimport { Sub } from '../nodes/sub';\nimport { Sup } from '../nodes/sup';\nimport { Svg } from '../nodes/svg';\nimport { Data } from '../nodes/data';\nimport { Time } from '../nodes/time';\nimport { Option } from '../nodes/option';\nimport { Template } from '../nodes/template';\nconst nodeMap = {\n    button: Button,\n    div: Div,\n    input: Input,\n    li: Li,\n    span: Span,\n    style: Style,\n    ul: Ul,\n    p: P,\n    img: Img,\n    link: Link,\n    canvas: Canvas,\n    a: A,\n    article: Article,\n    br: Br,\n    form: Form,\n    label: Label,\n    ol: Ol,\n    pre: Pre,\n    progress: Progress,\n    table: Table,\n    td: Td,\n    tr: Tr,\n    th: Th,\n    textarea: TextArea,\n    h1: H1,\n    h2: H2,\n    h3: H3,\n    h4: H4,\n    h5: H5,\n    h6: H6,\n    header: Header,\n    footer: Footer,\n    nav: Nav,\n    b: B,\n    i: I,\n    script: Script,\n    abbr: Abbr,\n    area: Area,\n    aside: Aside,\n    audio: Audio,\n    em: Em,\n    heading: Heading,\n    iframe: IFrame,\n    noscript: NoScript,\n    option: Option,\n    q: Q,\n    select: Select,\n    source: Source,\n    title: Title,\n    video: Video,\n    tbody: Tbody,\n    tfoot: Tfoot,\n    thead: Thead,\n    summary: Summary,\n    details: Details,\n    sub: Sub,\n    sup: Sup,\n    svg: Svg,\n    data: Data,\n    time: Time,\n    template: Template\n};\nexport class Aurum {\n    static attach(aurumElementModel, dom) {\n        const aurumElement = prerender(aurumElementModel);\n        if (dom[ownerSymbol]) {\n            throw new Error('This node is already managed by aurum and cannot be used');\n        }\n        if (aurumElement instanceof AurumElement) {\n            dom.appendChild(aurumElement.node);\n            aurumElement['handleAttach'](aurumElement);\n            dom[ownerSymbol] = aurumElement;\n        }\n        else {\n            throw new Error('Root node of aurum application must be a single dom node');\n        }\n    }\n    static isAttached(dom) {\n        return dom[ownerSymbol] !== undefined;\n    }\n    static detach(domNode) {\n        if (domNode[ownerSymbol]) {\n            domNode[ownerSymbol].node.remove();\n            domNode[ownerSymbol].handleDetach();\n            domNode[ownerSymbol] = undefined;\n        }\n    }\n    static factory(node, args, ...innerNodes) {\n        if (typeof node === 'string') {\n            const type = node;\n            node = nodeMap[node];\n            if (node === undefined) {\n                throw new Error(`Node ${type} does not exist or is not supported`);\n            }\n        }\n        if (Object.getPrototypeOf(node) === AurumElement) {\n            return {\n                [aurumElementModelIdentitiy]: true,\n                constructor: (args, innerNodes) => new node(args, innerNodes),\n                props: args,\n                innerNodes: innerNodes\n            };\n        }\n        else {\n            return {\n                [aurumElementModelIdentitiy]: true,\n                constructor: node,\n                props: args,\n                innerNodes: innerNodes\n            };\n        }\n    }\n}\n//# sourceMappingURL=aurum.js.map","import { AurumElement } from './special/aurum_element';\nexport class Option extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'option');\n    }\n}\n//# sourceMappingURL=option.js.map","import { AurumElement } from './special/aurum_element';\nexport class Template extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'template');\n    }\n}\n//# sourceMappingURL=template.js.map","export class LinkedListNode {\n    constructor(data) {\n        this.data = data;\n    }\n    deleteNext() {\n        if (this.next) {\n            const overNext = this.next.next;\n            this.next.next = undefined;\n            this.next.previous = undefined;\n            this.next = overNext;\n            if (this.next) {\n                this.next.previous = this;\n            }\n        }\n    }\n    deletePrevious() {\n        if (this.previous) {\n            const overPrevious = this.previous.previous;\n            this.previous.next = undefined;\n            this.previous.previous = undefined;\n            this.previous = overPrevious;\n            if (this.previous) {\n                this.previous.next = this;\n            }\n        }\n    }\n}\n//# sourceMappingURL=linked_list_node.js.map","import { LinkedListNode } from './linked_list_node';\nexport class LinkedList {\n    constructor(data = []) {\n        this.length = 0;\n        data.forEach((d) => this.append(d));\n    }\n    find(predicate) {\n        let ptr = this.rootNode;\n        while (ptr && !predicate(ptr)) {\n            ptr = ptr.next;\n        }\n        return ptr;\n    }\n    append(element) {\n        if (!this.rootNode && !this.lastNode) {\n            this.rootNode = this.lastNode = new LinkedListNode(element);\n        }\n        else {\n            this.lastNode.next = new LinkedListNode(element);\n            this.lastNode.next.previous = this.lastNode;\n            this.lastNode = this.lastNode.next;\n        }\n        this.length++;\n        return element;\n    }\n    forEach(cb) {\n        this.find((n) => {\n            cb(n.data);\n            return false;\n        });\n    }\n    remove(element) {\n        if (element === this.rootNode.data) {\n            if (this.rootNode === this.lastNode) {\n                this.rootNode = this.lastNode = undefined;\n            }\n            else {\n                this.rootNode = this.rootNode.next;\n            }\n            this.length--;\n        }\n        else {\n            const result = this.find((e) => e.next && e.next.data === element);\n            if (result) {\n                if (result.next === this.lastNode) {\n                    this.lastNode = result;\n                }\n                result.deleteNext();\n                this.length--;\n            }\n        }\n    }\n}\n//# sourceMappingURL=linked_list.js.map","import { LinkedList } from './linkedlist/linked_list';\nexport class CancellationToken {\n    constructor(...cancellables) {\n        this.cancelables = new LinkedList(cancellables);\n        this._isCancelled = false;\n    }\n    get isCanceled() {\n        return this._isCancelled;\n    }\n    addCancelable(delegate) {\n        this.throwIfCancelled('attempting to add cancellable to token that is already cancelled');\n        this.cancelables.append(delegate);\n        if (this.cancelables.length > 200) {\n            console.log('potential memory leak: cancellation token has over 200 clean up calls');\n        }\n        return this;\n    }\n    removeCancelable(delegate) {\n        this.throwIfCancelled('attempting to remove cancellable from token that is already cancelled');\n        this.cancelables.remove(delegate);\n        return this;\n    }\n    addDisposable(disposable) {\n        this.addCancelable(() => disposable.dispose());\n        return this;\n    }\n    callIfNotCancelled(action) {\n        if (!this.isCanceled) {\n            action();\n        }\n    }\n    setTimeout(cb, time = 0) {\n        const id = setTimeout(() => {\n            this.removeCancelable(cancelable);\n            cb();\n        }, time);\n        const cancelable = () => clearTimeout(id);\n        this.addCancelable(cancelable);\n    }\n    setInterval(cb, time) {\n        const id = setInterval(cb, time);\n        this.addCancelable(() => clearInterval(id));\n    }\n    requestAnimationFrame(cb) {\n        const id = requestAnimationFrame(() => {\n            this.removeCancelable(cancelable);\n            cb();\n        });\n        const cancelable = () => cancelAnimationFrame(id);\n        this.addCancelable(cancelable);\n    }\n    animationLoop(cb) {\n        let id = requestAnimationFrame(function f(time) {\n            cb(time);\n            id = requestAnimationFrame(f);\n        });\n        this.addCancelable(() => cancelAnimationFrame(id));\n    }\n    throwIfCancelled(msg) {\n        if (this.isCanceled) {\n            throw new Error(msg || 'cancellation token is cancelled');\n        }\n    }\n    chain(target, twoWays = false) {\n        if (twoWays) {\n            target.chain(this, false);\n        }\n        this.addCancelable(() => target.cancel());\n        return this;\n    }\n    registerDomEvent(eventEmitter, event, callback) {\n        eventEmitter.addEventListener(event, callback);\n        this.addCancelable(() => eventEmitter.removeEventListener(event, callback));\n        return this;\n    }\n    cancel() {\n        if (this.isCanceled) {\n            return;\n        }\n        this._isCancelled = true;\n        this.cancelables.forEach((c) => c());\n        this.cancelables = undefined;\n    }\n}\n//# sourceMappingURL=cancellation_token.js.map","import { AurumElement } from './aurum_element';\nexport class Custom extends AurumElement {\n    constructor(props, children) {\n        super(props, children, props.tag);\n        if (props.attributes) {\n            if (props !== null) {\n                this.bindProps(Object.keys(props.attributes), props.attributes);\n            }\n        }\n    }\n}\n//# sourceMappingURL=custom.js.map","import { DataSource } from '../../stream/data_source';\nimport { prerender } from './aurum_element';\nconst routeIdentity = Symbol('route');\nexport function AurumRouter(props, children) {\n    children = children.map(prerender);\n    if (children.some((c) => !c[routeIdentity])) {\n        throw new Error('Aurum Router only accepts Route and DefaultRoute instances as children');\n    }\n    if (children.filter((c) => c.default).length > 1) {\n        throw new Error('Too many default routes only 0 or 1 allowed');\n    }\n    const urlDataSource = new DataSource(getUrlPath());\n    window.addEventListener('hashchange', () => {\n        urlDataSource.update(getUrlPath());\n    });\n    return urlDataSource.unique().map((p) => selectRoute(p, children));\n}\nfunction getUrlPath() {\n    const hash = location.hash.substring(1);\n    if (hash.includes('?')) {\n        return hash.substring(0, hash.indexOf('?'));\n    }\n    else if (hash.includes('#')) {\n        return hash.substring(0, hash.indexOf('#'));\n    }\n    else {\n        return hash;\n    }\n}\nfunction selectRoute(url, routes) {\n    var _a, _b;\n    if (url === undefined || url === null) {\n        return (_a = routes.find((r) => r.default)) === null || _a === void 0 ? void 0 : _a.content;\n    }\n    else {\n        if (routes.find((r) => r.href === url)) {\n            return routes.find((r) => r.href === url).content;\n        }\n        else {\n            const segments = url.split('/');\n            segments.pop();\n            while (segments.length) {\n                const path = segments.join('/');\n                if (routes.find((r) => r.href === path)) {\n                    return routes.find((r) => r.href === path).content;\n                }\n                segments.pop();\n            }\n            return (_b = routes.find((r) => r.default)) === null || _b === void 0 ? void 0 : _b.content;\n        }\n    }\n}\nexport function Route(props, children) {\n    return {\n        [routeIdentity]: true,\n        content: children,\n        default: false,\n        href: props.href\n    };\n}\nexport function DefaultRoute(props, children) {\n    return {\n        [routeIdentity]: true,\n        content: children,\n        default: true,\n        href: undefined\n    };\n}\n//# sourceMappingURL=router.js.map","import { prerender } from './aurum_element';\nconst switchCaseIdentity = Symbol('switchCase');\nexport function Switch(props, children) {\n    children = children.map(prerender);\n    if (children.some((c) => !c[switchCaseIdentity])) {\n        throw new Error('Switch only accepts SwitchCase as children');\n    }\n    if (children.filter((c) => c.default).length > 1) {\n        throw new Error('Too many default switch cases only 0 or 1 allowed');\n    }\n    return props.state.unique().map((state) => selectCase(state, children));\n}\nfunction selectCase(state, children) {\n    var _a, _b, _c;\n    return _b = (_a = children.find((c) => c.value === state)) === null || _a === void 0 ? void 0 : _a.content, (_b !== null && _b !== void 0 ? _b : (_c = children.find((p) => p.default)) === null || _c === void 0 ? void 0 : _c.content);\n}\nexport function SwitchCase(props, children) {\n    return {\n        [switchCaseIdentity]: true,\n        content: children,\n        default: false,\n        value: props.when\n    };\n}\nexport function DefaultSwitchCase(props, children) {\n    return {\n        [switchCaseIdentity]: true,\n        content: children,\n        default: true,\n        value: undefined\n    };\n}\n//# sourceMappingURL=switch.js.map","import { DataSource } from '../../stream/data_source';\nimport { prerender } from './aurum_element';\nexport function Suspense(props, children) {\n    const data = new DataSource(props.fallback);\n    Promise.all(children.map(prerender)).then((res) => {\n        data.update(res);\n    });\n    return data;\n}\n//# sourceMappingURL=suspense.js.map"],"names":["EventEmitter","subscribeChannel","onAfterFire","prototypeAccessors","subscriptions","this","length","subscribe","callback","cancellationToken","createSubscription","hasSubscriptions","cancelAll","isFiring","push","afterFire","forEach","cb","fire","data","i","channel","that","subscription","facade","cancel","undefined","addCancelable","index","indexOf","splice","DataSource","initialValue","value","updateEvent","update","newValue","updating","Error","listenAndRepeat","listen","filter","filteredSource","max","oldValue","localeCompare","min","pipe","targetDataSource","v","map","mappedSource","tap","tapSource","await","unique","uniqueSource","diff","diffingSource","new","old","reduce","reducer","reduceSource","aggregate","otherSource","combinator","aggregatedSource","aggregateThree","second","third","aggregateFour","fourth","stringJoin","seperator","joinSource","toString","combine","otherSources","combinedDataSource","delay","time","delayedDataSource","debounce","timeout","debouncedDataSource","clearTimeout","setTimeout","throttle","throttledDataSource","cooldown","buffer","bufferedDataSource","accumulate","queueDataSource","ArrayDataSource","pick","key","subDataSource","_a","initialData","slice","lengthSource","items","newState","count","getData","get","set","item","swap","indexA","indexB","itemA","itemB","swapItems","appendArray","Array","let","n","unshift","ref","pop","merge","newData","removeRight","result","removeLeft","remove","clear","shift","toArray","sort","comparator","SortedArrayView","mapper","MappedArrayView","dependencies","view","FilteredArrayView","dep","refresh","callbackfn","change","parent","initial","operationDetailed","index2","ref$1","isArray","viewFilter","filteredItems","target","updateFilter","ObjectDataSource","updateEventOnKey","Map","listenOnKey","listenOnKeyAndRepeat","has","keys","Object","values","delete","assign","const","toObject","toDataSource","stream","s","DataFlow","ownerSymbol","Symbol","AurumTextElement","text","node","create","textContent","resolveStringSource","source","document","createTextNode","hasParent","parentElement","removeChild","DuplexDataSource","updateDownstreamEvent","updateUpstreamEvent","fromTwoDataSource","downStream","upstream","createOneWay","direction","DOWNSTREAM","oneWayFlow","updateDownstream","updateUpstream","listenUpstream","listenDownstream","downStreamFilter","upstreamFilter","newVal","reverseMapper","oneWaySource","aurumElementModelIdentitiy","defaultEvents","drag","dragstart","dragend","dragexit","dragover","dragenter","dragleave","blur","focus","click","dblclick","keydown","keyhit","keyup","mousedown","mouseup","mousemove","mouseenter","mouseleave","mousewheel","load","error","defaultProps","prerender","model","constructor","props","innerNodes","AurumElement","children","domNodeName","onAttach","needAttach","onDetach","initialize","_b","onCreate","call","addChildren","createEventHandlers","dataProps","e","includes","bindProps","class","handleClass","dynamicProps","assignStringSourceToAttribute","events","addEventListener","render","absoluteIndex","AurumFragment","renderFragment","renderChild","childNodes","fragment","j","child","addChildDom","childIndex","getChildIndex","swapChildrenDom","addDomNodeAt","setAttribute","removeAttribute","handleAttach","isConnected","_e","_c","_d","handleDetach","className","join","p","c","createElement","hasChild","appendChild","nodeA","nodeB","childElementCount","insertBefore","removeChildAt","swapChildren","clearChildren","addChild","childNodeToAurum","Promise","then","onChange","addChildAt","nodes","repeatModel","handleRepeat","renderable","sourceChild","wasArray","freshnessToken","ts","Date","now","handleSourceChild","dataSource","timestamp","textNode","concat","Div","Button","inputEvents","input","inputProps","Input","checked","Li","Span","Style","Audio","Ul","P","Img","Link","Canvas","A","Article","Br","Form","Label","Ol","Pre","Progress","Table","Td","Tr","Th","textAreaEvents","textAreaProps","TextArea","inputValueSource","H1","H2","H3","H4","H5","H6","Header","Footer","Nav","B","I","Script","Abbr","Area","Aside","Em","Heading","IFrame","NoScript","Q","selectEvents","Select","initialSelection","selectedIndexSource","selectedIndex","Source","Title","Video","Tbody","Tfoot","Thead","Summary","Details","Sub","Sup","Svg","Data","Time","nodeMap","button","div","li","span","style","ul","img","link","canvas","a","article","br","form","label","ol","pre","progress","table","td","tr","th","textarea","h1","h2","h3","h4","h5","h6","header","footer","nav","b","script","abbr","area","aside","audio","em","heading","iframe","noscript","option","q","select","title","video","tbody","tfoot","thead","summary","details","sub","sup","svg","template","Aurum","attach","aurumElementModel","dom","aurumElement","isAttached","detach","domNode","factory","args","type","getPrototypeOf","LinkedListNode","deleteNext","next","overNext","previous","deletePrevious","overPrevious","LinkedList","d","append","find","predicate","ptr","rootNode","element","lastNode","CancellationToken","cancelables","cancellables","_isCancelled","isCanceled","delegate","throwIfCancelled","console","log","removeCancelable","addDisposable","disposable","dispose","callIfNotCancelled","action","id","cancelable","setInterval","clearInterval","requestAnimationFrame","cancelAnimationFrame","animationLoop","f","msg","chain","twoWays","registerDomEvent","eventEmitter","event","removeEventListener","Custom","tag","attributes","routeIdentity","getUrlPath","hash","location","substring","switchCaseIdentity","some","default","urlDataSource","window","url","routes","r","content","href","segments","split","path","selectRoute","fallback","all","res","state","selectCase","when"],"mappings":"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"}