{"version":3,"file":"aurumjs.js","sources":["../dist/stream/event_emitter.js","../dist/stream/data_source.js","../dist/utilities/linkedlist/linked_list_node.js","../dist/utilities/linkedlist/linked_list.js","../dist/utilities/cancellation_token.js","../dist/utilities/owner_symbol.js","../dist/nodes/aurum_element.js","../dist/nodes/a.js","../dist/nodes/abbr.js","../dist/nodes/area.js","../dist/nodes/article.js","../dist/nodes/aside.js","../dist/nodes/audio.js","../dist/nodes/b.js","../dist/nodes/br.js","../dist/nodes/button.js","../dist/nodes/canvas.js","../dist/nodes/data.js","../dist/nodes/details.js","../dist/nodes/div.js","../dist/nodes/em.js","../dist/nodes/footer.js","../dist/nodes/form.js","../dist/nodes/h1.js","../dist/nodes/h2.js","../dist/nodes/h3.js","../dist/nodes/h4.js","../dist/nodes/h5.js","../dist/nodes/h6.js","../dist/nodes/header.js","../dist/nodes/heading.js","../dist/nodes/i.js","../dist/nodes/iframe.js","../dist/nodes/img.js","../dist/nodes/input.js","../dist/nodes/label.js","../dist/nodes/li.js","../dist/nodes/link.js","../dist/nodes/nav.js","../dist/nodes/noscript.js","../dist/nodes/ol.js","../dist/nodes/option.js","../dist/nodes/p.js","../dist/nodes/pre.js","../dist/nodes/progress.js","../dist/nodes/q.js","../dist/nodes/script.js","../dist/nodes/select.js","../dist/nodes/source.js","../dist/nodes/span.js","../dist/nodes/special/switch.js","../dist/nodes/special/router.js","../dist/nodes/special/suspense.js","../dist/nodes/style.js","../dist/nodes/sub.js","../dist/nodes/summary.js","../dist/nodes/sup.js","../dist/nodes/svg.js","../dist/nodes/table.js","../dist/nodes/tbody.js","../dist/nodes/td.js","../dist/nodes/textarea.js","../dist/nodes/tfoot.js","../dist/nodes/th.js","../dist/nodes/thead.js","../dist/nodes/time.js","../dist/nodes/title.js","../dist/nodes/tr.js","../dist/nodes/ul.js","../dist/nodes/video.js","../node_modules/q/q.js","../dist/utilities/aurum.js"],"sourcesContent":["export class EventEmitter {\n    constructor(config) {\n        this.subscribeChannel = [];\n        this.subscribeOnceChannel = [];\n        this.throttleCount = 0;\n        this.onAfterFire = [];\n        if (config) {\n            if (config.observable) {\n                this.makeObservable();\n            }\n            if (config.cancellationToken) {\n                config.cancellationToken.addCancelable(() => this.cancelAll());\n            }\n            if (config.throttled) {\n                this.throttle = config.throttled;\n            }\n        }\n    }\n    get subscriptions() {\n        return this.subscribeChannel.length;\n    }\n    get oneTimeSubscriptions() {\n        return this.subscribeOnceChannel.length;\n    }\n    linkEvent(eventToLink) {\n        if (!this.linkedEvents) {\n            this.linkedEvents = [];\n        }\n        this.linkedEvents.push(eventToLink);\n    }\n    unlinkEvent(eventToUnlink) {\n        if (!this.linkedEvents || !this.linkedEvents.includes(eventToUnlink)) {\n            throw new Error('Cannot unlink event that is not linked');\n        }\n        this.linkedEvents.splice(this.linkedEvents.indexOf(eventToUnlink), 1);\n    }\n    makeObservable() {\n        if (!this.onSubscribe) {\n            this.onSubscribe = new EventEmitter();\n            this.onSubscribeOnce = new EventEmitter();\n            this.onCancelAll = new EventEmitter();\n            this.onCancel = new EventEmitter();\n        }\n    }\n    swapSubscriptions(event) {\n        const sub = this.subscribeChannel;\n        const subOnce = this.subscribeOnceChannel;\n        this.subscribeChannel = event.subscribeChannel;\n        this.subscribeOnceChannel = event.subscribeOnceChannel;\n        event.subscribeChannel = sub;\n        event.subscribeOnceChannel = subOnce;\n    }\n    subscribe(callback, cancellationToken) {\n        if (this.onSubscribe) {\n            this.onSubscribe.fire();\n        }\n        const { facade } = this.createSubscription(callback, this.subscribeChannel, cancellationToken);\n        return facade;\n    }\n    hasSubscriptions() {\n        return this.subscriptions > 0 || this.oneTimeSubscriptions > 0;\n    }\n    subscribeOnce(cancellationToken) {\n        if (this.onSubscribeOnce) {\n            this.onSubscribeOnce.fire();\n        }\n        return new Promise((resolved) => {\n            this.createSubscription((data) => resolved(data), this.subscribeOnceChannel, cancellationToken);\n        });\n    }\n    cancelAll() {\n        if (this.onCancelAll !== undefined) {\n            this.onCancelAll.fire();\n        }\n    }\n    fire(data, data2, data3, data4, data5) {\n        if (this.throttle && this.throttleCount++ % this.throttle !== 0) {\n            return;\n        }\n        this.isFiring = true;\n        let length = this.subscribeChannel.length;\n        for (let i = 0; i < length; i++) {\n            this.subscribeChannel[i].callback(data);\n        }\n        length = this.subscribeOnceChannel.length;\n        if (this.subscribeOnceChannel.length > 0) {\n            for (let i = 0; i < length; i++) {\n                this.subscribeOnceChannel[i].callback(data);\n            }\n            this.subscribeOnceChannel.length = 0;\n        }\n        if (this.linkedEvents) {\n            for (let event of this.linkedEvents) {\n                event.fire(data, data2, data3, data4, data5);\n            }\n        }\n        this.isFiring = false;\n        if (this.onAfterFire.length > 0) {\n            this.onAfterFire.forEach((cb) => cb());\n            this.onAfterFire.length = 0;\n        }\n    }\n    createSubscription(callback, channel, cancellationToken) {\n        const that = this;\n        const subscription = {\n            callback\n        };\n        const facade = {\n            cancel() {\n                that.cancel(subscription, channel);\n            }\n        };\n        if (cancellationToken !== undefined) {\n            cancellationToken.addCancelable(() => that.cancel(subscription, channel));\n        }\n        channel.push(subscription);\n        return { subscription, facade };\n    }\n    cancel(subscription, channel) {\n        let index = channel.indexOf(subscription);\n        if (index >= 0) {\n            if (!this.isFiring) {\n                channel.splice(index, 1);\n            }\n            else {\n                this.onAfterFire.push(() => this.cancel(subscription, channel));\n            }\n        }\n    }\n}\n//# sourceMappingURL=event_emitter.js.map","import { EventEmitter } from './event_emitter';\nexport class DataSource {\n    constructor(initialValue) {\n        this.value = initialValue;\n        this.listeners = [];\n    }\n    update(newValue) {\n        this.value = newValue;\n        for (const l of this.listeners) {\n            l(newValue);\n        }\n    }\n    listen(callback, cancellationToken) {\n        var _a;\n        this.listeners.push(callback);\n        const cancel = () => {\n            const index = this.listeners.indexOf(callback);\n            if (index !== -1) {\n                this.listeners.splice(index, 1);\n            }\n        };\n        (_a = cancellationToken) === null || _a === void 0 ? void 0 : _a.addCancelable(() => {\n            cancel();\n        });\n        return cancel;\n    }\n    filter(callback, cancellationToken) {\n        const filteredSource = new DataSource();\n        this.listen((value) => {\n            if (callback(value)) {\n                filteredSource.update(value);\n            }\n        }, cancellationToken);\n        return filteredSource;\n    }\n    pipe(targetDataSource, cancellationToken) {\n        this.listen((v) => targetDataSource.update(v), cancellationToken);\n    }\n    map(callback, cancellationToken) {\n        const mappedSource = new DataSource(callback(this.value));\n        this.listen((value) => {\n            mappedSource.update(callback(value));\n        }, cancellationToken);\n        return mappedSource;\n    }\n    unique(cancellationToken) {\n        const uniqueSource = new DataSource(this.value);\n        this.listen((value) => {\n            if (value !== uniqueSource.value) {\n                uniqueSource.update(value);\n            }\n        }, cancellationToken);\n        return uniqueSource;\n    }\n    reduce(reducer, initialValue, cancellationToken) {\n        const reduceSource = new DataSource(initialValue);\n        this.listen((v) => reduceSource.update(reducer(reduceSource.value, v)), cancellationToken);\n        return reduceSource;\n    }\n    aggregate(otherSource, combinator, cancellationToken) {\n        const aggregatedSource = new DataSource(combinator(this.value, otherSource.value));\n        this.listen(() => aggregatedSource.update(combinator(this.value, otherSource.value)), cancellationToken);\n        otherSource.listen(() => aggregatedSource.update(combinator(this.value, otherSource.value)), cancellationToken);\n        return aggregatedSource;\n    }\n    combine(otherSource, cancellationToken) {\n        const combinedDataSource = new DataSource();\n        this.pipe(combinedDataSource, cancellationToken);\n        otherSource.pipe(combinedDataSource, cancellationToken);\n        return combinedDataSource;\n    }\n    debounce(time, cancellationToken) {\n        const debouncedDataSource = new DataSource();\n        let timeout;\n        this.listen((v) => {\n            clearTimeout(timeout);\n            setTimeout(() => {\n                debouncedDataSource.update(v);\n            }, time);\n        }, cancellationToken);\n        return debouncedDataSource;\n    }\n    buffer(time, cancellationToken) {\n        const bufferedDataSource = new DataSource();\n        let timeout;\n        let buffer = [];\n        this.listen((v) => {\n            buffer.push(v);\n            if (!timeout) {\n                setTimeout(() => {\n                    timeout = undefined;\n                    bufferedDataSource.update(buffer);\n                    buffer = [];\n                }, time);\n            }\n        }, cancellationToken);\n        return bufferedDataSource;\n    }\n    queue(time, cancellationToken) {\n        const queueDataSource = new ArrayDataSource();\n        this.listen((v) => {\n            queueDataSource.push(v);\n        }, cancellationToken);\n        return queueDataSource;\n    }\n    pick(key, cancellationToken) {\n        var _a;\n        const subDataSource = new DataSource((_a = this.value) === null || _a === void 0 ? void 0 : _a[key]);\n        this.listen((v) => {\n            if (v !== undefined && v !== null) {\n                subDataSource.update(v[key]);\n            }\n            else {\n                subDataSource.update(v);\n            }\n        }, cancellationToken);\n        return subDataSource;\n    }\n    cancelAll() {\n        this.listeners.length = 0;\n    }\n}\nexport class ArrayDataSource {\n    constructor(initialData) {\n        if (initialData) {\n            this.data = initialData.slice();\n        }\n        else {\n            this.data = [];\n        }\n        this.onChange = new EventEmitter();\n    }\n    get length() {\n        return this.data.length;\n    }\n    getData() {\n        return this.data.slice();\n    }\n    get(index) {\n        return this.data[index];\n    }\n    set(index, item) {\n        const old = this.data[index];\n        if (old === item) {\n            return;\n        }\n        this.data[index] = item;\n        this.onChange.fire({ operation: 'replace', target: old, count: 1, index, items: [item], newState: this.data });\n    }\n    swap(indexA, indexB) {\n        if (indexA === indexB) {\n            return;\n        }\n        const itemA = this.data[indexA];\n        const itemB = this.data[indexB];\n        this.data[indexB] = itemA;\n        this.data[indexA] = itemB;\n        this.onChange.fire({ operation: 'swap', index: indexA, index2: indexB, items: [itemA, itemB], newState: this.data });\n    }\n    swapItems(itemA, itemB) {\n        if (itemA === itemB) {\n            return;\n        }\n        const indexA = this.data.indexOf(itemA);\n        const indexB = this.data.indexOf(itemB);\n        if (indexA !== -1 && indexB !== -1) {\n            this.data[indexB] = itemA;\n            this.data[indexA] = itemB;\n        }\n        this.onChange.fire({ operation: 'swap', index: indexA, index2: indexB, items: [itemA, itemB], newState: this.data });\n    }\n    push(...items) {\n        this.data.push(...items);\n        this.onChange.fire({\n            operation: 'append',\n            count: items.length,\n            index: this.data.length - items.length,\n            items,\n            newState: this.data\n        });\n    }\n    unshift(...items) {\n        this.data.unshift(...items);\n        this.onChange.fire({ operation: 'prepend', count: items.length, items, index: 0, newState: this.data });\n    }\n    pop() {\n        const item = this.data.pop();\n        this.onChange.fire({\n            operation: 'remove',\n            count: 1,\n            index: this.data.length,\n            items: [item],\n            newState: this.data\n        });\n        return item;\n    }\n    merge(newData) {\n        for (let i = 0; i < newData.length; i++) {\n            if (this.data[i] !== newData[i]) {\n                if (this.length > i) {\n                    this.set(i, newData[i]);\n                }\n                else {\n                    this.push(newData[i]);\n                }\n            }\n        }\n        if (this.length > newData.length) {\n            this.removeRight(this.length - newData.length);\n        }\n    }\n    removeRight(count) {\n        const result = this.data.splice(this.length - count, count);\n        this.onChange.fire({ operation: 'remove', count, index: this.length - count, items: result, newState: this.data });\n    }\n    removeLeft(count) {\n        const result = this.data.splice(0, count);\n        this.onChange.fire({ operation: 'remove', count, index: 0, items: result, newState: this.data });\n    }\n    remove(item) {\n        const index = this.data.indexOf(item);\n        if (index !== -1) {\n            this.data.splice(index, 1);\n            this.onChange.fire({ operation: 'remove', count: 1, index, items: [item], newState: this.data });\n        }\n    }\n    clear() {\n        const items = this.data;\n        this.data = [];\n        this.onChange.fire({\n            operation: 'remove',\n            count: items.length,\n            index: 0,\n            items,\n            newState: this.data\n        });\n    }\n    shift() {\n        const item = this.data.shift();\n        this.onChange.fire({ operation: 'remove', items: [item], count: 1, index: 0, newState: this.data });\n        return item;\n    }\n    toArray() {\n        return this.data.slice();\n    }\n    filter(callback, cancellationToken) {\n        return new FilteredArrayView(this, callback, cancellationToken);\n    }\n    forEach(callbackfn, thisArg) {\n        return this.data.forEach(callbackfn, thisArg);\n    }\n    toDataSource() {\n        const stream = new DataSource(this.data);\n        this.onChange.subscribe((s) => {\n            stream.update(s.newState);\n        });\n        return stream;\n    }\n}\nexport class FilteredArrayView extends ArrayDataSource {\n    constructor(parent, filter, cancellationToken) {\n        const initial = parent.data.filter(filter);\n        super(initial);\n        this.parent = parent;\n        this.viewFilter = filter;\n        parent.onChange.subscribe((change) => {\n            let filteredItems;\n            switch (change.operation) {\n                case 'remove':\n                    for (const item of change.items) {\n                        this.remove(item);\n                    }\n                    break;\n                case 'prepend':\n                    filteredItems = change.items.filter(this.viewFilter);\n                    this.unshift(...filteredItems);\n                    break;\n                case 'append':\n                    filteredItems = change.items.filter(this.viewFilter);\n                    this.push(...filteredItems);\n                    break;\n                case 'swap':\n                    const indexA = this.data.indexOf(change.items[0]);\n                    const indexB = this.data.indexOf(change.items[1]);\n                    if (indexA !== -1 && indexB !== -1) {\n                        this.swap(indexA, indexB);\n                    }\n                    break;\n                case 'replace':\n                    const index = this.data.indexOf(change.target);\n                    if (index !== -1) {\n                        const acceptNew = this.viewFilter(change.items[0]);\n                        if (acceptNew) {\n                            this.set(index, change.items[0]);\n                        }\n                        else {\n                            this.remove(change.target);\n                        }\n                    }\n                    break;\n            }\n        }, cancellationToken);\n    }\n    updateFilter(filter) {\n        if (this.viewFilter === filter) {\n            return;\n        }\n        this.viewFilter = filter;\n        this.refresh();\n    }\n    refresh() {\n        this.clear();\n        const data = this.parent.data.filter(this.viewFilter);\n        this.push(...data);\n    }\n}\n//# sourceMappingURL=data_source.js.map","export class LinkedListNode {\n    constructor(data) {\n        this.data = data;\n    }\n    deleteNext() {\n        if (this.next) {\n            const overNext = this.next.next;\n            this.next.next = undefined;\n            this.next.previous = undefined;\n            this.next = overNext;\n            this.next.previous = this;\n        }\n    }\n    deletePrevious() {\n        if (this.previous) {\n            this.previous = this.previous.previous;\n            this.previous.next = undefined;\n            this.previous.previous = undefined;\n        }\n    }\n}\n//# sourceMappingURL=linked_list_node.js.map","import { LinkedListNode } from './linked_list_node';\nexport class LinkedList {\n    constructor(data = []) {\n        this.length = 0;\n        data.forEach((d) => this.append(d));\n    }\n    find(predicate) {\n        let ptr = this.rootNode;\n        while (ptr && !predicate(ptr)) {\n            ptr = ptr.next;\n        }\n        return ptr;\n    }\n    append(element) {\n        if (!this.rootNode && !this.lastNode) {\n            this.rootNode = this.lastNode = new LinkedListNode(element);\n        }\n        else {\n            this.lastNode.next = new LinkedListNode(element);\n            this.lastNode.next.previous = this.lastNode;\n            this.lastNode = this.lastNode.next;\n        }\n        this.length++;\n        return element;\n    }\n    forEach(cb) {\n        this.find((n) => {\n            cb(n.data);\n            return false;\n        });\n    }\n    prepend(element) {\n        if (!this.rootNode && !this.lastNode) {\n            this.rootNode = this.lastNode = new LinkedListNode(element);\n        }\n        else {\n            this.rootNode.previous = new LinkedListNode(element);\n            this.rootNode.previous.next = this.rootNode;\n            this.rootNode = this.rootNode.previous;\n        }\n        this.length++;\n        return element;\n    }\n    remove(element) {\n        if (element === this.rootNode.data) {\n            this.rootNode = this.rootNode.next;\n            this.length--;\n        }\n        else {\n            const result = this.find((e) => e.next && e.next.data === element);\n            if (result) {\n                if (result.next === this.lastNode) {\n                    this.lastNode = result;\n                }\n                result.deleteNext();\n                this.length--;\n            }\n        }\n    }\n}\n//# sourceMappingURL=linked_list.js.map","import { LinkedList } from './linkedlist/linked_list';\nexport class CancellationToken {\n    constructor(...cancellables) {\n        this.cancelables = new LinkedList(cancellables);\n        this._isCancelled = false;\n    }\n    get isCanceled() {\n        return this._isCancelled;\n    }\n    addCancelable(delegate) {\n        this.throwIfCancelled('attempting to add cancellable to token that is already cancelled');\n        this.cancelables.append(delegate);\n        if (this.cancelables.length > 200) {\n            console.log('potential memory leak: cancellation token has over 200 clean up calls');\n        }\n        return this;\n    }\n    removeCancelable(delegate) {\n        this.throwIfCancelled('attempting to remove cancellable from token that is already cancelled');\n        this.cancelables.remove(delegate);\n        return this;\n    }\n    addDisposable(disposable) {\n        this.addCancelable(() => disposable.dispose());\n        return this;\n    }\n    callIfNotCancelled(action) {\n        if (!this.isCanceled) {\n            action();\n        }\n    }\n    setTimeout(cb, time = 0) {\n        const id = setTimeout(cb, time);\n        this.addCancelable(() => clearTimeout(id));\n    }\n    setInterval(cb, time) {\n        const id = setInterval(cb, time);\n        this.addCancelable(() => clearInterval(id));\n    }\n    requestAnimationFrame(cb) {\n        const id = requestAnimationFrame(cb);\n        this.addCancelable(() => cancelAnimationFrame(id));\n    }\n    animationLoop(cb) {\n        let id = requestAnimationFrame(function f(time) {\n            cb(time);\n            id = requestAnimationFrame(f);\n        });\n        this.addCancelable(() => cancelAnimationFrame(id));\n    }\n    throwIfCancelled(msg) {\n        if (this.isCanceled) {\n            throw new Error(msg || 'cancellation token is cancelled');\n        }\n    }\n    chain(target, twoWays = false) {\n        if (twoWays) {\n            target.chain(this, false);\n        }\n        this.addCancelable(() => target.cancel());\n        return this;\n    }\n    registerDomEvent(eventEmitter, event, callback) {\n        eventEmitter.addEventListener(event, callback);\n        this.addCancelable(() => eventEmitter.removeEventListener(event, callback));\n        return this;\n    }\n    cancel() {\n        if (this.isCanceled) {\n            return;\n        }\n        this._isCancelled = true;\n        this.cancelables.forEach((c) => c());\n        this.cancelables = undefined;\n    }\n}\n//# sourceMappingURL=cancellation_token.js.map","export const ownerSymbol = Symbol('owner');\n//# sourceMappingURL=owner_symbol.js.map","import { DataSource, ArrayDataSource } from '../stream/data_source';\nimport { CancellationToken } from '../utilities/cancellation_token';\nimport { ownerSymbol } from '../utilities/owner_symbol';\nexport class AurumElement {\n    constructor(props, domNodeName) {\n        var _a, _b;\n        this.onDispose = props.onDispose;\n        this.onAttach = props.onAttach;\n        this.onDetach = props.onDetach;\n        this.domNodeName = domNodeName;\n        this.template = props.template;\n        this.cancellationToken = new CancellationToken();\n        this.node = this.create(props);\n        this.initialize(props);\n        (_b = (_a = props).onCreate) === null || _b === void 0 ? void 0 : _b.call(_a, this);\n    }\n    initialize(props) {\n        if (!(this.node instanceof Text)) {\n            this.children = [];\n        }\n        this.createEventHandlers([\n            'drag',\n            'name',\n            'dragstart',\n            'dragend',\n            'dragexit',\n            'dragover',\n            'dragenter',\n            'dragleave',\n            'blur',\n            'focus',\n            'click',\n            'dblclick',\n            'keydown',\n            'keyhit',\n            'keyup',\n            'mousedown',\n            'mouseup',\n            'mouseenter',\n            'mouseleave',\n            'mousewheel'\n        ], props);\n        const dataProps = Object.keys(props).filter((e) => e.startsWith('x-') || e.startsWith('data-'));\n        this.bindProps(['id', 'draggable', 'tabindex', 'style', 'role', 'contentEditable', ...dataProps], props);\n        if (props.class) {\n            this.handleClass(props.class);\n        }\n        if (props.repeatModel) {\n            this.handleRepeat(props.repeatModel);\n        }\n    }\n    bindProps(keys, props) {\n        for (const key of keys) {\n            if (props[key]) {\n                this.assignStringSourceToAttribute(props[key], key);\n            }\n        }\n    }\n    createEventHandlers(keys, props) {\n        if (this.node instanceof Text) {\n            return;\n        }\n        for (const key of keys) {\n            const computedEventName = 'on' + key[0].toUpperCase() + key.slice(1);\n            let eventEmitter;\n            Object.defineProperty(this, computedEventName, {\n                get() {\n                    if (!eventEmitter) {\n                        eventEmitter = new DataSource();\n                    }\n                    return eventEmitter;\n                },\n                set() {\n                    throw new Error(computedEventName + ' is read only');\n                }\n            });\n            if (props[computedEventName]) {\n                if (props[computedEventName] instanceof DataSource) {\n                    this[computedEventName].listen(props[computedEventName].update.bind(props.onClick), this.cancellationToken);\n                }\n                else if (typeof props[computedEventName] === 'function') {\n                    this[computedEventName].listen(props[computedEventName], this.cancellationToken);\n                }\n            }\n            this.cancellationToken.registerDomEvent(this.node, key, (e) => this[computedEventName].update(e));\n        }\n    }\n    handleRepeat(dataSource) {\n        if (dataSource instanceof ArrayDataSource) {\n            this.repeatData = dataSource;\n        }\n        else {\n            this.repeatData = new ArrayDataSource(dataSource);\n        }\n        if (this.repeatData.length) {\n            this.children.push(...this.repeatData.toArray().map((i) => this.template.generate(i)));\n            this.render();\n        }\n        this.repeatData.onChange.subscribe((change) => {\n            switch (change.operation) {\n                case 'swap':\n                    const itemA = this.children[change.index];\n                    const itemB = this.children[change.index2];\n                    this.children[change.index2] = itemA;\n                    this.children[change.index] = itemB;\n                    break;\n                case 'append':\n                    this.children.push(...change.items.map((i) => this.template.generate(i)));\n                    break;\n                case 'prepend':\n                    this.children.unshift(...change.items.map((i) => this.template.generate(i)));\n                    break;\n                case 'remove':\n                    this.children.splice(change.index, change.count);\n                    break;\n                default:\n                    this.children.length = 0;\n                    this.children.push(...this.repeatData.toArray().map((i) => this.template.generate(i)));\n                    break;\n            }\n            this.render();\n        });\n    }\n    render() {\n        if (this.rerenderPending) {\n            return;\n        }\n        if (this.node instanceof Text) {\n            return;\n        }\n        setTimeout(() => {\n            for (let i = 0; i < this.children.length; i++) {\n                if (this.node.childNodes.length <= i) {\n                    this.addChildrenDom(this.children.slice(i, this.children.length));\n                    break;\n                }\n                if (this.node.childNodes[i][ownerSymbol] !== this.children[i]) {\n                    if (!this.children.includes(this.node.childNodes[i][ownerSymbol])) {\n                        const child = this.node.childNodes[i];\n                        child.remove();\n                        child[ownerSymbol].handleDetach();\n                        i--;\n                        continue;\n                    }\n                    const index = this.getChildIndex(this.children[i].node);\n                    if (index !== -1) {\n                        this.swapChildrenDom(i, index);\n                    }\n                    else {\n                        this.addDomNodeAt(this.children[i].node, i);\n                    }\n                }\n            }\n            while (this.node.childNodes.length > this.children.length) {\n                const child = this.node.childNodes[this.node.childNodes.length - 1];\n                this.node.removeChild(child);\n                child[ownerSymbol].handleDetach();\n            }\n            this.rerenderPending = false;\n        });\n        this.rerenderPending = true;\n    }\n    assignStringSourceToAttribute(data, key) {\n        if (this.node instanceof Text) {\n            return;\n        }\n        if (typeof data === 'string') {\n            this.node.setAttribute(key, data);\n        }\n        else {\n            if (data.value) {\n                this.node.setAttribute(key, data.value);\n            }\n            data.unique(this.cancellationToken).listen((v) => this.node.setAttribute(key, v), this.cancellationToken);\n        }\n    }\n    handleAttach() {\n        var _a, _b;\n        if (this.node.isConnected) {\n            (_b = (_a = this).onAttach) === null || _b === void 0 ? void 0 : _b.call(_a, this);\n            for (const child of this.node.childNodes) {\n                child[ownerSymbol].handleAttach();\n            }\n        }\n    }\n    handleDetach() {\n        var _a, _b;\n        if (!this.node.isConnected) {\n            (_b = (_a = this).onDetach) === null || _b === void 0 ? void 0 : _b.call(_a, this);\n            for (const child of this.node.childNodes) {\n                if (child[ownerSymbol]) {\n                    child[ownerSymbol].handleDetach();\n                }\n            }\n        }\n    }\n    handleClass(data) {\n        if (this.node instanceof Text) {\n            return;\n        }\n        if (typeof data === 'string') {\n            this.node.className = data;\n        }\n        else if (data instanceof DataSource) {\n            if (data.value) {\n                if (Array.isArray(data.value)) {\n                    this.node.className = data.value.join(' ');\n                    data.unique(this.cancellationToken).listen(() => {\n                        this.node.className = data.value.join(' ');\n                    }, this.cancellationToken);\n                }\n                else {\n                    this.node.className = data.value;\n                    data.unique(this.cancellationToken).listen(() => {\n                        this.node.className = data.value;\n                    }, this.cancellationToken);\n                }\n            }\n            data.unique(this.cancellationToken).listen((v) => (this.node.className = v), this.cancellationToken);\n        }\n        else {\n            const value = data.reduce((p, c) => {\n                if (typeof c === 'string') {\n                    return `${p} ${c}`;\n                }\n                else {\n                    if (c.value) {\n                        return `${p} ${c.value}`;\n                    }\n                    else {\n                        return p;\n                    }\n                }\n            }, '');\n            this.node.className = value;\n            for (const i of data) {\n                if (i instanceof DataSource) {\n                    i.unique(this.cancellationToken).listen((v) => {\n                        const value = data.reduce((p, c) => {\n                            if (typeof c === 'string') {\n                                return `${p} ${c}`;\n                            }\n                            else {\n                                if (c.value) {\n                                    return `${p} ${c.value}`;\n                                }\n                                else {\n                                    return p;\n                                }\n                            }\n                        }, '');\n                        this.node.className = value;\n                    }, this.cancellationToken);\n                }\n            }\n        }\n    }\n    resolveStringSource(source) {\n        if (typeof source === 'string') {\n            return source;\n        }\n        else {\n            return source.value;\n        }\n    }\n    create(props) {\n        const node = document.createElement(this.domNodeName);\n        node[ownerSymbol] = this;\n        return node;\n    }\n    getChildIndex(node) {\n        let i = 0;\n        for (const child of node.childNodes) {\n            if (child === node) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n    hasChild(node) {\n        if (this.node instanceof Text) {\n            throw new Error(\"Text nodes don't have children\");\n        }\n        for (const child of node.children) {\n            if (child === node) {\n                return true;\n            }\n        }\n        return false;\n    }\n    addChildrenDom(children) {\n        if (this.node instanceof Text) {\n            throw new Error(\"Text nodes don't have children\");\n        }\n        for (const child of children) {\n            this.node.appendChild(child.node);\n            child.handleAttach();\n        }\n    }\n    swapChildrenDom(indexA, indexB) {\n        if (this.node instanceof Text) {\n            throw new Error(\"Text nodes don't have children\");\n        }\n        if (indexA === indexB) {\n            return;\n        }\n        const nodeA = this.node.children[indexA];\n        const nodeB = this.node.children[indexB];\n        nodeA.remove();\n        nodeB.remove();\n        if (indexA < indexB) {\n            this.addDomNodeAt(nodeB, indexA);\n            this.addDomNodeAt(nodeA, indexB);\n        }\n        else {\n            this.addDomNodeAt(nodeA, indexB);\n            this.addDomNodeAt(nodeB, indexA);\n        }\n    }\n    addDomNodeAt(node, index) {\n        if (this.node instanceof Text) {\n            throw new Error(\"Text nodes don't have children\");\n        }\n        if (index >= this.node.childElementCount) {\n            this.node.appendChild(node);\n            node[ownerSymbol].handleAttach();\n        }\n        else {\n            this.node.insertBefore(node, this.node.children[index]);\n            node[ownerSymbol].handleAttach();\n        }\n    }\n    remove() {\n        if (this.hasParent()) {\n            this.node.parentElement[ownerSymbol].removeChild(this.node);\n        }\n    }\n    hasParent() {\n        return !!this.node.parentElement;\n    }\n    isConnected() {\n        return this.node.isConnected;\n    }\n    removeChild(child) {\n        const index = this.children.indexOf(child);\n        if (index !== -1) {\n            this.children.splice(index, 1);\n        }\n        this.render();\n    }\n    removeChildAt(index) {\n        this.children.splice(index, 1);\n        this.render();\n    }\n    swapChildren(indexA, indexB) {\n        if (indexA === indexB) {\n            return;\n        }\n        const nodeA = this.children[indexA];\n        const nodeB = this.children[indexB];\n        this.children[indexA] = nodeB;\n        this.children[indexB] = nodeA;\n        this.render();\n    }\n    clearChildren() {\n        if (this.node instanceof Text) {\n            throw new Error(\"Text nodes don't have children\");\n        }\n        this.children.length = 0;\n        this.render();\n    }\n    addChild(child) {\n        if (this.node instanceof Text) {\n            throw new Error(\"Text nodes don't have children\");\n        }\n        if (child instanceof Template) {\n            return;\n        }\n        child = this.childNodeToAurum(child);\n        this.children.push(child);\n        this.render();\n    }\n    childNodeToAurum(child) {\n        if (typeof child === 'string' || child instanceof DataSource) {\n            child = new TextNode({\n                text: child\n            });\n        }\n        else if (!(child instanceof AurumElement)) {\n            child = new TextNode({\n                text: child.toString()\n            });\n        }\n        return child;\n    }\n    addChildAt(child, index) {\n        if (this.node instanceof Text) {\n            throw new Error(\"Text nodes don't have children\");\n        }\n        if (child instanceof Template) {\n            return;\n        }\n        child = this.childNodeToAurum(child);\n        this.children.splice(index, 0, child);\n        this.render();\n    }\n    addChildren(nodes) {\n        if (this.node instanceof Text) {\n            throw new Error(\"Text nodes don't have children\");\n        }\n        if (nodes.length === 0) {\n            return;\n        }\n        for (const child of nodes) {\n            this.addChild(child);\n        }\n    }\n    dispose() {\n        this.internalDispose(true);\n    }\n    internalDispose(detach) {\n        var _a, _b;\n        this.cancellationToken.cancel();\n        if (detach) {\n            this.remove();\n        }\n        for (const child of this.node.childNodes) {\n            if (child[ownerSymbol]) {\n                child[ownerSymbol].internalDispose(false);\n            }\n        }\n        (_b = (_a = this).onDispose) === null || _b === void 0 ? void 0 : _b.call(_a, this);\n    }\n}\nexport class Template extends AurumElement {\n    constructor(props) {\n        super(props, 'template');\n        this.ref = props.ref;\n        this.generate = props.generator;\n    }\n}\nexport class TextNode extends AurumElement {\n    constructor(props) {\n        super(props, 'textNode');\n        if (props.text instanceof DataSource) {\n            props.text.listen((v) => (this.node.textContent = v), this.cancellationToken);\n        }\n    }\n    create(props) {\n        const node = document.createTextNode(this.resolveStringSource(props.text));\n        node[ownerSymbol] = this;\n        return node;\n    }\n}\n//# sourceMappingURL=aurum_element.js.map","import { AurumElement } from './aurum_element';\nexport class A extends AurumElement {\n    constructor(props) {\n        super(props, 'a');\n        this.bindProps(['href', 'target'], props);\n    }\n}\n//# sourceMappingURL=a.js.map","import { AurumElement } from './aurum_element';\nexport class Abbr extends AurumElement {\n    constructor(props) {\n        super(props, 'abbr');\n    }\n}\n//# sourceMappingURL=abbr.js.map","import { AurumElement } from './aurum_element';\nexport class Area extends AurumElement {\n    constructor(props) {\n        super(props, 'area');\n    }\n}\n//# sourceMappingURL=area.js.map","import { AurumElement } from './aurum_element';\nexport class Article extends AurumElement {\n    constructor(props) {\n        super(props, 'article');\n    }\n}\n//# sourceMappingURL=article.js.map","import { AurumElement } from './aurum_element';\nexport class Aside extends AurumElement {\n    constructor(props) {\n        super(props, 'aside');\n    }\n}\n//# sourceMappingURL=aside.js.map","import { AurumElement } from './aurum_element';\nexport class Audio extends AurumElement {\n    constructor(props) {\n        super(props, 'audio');\n        this.bindProps(['controls', 'autoplay', 'loop', 'muted', 'preload', 'src'], props);\n    }\n}\n//# sourceMappingURL=audio.js.map","import { AurumElement } from './aurum_element';\nexport class B extends AurumElement {\n    constructor(props) {\n        super(props, 'b');\n    }\n}\n//# sourceMappingURL=b.js.map","import { AurumElement } from './aurum_element';\nexport class Br extends AurumElement {\n    constructor(props) {\n        super(props, 'br');\n    }\n}\n//# sourceMappingURL=br.js.map","import { AurumElement } from './aurum_element';\nexport class Button extends AurumElement {\n    constructor(props) {\n        super(props, 'button');\n        this.bindProps(['disabled'], props);\n    }\n}\n//# sourceMappingURL=button.js.map","import { AurumElement } from './aurum_element';\nexport class Canvas extends AurumElement {\n    constructor(props) {\n        super(props, 'canvas');\n        this.bindProps(['width', 'height'], props);\n    }\n}\n//# sourceMappingURL=canvas.js.map","import { AurumElement } from './aurum_element';\nexport class Data extends AurumElement {\n    constructor(props) {\n        super(props, 'data');\n        this.bindProps(['datalue'], props);\n    }\n}\n//# sourceMappingURL=data.js.map","import { AurumElement } from './aurum_element';\nexport class Details extends AurumElement {\n    constructor(props) {\n        super(props, 'details');\n    }\n}\n//# sourceMappingURL=details.js.map","import { AurumElement } from './aurum_element';\nexport class Div extends AurumElement {\n    constructor(props) {\n        super(props, 'div');\n    }\n}\n//# sourceMappingURL=div.js.map","import { AurumElement } from './aurum_element';\nexport class Em extends AurumElement {\n    constructor(props) {\n        super(props, 'em');\n    }\n}\n//# sourceMappingURL=em.js.map","import { AurumElement } from './aurum_element';\nexport class Footer extends AurumElement {\n    constructor(props) {\n        super(props, 'footer');\n    }\n}\n//# sourceMappingURL=footer.js.map","import { AurumElement } from './aurum_element';\nexport class Form extends AurumElement {\n    constructor(props) {\n        super(props, 'form');\n    }\n}\n//# sourceMappingURL=form.js.map","import { AurumElement } from './aurum_element';\nexport class H1 extends AurumElement {\n    constructor(props) {\n        super(props, 'h1');\n    }\n}\n//# sourceMappingURL=h1.js.map","import { AurumElement } from './aurum_element';\nexport class H2 extends AurumElement {\n    constructor(props) {\n        super(props, 'h2');\n    }\n}\n//# sourceMappingURL=h2.js.map","import { AurumElement } from './aurum_element';\nexport class H3 extends AurumElement {\n    constructor(props) {\n        super(props, 'h3');\n    }\n}\n//# sourceMappingURL=h3.js.map","import { AurumElement } from './aurum_element';\nexport class H4 extends AurumElement {\n    constructor(props) {\n        super(props, 'h4');\n    }\n}\n//# sourceMappingURL=h4.js.map","import { AurumElement } from './aurum_element';\nexport class H5 extends AurumElement {\n    constructor(props) {\n        super(props, 'h5');\n    }\n}\n//# sourceMappingURL=h5.js.map","import { AurumElement } from './aurum_element';\nexport class H6 extends AurumElement {\n    constructor(props) {\n        super(props, 'h6');\n    }\n}\n//# sourceMappingURL=h6.js.map","import { AurumElement } from './aurum_element';\nexport class Header extends AurumElement {\n    constructor(props) {\n        super(props, 'header');\n    }\n}\n//# sourceMappingURL=header.js.map","import { AurumElement } from './aurum_element';\nexport class Heading extends AurumElement {\n    constructor(props) {\n        super(props, 'heading');\n    }\n}\n//# sourceMappingURL=heading.js.map","import { AurumElement } from './aurum_element';\nexport class I extends AurumElement {\n    constructor(props) {\n        super(props, 'i');\n    }\n}\n//# sourceMappingURL=i.js.map","import { AurumElement } from './aurum_element';\nexport class IFrame extends AurumElement {\n    constructor(props) {\n        super(props, 'iframe');\n        this.bindProps(['src', 'srcdoc', 'width', 'height', 'allow', 'allowFullscreen', 'allowPaymentRequest'], props);\n    }\n}\n//# sourceMappingURL=iframe.js.map","import { AurumElement } from './aurum_element';\nexport class Img extends AurumElement {\n    constructor(props) {\n        super(props, 'img');\n        this.bindProps(['src', 'alt', 'width', 'height', 'referrerPolicy', 'sizes', 'srcset', 'useMap'], props);\n    }\n}\n//# sourceMappingURL=img.js.map","import { AurumElement } from './aurum_element';\nexport class Input extends AurumElement {\n    constructor(props) {\n        var _a, _b, _c;\n        super(props, 'input');\n        if (props.inputValueSource) {\n            this.node.value = (_b = (_a = props.initialValue, (_a !== null && _a !== void 0 ? _a : props.inputValueSource.value)), (_b !== null && _b !== void 0 ? _b : ''));\n            props.inputValueSource.unique().listen((value) => (this.node.value = value), this.cancellationToken);\n        }\n        else {\n            this.node.value = (_c = props.initialValue, (_c !== null && _c !== void 0 ? _c : ''));\n        }\n        this.bindProps([\n            'placeholder',\n            'readonly',\n            'disabled',\n            'accept',\n            'alt',\n            'autocomplete',\n            'autofocus',\n            'checked',\n            'defaultChecked',\n            'formAction',\n            'formEnctype',\n            'formMethod',\n            'formNoValidate',\n            'formTarget',\n            'max',\n            'maxLength',\n            'min',\n            'minLength',\n            'pattern',\n            'multiple',\n            'required',\n            'type'\n        ], props);\n        this.createEventHandlers(['input', 'change'], props);\n        if (props.inputValueSource) {\n            this.onInput.map((p) => this.node.value).pipe(props.inputValueSource);\n        }\n    }\n}\n//# sourceMappingURL=input.js.map","import { AurumElement } from './aurum_element';\nexport class Label extends AurumElement {\n    constructor(props) {\n        super(props, 'label');\n        this.bindProps(['for'], props);\n    }\n}\n//# sourceMappingURL=label.js.map","import { AurumElement } from './aurum_element';\nexport class Li extends AurumElement {\n    constructor(props) {\n        super(props, 'li');\n    }\n}\n//# sourceMappingURL=li.js.map","import { AurumElement } from './aurum_element';\nexport class Link extends AurumElement {\n    constructor(props) {\n        super(props, 'link');\n        this.bindProps(['href', 'rel', 'media', 'as', 'disabled', 'type'], props);\n    }\n}\n//# sourceMappingURL=link.js.map","import { AurumElement } from './aurum_element';\nexport class Nav extends AurumElement {\n    constructor(props) {\n        super(props, 'nav');\n    }\n}\n//# sourceMappingURL=nav.js.map","import { AurumElement } from './aurum_element';\nexport class NoScript extends AurumElement {\n    constructor(props) {\n        super(props, 'noscript');\n    }\n}\n//# sourceMappingURL=noscript.js.map","import { AurumElement } from './aurum_element';\nexport class Ol extends AurumElement {\n    constructor(props) {\n        super(props, 'ol');\n    }\n}\n//# sourceMappingURL=ol.js.map","import { AurumElement } from './aurum_element';\nexport class Option extends AurumElement {\n    constructor(props) {\n        super(props, 'option');\n    }\n}\n//# sourceMappingURL=option.js.map","import { AurumElement } from './aurum_element';\nexport class P extends AurumElement {\n    constructor(props) {\n        super(props, 'p');\n    }\n}\n//# sourceMappingURL=p.js.map","import { AurumElement } from './aurum_element';\nexport class Pre extends AurumElement {\n    constructor(props) {\n        super(props, 'pre');\n    }\n}\n//# sourceMappingURL=pre.js.map","import { AurumElement } from './aurum_element';\nexport class Progress extends AurumElement {\n    constructor(props) {\n        super(props, 'progress');\n        this.bindProps(['max', 'value'], props);\n    }\n}\n//# sourceMappingURL=progress.js.map","import { AurumElement } from './aurum_element';\nexport class Q extends AurumElement {\n    constructor(props) {\n        super(props, 'q');\n    }\n}\n//# sourceMappingURL=q.js.map","import { AurumElement } from './aurum_element';\nexport class Script extends AurumElement {\n    constructor(props) {\n        super(props, 'script');\n        this.bindProps(['src', 'async', 'defer', 'integrity', 'noModule', 'type'], props);\n    }\n}\n//# sourceMappingURL=script.js.map","import { AurumElement } from './aurum_element';\nexport class Select extends AurumElement {\n    constructor(props) {\n        super(props, 'select');\n    }\n}\n//# sourceMappingURL=select.js.map","import { AurumElement } from './aurum_element';\nexport class Source extends AurumElement {\n    constructor(props) {\n        super(props, 'source');\n        this.bindProps(['src', 'srcSet', 'media', 'sizes', 'type'], props);\n    }\n}\n//# sourceMappingURL=source.js.map","import { AurumElement } from './aurum_element';\nexport class Span extends AurumElement {\n    constructor(props) {\n        super(props, 'span');\n    }\n}\n//# sourceMappingURL=span.js.map","import { AurumElement } from '../aurum_element';\nexport class Switch extends AurumElement {\n    constructor(props) {\n        super(props, 'switch');\n        this.firstRender = true;\n        this.templateMap = props.templateMap;\n        this.renderSwitch(props.state.value);\n        props.state.listen((data) => {\n            this.renderSwitch(data);\n        }, this.cancellationToken);\n    }\n    renderSwitch(data) {\n        var _a;\n        if (data !== this.lastValue || this.firstRender) {\n            this.lastValue = data;\n            this.firstRender = false;\n            this.clearChildren();\n            if (data !== undefined && data !== null) {\n                const template = (_a = this.templateMap[data.toString()], (_a !== null && _a !== void 0 ? _a : this.template));\n                if (template) {\n                    const result = template.generate();\n                    this.addChild(result);\n                }\n            }\n            else if (this.template) {\n                const result = this.template.generate();\n                this.addChild(result);\n            }\n        }\n    }\n}\n//# sourceMappingURL=switch.js.map","import { Switch } from './switch';\nimport { DataSource } from '../../stream/data_source';\nexport class AurumRouter extends Switch {\n    constructor(props) {\n        const urlDataSource = new DataSource(location.hash.substring(1));\n        super(Object.assign(Object.assign({}, props), { state: urlDataSource }));\n        window.addEventListener('hashchange', () => {\n            urlDataSource.update(location.hash.substring(1));\n        });\n    }\n}\n//# sourceMappingURL=router.js.map","import { AurumElement } from '../aurum_element';\nexport class Suspense extends AurumElement {\n    constructor(props) {\n        super(props, 'suspense');\n        props.loader().then((newElement) => {\n            this.clearChildren();\n            this.addChild(newElement);\n        });\n    }\n}\n//# sourceMappingURL=suspense.js.map","import { AurumElement } from './aurum_element';\nexport class Style extends AurumElement {\n    constructor(props) {\n        super(props, 'style');\n        this.bindProps(['media'], props);\n    }\n}\n//# sourceMappingURL=style.js.map","import { AurumElement } from './aurum_element';\nexport class Sub extends AurumElement {\n    constructor(props) {\n        super(props, 'sub');\n    }\n}\n//# sourceMappingURL=sub.js.map","import { AurumElement } from './aurum_element';\nexport class Summary extends AurumElement {\n    constructor(props) {\n        super(props, 'summary');\n    }\n}\n//# sourceMappingURL=summary.js.map","import { AurumElement } from './aurum_element';\nexport class Sup extends AurumElement {\n    constructor(props) {\n        super(props, 'sup');\n    }\n}\n//# sourceMappingURL=sup.js.map","import { AurumElement } from './aurum_element';\nexport class Svg extends AurumElement {\n    constructor(props) {\n        super(props, 'svg');\n        this.bindProps(['width', 'height'], props);\n    }\n}\n//# sourceMappingURL=svg.js.map","import { AurumElement } from './aurum_element';\nexport class Table extends AurumElement {\n    constructor(props) {\n        super(props, 'table');\n    }\n}\n//# sourceMappingURL=table.js.map","import { AurumElement } from './aurum_element';\nexport class Tbody extends AurumElement {\n    constructor(props) {\n        super(props, 'tbody');\n    }\n}\n//# sourceMappingURL=tbody.js.map","import { AurumElement } from './aurum_element';\nexport class Td extends AurumElement {\n    constructor(props) {\n        super(props, 'td');\n    }\n}\n//# sourceMappingURL=td.js.map","import { AurumElement } from './aurum_element';\nexport class TextArea extends AurumElement {\n    constructor(props) {\n        var _a, _b, _c;\n        super(props, 'textArea');\n        if (props.inputValueSource) {\n            this.node.value = (_b = (_a = props.initialValue, (_a !== null && _a !== void 0 ? _a : props.inputValueSource.value)), (_b !== null && _b !== void 0 ? _b : ''));\n            props.inputValueSource.unique().listen((value) => (this.node.value = value), this.cancellationToken);\n        }\n        else {\n            this.node.value = (_c = props.initialValue, (_c !== null && _c !== void 0 ? _c : ''));\n        }\n        this.bindProps(['placeholder', 'readonly', 'disabled', 'rows', 'wrap', 'autocomplete', 'autofocus', 'max', 'maxLength', 'min', 'minLength', 'required', 'type'], props);\n        this.createEventHandlers(['input', 'change'], props);\n        if (props.inputValueSource) {\n            this.onInput.map((p) => this.node.value).pipe(props.inputValueSource);\n        }\n    }\n}\n//# sourceMappingURL=textarea.js.map","import { AurumElement } from './aurum_element';\nexport class Tfoot extends AurumElement {\n    constructor(props) {\n        super(props, 'tfoot');\n    }\n}\n//# sourceMappingURL=tfoot.js.map","import { AurumElement } from './aurum_element';\nexport class Th extends AurumElement {\n    constructor(props) {\n        super(props, 'th');\n    }\n}\n//# sourceMappingURL=th.js.map","import { AurumElement } from './aurum_element';\nexport class Thead extends AurumElement {\n    constructor(props) {\n        super(props, 'thead');\n    }\n}\n//# sourceMappingURL=thead.js.map","import { AurumElement } from './aurum_element';\nexport class Time extends AurumElement {\n    constructor(props) {\n        super(props, 'time');\n        this.bindProps(['datetime'], props);\n    }\n}\n//# sourceMappingURL=time.js.map","import { AurumElement } from './aurum_element';\nexport class Title extends AurumElement {\n    constructor(props) {\n        super(props, 'title');\n    }\n}\n//# sourceMappingURL=title.js.map","import { AurumElement } from './aurum_element';\nexport class Tr extends AurumElement {\n    constructor(props) {\n        super(props, 'tr');\n    }\n}\n//# sourceMappingURL=tr.js.map","import { AurumElement } from './aurum_element';\nexport class Ul extends AurumElement {\n    constructor(props) {\n        super(props, 'ul');\n    }\n}\n//# sourceMappingURL=ul.js.map","import { AurumElement } from './aurum_element';\nexport class Video extends AurumElement {\n    constructor(props) {\n        super(props, 'video');\n        this.bindProps(['controls', 'autoplay', 'loop', 'muted', 'preload', 'src', 'poster', 'width', 'height'], props);\n    }\n}\n//# sourceMappingURL=video.js.map","// vim:ts=4:sts=4:sw=4:\n/*!\n *\n * Copyright 2009-2017 Kris Kowal under the terms of the MIT\n * license found at https://github.com/kriskowal/q/blob/v1/LICENSE\n *\n * With parts by Tyler Close\n * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found\n * at http://www.opensource.org/licenses/mit-license.html\n * Forked at ref_send.js version: 2009-05-11\n *\n * With parts by Mark Miller\n * Copyright (C) 2011 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n(function (definition) {\n    \"use strict\";\n\n    // This file will function properly as a <script> tag, or a module\n    // using CommonJS and NodeJS or RequireJS module formats.  In\n    // Common/Node/RequireJS, the module exports the Q API and when\n    // executed as a simple <script>, it creates a Q global instead.\n\n    // Montage Require\n    if (typeof bootstrap === \"function\") {\n        bootstrap(\"promise\", definition);\n\n    // CommonJS\n    } else if (typeof exports === \"object\" && typeof module === \"object\") {\n        module.exports = definition();\n\n    // RequireJS\n    } else if (typeof define === \"function\" && define.amd) {\n        define(definition);\n\n    // SES (Secure EcmaScript)\n    } else if (typeof ses !== \"undefined\") {\n        if (!ses.ok()) {\n            return;\n        } else {\n            ses.makeQ = definition;\n        }\n\n    // <script>\n    } else if (typeof window !== \"undefined\" || typeof self !== \"undefined\") {\n        // Prefer window over self for add-on scripts. Use self for\n        // non-windowed contexts.\n        var global = typeof window !== \"undefined\" ? window : self;\n\n        // Get the `window` object, save the previous Q global\n        // and initialize Q as a global.\n        var previousQ = global.Q;\n        global.Q = definition();\n\n        // Add a noConflict function so Q can be removed from the\n        // global namespace.\n        global.Q.noConflict = function () {\n            global.Q = previousQ;\n            return this;\n        };\n\n    } else {\n        throw new Error(\"This environment was not anticipated by Q. Please file a bug.\");\n    }\n\n})(function () {\n\"use strict\";\n\nvar hasStacks = false;\ntry {\n    throw new Error();\n} catch (e) {\n    hasStacks = !!e.stack;\n}\n\n// All code after this point will be filtered from stack traces reported\n// by Q.\nvar qStartingLine = captureLine();\nvar qFileName;\n\n// shims\n\n// used for fallback in \"allResolved\"\nvar noop = function () {};\n\n// Use the fastest possible means to execute a task in a future turn\n// of the event loop.\nvar nextTick =(function () {\n    // linked list of tasks (single, with head node)\n    var head = {task: void 0, next: null};\n    var tail = head;\n    var flushing = false;\n    var requestTick = void 0;\n    var isNodeJS = false;\n    // queue for late tasks, used by unhandled rejection tracking\n    var laterQueue = [];\n\n    function flush() {\n        /* jshint loopfunc: true */\n        var task, domain;\n\n        while (head.next) {\n            head = head.next;\n            task = head.task;\n            head.task = void 0;\n            domain = head.domain;\n\n            if (domain) {\n                head.domain = void 0;\n                domain.enter();\n            }\n            runSingle(task, domain);\n\n        }\n        while (laterQueue.length) {\n            task = laterQueue.pop();\n            runSingle(task);\n        }\n        flushing = false;\n    }\n    // runs a single function in the async queue\n    function runSingle(task, domain) {\n        try {\n            task();\n\n        } catch (e) {\n            if (isNodeJS) {\n                // In node, uncaught exceptions are considered fatal errors.\n                // Re-throw them synchronously to interrupt flushing!\n\n                // Ensure continuation if the uncaught exception is suppressed\n                // listening \"uncaughtException\" events (as domains does).\n                // Continue in next event to avoid tick recursion.\n                if (domain) {\n                    domain.exit();\n                }\n                setTimeout(flush, 0);\n                if (domain) {\n                    domain.enter();\n                }\n\n                throw e;\n\n            } else {\n                // In browsers, uncaught exceptions are not fatal.\n                // Re-throw them asynchronously to avoid slow-downs.\n                setTimeout(function () {\n                    throw e;\n                }, 0);\n            }\n        }\n\n        if (domain) {\n            domain.exit();\n        }\n    }\n\n    nextTick = function (task) {\n        tail = tail.next = {\n            task: task,\n            domain: isNodeJS && process.domain,\n            next: null\n        };\n\n        if (!flushing) {\n            flushing = true;\n            requestTick();\n        }\n    };\n\n    if (typeof process === \"object\" &&\n        process.toString() === \"[object process]\" && process.nextTick) {\n        // Ensure Q is in a real Node environment, with a `process.nextTick`.\n        // To see through fake Node environments:\n        // * Mocha test runner - exposes a `process` global without a `nextTick`\n        // * Browserify - exposes a `process.nexTick` function that uses\n        //   `setTimeout`. In this case `setImmediate` is preferred because\n        //    it is faster. Browserify's `process.toString()` yields\n        //   \"[object Object]\", while in a real Node environment\n        //   `process.toString()` yields \"[object process]\".\n        isNodeJS = true;\n\n        requestTick = function () {\n            process.nextTick(flush);\n        };\n\n    } else if (typeof setImmediate === \"function\") {\n        // In IE10, Node.js 0.9+, or https://github.com/NobleJS/setImmediate\n        if (typeof window !== \"undefined\") {\n            requestTick = setImmediate.bind(window, flush);\n        } else {\n            requestTick = function () {\n                setImmediate(flush);\n            };\n        }\n\n    } else if (typeof MessageChannel !== \"undefined\") {\n        // modern browsers\n        // http://www.nonblocking.io/2011/06/windownexttick.html\n        var channel = new MessageChannel();\n        // At least Safari Version 6.0.5 (8536.30.1) intermittently cannot create\n        // working message ports the first time a page loads.\n        channel.port1.onmessage = function () {\n            requestTick = requestPortTick;\n            channel.port1.onmessage = flush;\n            flush();\n        };\n        var requestPortTick = function () {\n            // Opera requires us to provide a message payload, regardless of\n            // whether we use it.\n            channel.port2.postMessage(0);\n        };\n        requestTick = function () {\n            setTimeout(flush, 0);\n            requestPortTick();\n        };\n\n    } else {\n        // old browsers\n        requestTick = function () {\n            setTimeout(flush, 0);\n        };\n    }\n    // runs a task after all other tasks have been run\n    // this is useful for unhandled rejection tracking that needs to happen\n    // after all `then`d tasks have been run.\n    nextTick.runAfter = function (task) {\n        laterQueue.push(task);\n        if (!flushing) {\n            flushing = true;\n            requestTick();\n        }\n    };\n    return nextTick;\n})();\n\n// Attempt to make generics safe in the face of downstream\n// modifications.\n// There is no situation where this is necessary.\n// If you need a security guarantee, these primordials need to be\n// deeply frozen anyway, and if you don’t need a security guarantee,\n// this is just plain paranoid.\n// However, this **might** have the nice side-effect of reducing the size of\n// the minified code by reducing x.call() to merely x()\n// See Mark Miller’s explanation of what this does.\n// http://wiki.ecmascript.org/doku.php?id=conventions:safe_meta_programming\nvar call = Function.call;\nfunction uncurryThis(f) {\n    return function () {\n        return call.apply(f, arguments);\n    };\n}\n// This is equivalent, but slower:\n// uncurryThis = Function_bind.bind(Function_bind.call);\n// http://jsperf.com/uncurrythis\n\nvar array_slice = uncurryThis(Array.prototype.slice);\n\nvar array_reduce = uncurryThis(\n    Array.prototype.reduce || function (callback, basis) {\n        var index = 0,\n            length = this.length;\n        // concerning the initial value, if one is not provided\n        if (arguments.length === 1) {\n            // seek to the first value in the array, accounting\n            // for the possibility that is is a sparse array\n            do {\n                if (index in this) {\n                    basis = this[index++];\n                    break;\n                }\n                if (++index >= length) {\n                    throw new TypeError();\n                }\n            } while (1);\n        }\n        // reduce\n        for (; index < length; index++) {\n            // account for the possibility that the array is sparse\n            if (index in this) {\n                basis = callback(basis, this[index], index);\n            }\n        }\n        return basis;\n    }\n);\n\nvar array_indexOf = uncurryThis(\n    Array.prototype.indexOf || function (value) {\n        // not a very good shim, but good enough for our one use of it\n        for (var i = 0; i < this.length; i++) {\n            if (this[i] === value) {\n                return i;\n            }\n        }\n        return -1;\n    }\n);\n\nvar array_map = uncurryThis(\n    Array.prototype.map || function (callback, thisp) {\n        var self = this;\n        var collect = [];\n        array_reduce(self, function (undefined, value, index) {\n            collect.push(callback.call(thisp, value, index, self));\n        }, void 0);\n        return collect;\n    }\n);\n\nvar object_create = Object.create || function (prototype) {\n    function Type() { }\n    Type.prototype = prototype;\n    return new Type();\n};\n\nvar object_defineProperty = Object.defineProperty || function (obj, prop, descriptor) {\n    obj[prop] = descriptor.value;\n    return obj;\n};\n\nvar object_hasOwnProperty = uncurryThis(Object.prototype.hasOwnProperty);\n\nvar object_keys = Object.keys || function (object) {\n    var keys = [];\n    for (var key in object) {\n        if (object_hasOwnProperty(object, key)) {\n            keys.push(key);\n        }\n    }\n    return keys;\n};\n\nvar object_toString = uncurryThis(Object.prototype.toString);\n\nfunction isObject(value) {\n    return value === Object(value);\n}\n\n// generator related shims\n\n// FIXME: Remove this function once ES6 generators are in SpiderMonkey.\nfunction isStopIteration(exception) {\n    return (\n        object_toString(exception) === \"[object StopIteration]\" ||\n        exception instanceof QReturnValue\n    );\n}\n\n// FIXME: Remove this helper and Q.return once ES6 generators are in\n// SpiderMonkey.\nvar QReturnValue;\nif (typeof ReturnValue !== \"undefined\") {\n    QReturnValue = ReturnValue;\n} else {\n    QReturnValue = function (value) {\n        this.value = value;\n    };\n}\n\n// long stack traces\n\nvar STACK_JUMP_SEPARATOR = \"From previous event:\";\n\nfunction makeStackTraceLong(error, promise) {\n    // If possible, transform the error stack trace by removing Node and Q\n    // cruft, then concatenating with the stack trace of `promise`. See #57.\n    if (hasStacks &&\n        promise.stack &&\n        typeof error === \"object\" &&\n        error !== null &&\n        error.stack\n    ) {\n        var stacks = [];\n        for (var p = promise; !!p; p = p.source) {\n            if (p.stack && (!error.__minimumStackCounter__ || error.__minimumStackCounter__ > p.stackCounter)) {\n                object_defineProperty(error, \"__minimumStackCounter__\", {value: p.stackCounter, configurable: true});\n                stacks.unshift(p.stack);\n            }\n        }\n        stacks.unshift(error.stack);\n\n        var concatedStacks = stacks.join(\"\\n\" + STACK_JUMP_SEPARATOR + \"\\n\");\n        var stack = filterStackString(concatedStacks);\n        object_defineProperty(error, \"stack\", {value: stack, configurable: true});\n    }\n}\n\nfunction filterStackString(stackString) {\n    var lines = stackString.split(\"\\n\");\n    var desiredLines = [];\n    for (var i = 0; i < lines.length; ++i) {\n        var line = lines[i];\n\n        if (!isInternalFrame(line) && !isNodeFrame(line) && line) {\n            desiredLines.push(line);\n        }\n    }\n    return desiredLines.join(\"\\n\");\n}\n\nfunction isNodeFrame(stackLine) {\n    return stackLine.indexOf(\"(module.js:\") !== -1 ||\n           stackLine.indexOf(\"(node.js:\") !== -1;\n}\n\nfunction getFileNameAndLineNumber(stackLine) {\n    // Named functions: \"at functionName (filename:lineNumber:columnNumber)\"\n    // In IE10 function name can have spaces (\"Anonymous function\") O_o\n    var attempt1 = /at .+ \\((.+):(\\d+):(?:\\d+)\\)$/.exec(stackLine);\n    if (attempt1) {\n        return [attempt1[1], Number(attempt1[2])];\n    }\n\n    // Anonymous functions: \"at filename:lineNumber:columnNumber\"\n    var attempt2 = /at ([^ ]+):(\\d+):(?:\\d+)$/.exec(stackLine);\n    if (attempt2) {\n        return [attempt2[1], Number(attempt2[2])];\n    }\n\n    // Firefox style: \"function@filename:lineNumber or @filename:lineNumber\"\n    var attempt3 = /.*@(.+):(\\d+)$/.exec(stackLine);\n    if (attempt3) {\n        return [attempt3[1], Number(attempt3[2])];\n    }\n}\n\nfunction isInternalFrame(stackLine) {\n    var fileNameAndLineNumber = getFileNameAndLineNumber(stackLine);\n\n    if (!fileNameAndLineNumber) {\n        return false;\n    }\n\n    var fileName = fileNameAndLineNumber[0];\n    var lineNumber = fileNameAndLineNumber[1];\n\n    return fileName === qFileName &&\n        lineNumber >= qStartingLine &&\n        lineNumber <= qEndingLine;\n}\n\n// discover own file name and line number range for filtering stack\n// traces\nfunction captureLine() {\n    if (!hasStacks) {\n        return;\n    }\n\n    try {\n        throw new Error();\n    } catch (e) {\n        var lines = e.stack.split(\"\\n\");\n        var firstLine = lines[0].indexOf(\"@\") > 0 ? lines[1] : lines[2];\n        var fileNameAndLineNumber = getFileNameAndLineNumber(firstLine);\n        if (!fileNameAndLineNumber) {\n            return;\n        }\n\n        qFileName = fileNameAndLineNumber[0];\n        return fileNameAndLineNumber[1];\n    }\n}\n\nfunction deprecate(callback, name, alternative) {\n    return function () {\n        if (typeof console !== \"undefined\" &&\n            typeof console.warn === \"function\") {\n            console.warn(name + \" is deprecated, use \" + alternative +\n                         \" instead.\", new Error(\"\").stack);\n        }\n        return callback.apply(callback, arguments);\n    };\n}\n\n// end of shims\n// beginning of real work\n\n/**\n * Constructs a promise for an immediate reference, passes promises through, or\n * coerces promises from different systems.\n * @param value immediate reference or promise\n */\nfunction Q(value) {\n    // If the object is already a Promise, return it directly.  This enables\n    // the resolve function to both be used to created references from objects,\n    // but to tolerably coerce non-promises to promises.\n    if (value instanceof Promise) {\n        return value;\n    }\n\n    // assimilate thenables\n    if (isPromiseAlike(value)) {\n        return coerce(value);\n    } else {\n        return fulfill(value);\n    }\n}\nQ.resolve = Q;\n\n/**\n * Performs a task in a future turn of the event loop.\n * @param {Function} task\n */\nQ.nextTick = nextTick;\n\n/**\n * Controls whether or not long stack traces will be on\n */\nQ.longStackSupport = false;\n\n/**\n * The counter is used to determine the stopping point for building\n * long stack traces. In makeStackTraceLong we walk backwards through\n * the linked list of promises, only stacks which were created before\n * the rejection are concatenated.\n */\nvar longStackCounter = 1;\n\n// enable long stacks if Q_DEBUG is set\nif (typeof process === \"object\" && process && process.env && process.env.Q_DEBUG) {\n    Q.longStackSupport = true;\n}\n\n/**\n * Constructs a {promise, resolve, reject} object.\n *\n * `resolve` is a callback to invoke with a more resolved value for the\n * promise. To fulfill the promise, invoke `resolve` with any value that is\n * not a thenable. To reject the promise, invoke `resolve` with a rejected\n * thenable, or invoke `reject` with the reason directly. To resolve the\n * promise to another thenable, thus putting it in the same state, invoke\n * `resolve` with that other thenable.\n */\nQ.defer = defer;\nfunction defer() {\n    // if \"messages\" is an \"Array\", that indicates that the promise has not yet\n    // been resolved.  If it is \"undefined\", it has been resolved.  Each\n    // element of the messages array is itself an array of complete arguments to\n    // forward to the resolved promise.  We coerce the resolution value to a\n    // promise using the `resolve` function because it handles both fully\n    // non-thenable values and other thenables gracefully.\n    var messages = [], progressListeners = [], resolvedPromise;\n\n    var deferred = object_create(defer.prototype);\n    var promise = object_create(Promise.prototype);\n\n    promise.promiseDispatch = function (resolve, op, operands) {\n        var args = array_slice(arguments);\n        if (messages) {\n            messages.push(args);\n            if (op === \"when\" && operands[1]) { // progress operand\n                progressListeners.push(operands[1]);\n            }\n        } else {\n            Q.nextTick(function () {\n                resolvedPromise.promiseDispatch.apply(resolvedPromise, args);\n            });\n        }\n    };\n\n    // XXX deprecated\n    promise.valueOf = function () {\n        if (messages) {\n            return promise;\n        }\n        var nearerValue = nearer(resolvedPromise);\n        if (isPromise(nearerValue)) {\n            resolvedPromise = nearerValue; // shorten chain\n        }\n        return nearerValue;\n    };\n\n    promise.inspect = function () {\n        if (!resolvedPromise) {\n            return { state: \"pending\" };\n        }\n        return resolvedPromise.inspect();\n    };\n\n    if (Q.longStackSupport && hasStacks) {\n        try {\n            throw new Error();\n        } catch (e) {\n            // NOTE: don't try to use `Error.captureStackTrace` or transfer the\n            // accessor around; that causes memory leaks as per GH-111. Just\n            // reify the stack trace as a string ASAP.\n            //\n            // At the same time, cut off the first line; it's always just\n            // \"[object Promise]\\n\", as per the `toString`.\n            promise.stack = e.stack.substring(e.stack.indexOf(\"\\n\") + 1);\n            promise.stackCounter = longStackCounter++;\n        }\n    }\n\n    // NOTE: we do the checks for `resolvedPromise` in each method, instead of\n    // consolidating them into `become`, since otherwise we'd create new\n    // promises with the lines `become(whatever(value))`. See e.g. GH-252.\n\n    function become(newPromise) {\n        resolvedPromise = newPromise;\n\n        if (Q.longStackSupport && hasStacks) {\n            // Only hold a reference to the new promise if long stacks\n            // are enabled to reduce memory usage\n            promise.source = newPromise;\n        }\n\n        array_reduce(messages, function (undefined, message) {\n            Q.nextTick(function () {\n                newPromise.promiseDispatch.apply(newPromise, message);\n            });\n        }, void 0);\n\n        messages = void 0;\n        progressListeners = void 0;\n    }\n\n    deferred.promise = promise;\n    deferred.resolve = function (value) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(Q(value));\n    };\n\n    deferred.fulfill = function (value) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(fulfill(value));\n    };\n    deferred.reject = function (reason) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(reject(reason));\n    };\n    deferred.notify = function (progress) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        array_reduce(progressListeners, function (undefined, progressListener) {\n            Q.nextTick(function () {\n                progressListener(progress);\n            });\n        }, void 0);\n    };\n\n    return deferred;\n}\n\n/**\n * Creates a Node-style callback that will resolve or reject the deferred\n * promise.\n * @returns a nodeback\n */\ndefer.prototype.makeNodeResolver = function () {\n    var self = this;\n    return function (error, value) {\n        if (error) {\n            self.reject(error);\n        } else if (arguments.length > 2) {\n            self.resolve(array_slice(arguments, 1));\n        } else {\n            self.resolve(value);\n        }\n    };\n};\n\n/**\n * @param resolver {Function} a function that returns nothing and accepts\n * the resolve, reject, and notify functions for a deferred.\n * @returns a promise that may be resolved with the given resolve and reject\n * functions, or rejected by a thrown exception in resolver\n */\nQ.Promise = promise; // ES6\nQ.promise = promise;\nfunction promise(resolver) {\n    if (typeof resolver !== \"function\") {\n        throw new TypeError(\"resolver must be a function.\");\n    }\n    var deferred = defer();\n    try {\n        resolver(deferred.resolve, deferred.reject, deferred.notify);\n    } catch (reason) {\n        deferred.reject(reason);\n    }\n    return deferred.promise;\n}\n\npromise.race = race; // ES6\npromise.all = all; // ES6\npromise.reject = reject; // ES6\npromise.resolve = Q; // ES6\n\n// XXX experimental.  This method is a way to denote that a local value is\n// serializable and should be immediately dispatched to a remote upon request,\n// instead of passing a reference.\nQ.passByCopy = function (object) {\n    //freeze(object);\n    //passByCopies.set(object, true);\n    return object;\n};\n\nPromise.prototype.passByCopy = function () {\n    //freeze(object);\n    //passByCopies.set(object, true);\n    return this;\n};\n\n/**\n * If two promises eventually fulfill to the same value, promises that value,\n * but otherwise rejects.\n * @param x {Any*}\n * @param y {Any*}\n * @returns {Any*} a promise for x and y if they are the same, but a rejection\n * otherwise.\n *\n */\nQ.join = function (x, y) {\n    return Q(x).join(y);\n};\n\nPromise.prototype.join = function (that) {\n    return Q([this, that]).spread(function (x, y) {\n        if (x === y) {\n            // TODO: \"===\" should be Object.is or equiv\n            return x;\n        } else {\n            throw new Error(\"Q can't join: not the same: \" + x + \" \" + y);\n        }\n    });\n};\n\n/**\n * Returns a promise for the first of an array of promises to become settled.\n * @param answers {Array[Any*]} promises to race\n * @returns {Any*} the first promise to be settled\n */\nQ.race = race;\nfunction race(answerPs) {\n    return promise(function (resolve, reject) {\n        // Switch to this once we can assume at least ES5\n        // answerPs.forEach(function (answerP) {\n        //     Q(answerP).then(resolve, reject);\n        // });\n        // Use this in the meantime\n        for (var i = 0, len = answerPs.length; i < len; i++) {\n            Q(answerPs[i]).then(resolve, reject);\n        }\n    });\n}\n\nPromise.prototype.race = function () {\n    return this.then(Q.race);\n};\n\n/**\n * Constructs a Promise with a promise descriptor object and optional fallback\n * function.  The descriptor contains methods like when(rejected), get(name),\n * set(name, value), post(name, args), and delete(name), which all\n * return either a value, a promise for a value, or a rejection.  The fallback\n * accepts the operation name, a resolver, and any further arguments that would\n * have been forwarded to the appropriate method above had a method been\n * provided with the proper name.  The API makes no guarantees about the nature\n * of the returned object, apart from that it is usable whereever promises are\n * bought and sold.\n */\nQ.makePromise = Promise;\nfunction Promise(descriptor, fallback, inspect) {\n    if (fallback === void 0) {\n        fallback = function (op) {\n            return reject(new Error(\n                \"Promise does not support operation: \" + op\n            ));\n        };\n    }\n    if (inspect === void 0) {\n        inspect = function () {\n            return {state: \"unknown\"};\n        };\n    }\n\n    var promise = object_create(Promise.prototype);\n\n    promise.promiseDispatch = function (resolve, op, args) {\n        var result;\n        try {\n            if (descriptor[op]) {\n                result = descriptor[op].apply(promise, args);\n            } else {\n                result = fallback.call(promise, op, args);\n            }\n        } catch (exception) {\n            result = reject(exception);\n        }\n        if (resolve) {\n            resolve(result);\n        }\n    };\n\n    promise.inspect = inspect;\n\n    // XXX deprecated `valueOf` and `exception` support\n    if (inspect) {\n        var inspected = inspect();\n        if (inspected.state === \"rejected\") {\n            promise.exception = inspected.reason;\n        }\n\n        promise.valueOf = function () {\n            var inspected = inspect();\n            if (inspected.state === \"pending\" ||\n                inspected.state === \"rejected\") {\n                return promise;\n            }\n            return inspected.value;\n        };\n    }\n\n    return promise;\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.then = function (fulfilled, rejected, progressed) {\n    var self = this;\n    var deferred = defer();\n    var done = false;   // ensure the untrusted promise makes at most a\n                        // single call to one of the callbacks\n\n    function _fulfilled(value) {\n        try {\n            return typeof fulfilled === \"function\" ? fulfilled(value) : value;\n        } catch (exception) {\n            return reject(exception);\n        }\n    }\n\n    function _rejected(exception) {\n        if (typeof rejected === \"function\") {\n            makeStackTraceLong(exception, self);\n            try {\n                return rejected(exception);\n            } catch (newException) {\n                return reject(newException);\n            }\n        }\n        return reject(exception);\n    }\n\n    function _progressed(value) {\n        return typeof progressed === \"function\" ? progressed(value) : value;\n    }\n\n    Q.nextTick(function () {\n        self.promiseDispatch(function (value) {\n            if (done) {\n                return;\n            }\n            done = true;\n\n            deferred.resolve(_fulfilled(value));\n        }, \"when\", [function (exception) {\n            if (done) {\n                return;\n            }\n            done = true;\n\n            deferred.resolve(_rejected(exception));\n        }]);\n    });\n\n    // Progress propagator need to be attached in the current tick.\n    self.promiseDispatch(void 0, \"when\", [void 0, function (value) {\n        var newValue;\n        var threw = false;\n        try {\n            newValue = _progressed(value);\n        } catch (e) {\n            threw = true;\n            if (Q.onerror) {\n                Q.onerror(e);\n            } else {\n                throw e;\n            }\n        }\n\n        if (!threw) {\n            deferred.notify(newValue);\n        }\n    }]);\n\n    return deferred.promise;\n};\n\nQ.tap = function (promise, callback) {\n    return Q(promise).tap(callback);\n};\n\n/**\n * Works almost like \"finally\", but not called for rejections.\n * Original resolution value is passed through callback unaffected.\n * Callback may return a promise that will be awaited for.\n * @param {Function} callback\n * @returns {Q.Promise}\n * @example\n * doSomething()\n *   .then(...)\n *   .tap(console.log)\n *   .then(...);\n */\nPromise.prototype.tap = function (callback) {\n    callback = Q(callback);\n\n    return this.then(function (value) {\n        return callback.fcall(value).thenResolve(value);\n    });\n};\n\n/**\n * Registers an observer on a promise.\n *\n * Guarantees:\n *\n * 1. that fulfilled and rejected will be called only once.\n * 2. that either the fulfilled callback or the rejected callback will be\n *    called, but not both.\n * 3. that fulfilled and rejected will not be called in this turn.\n *\n * @param value      promise or immediate reference to observe\n * @param fulfilled  function to be called with the fulfilled value\n * @param rejected   function to be called with the rejection exception\n * @param progressed function to be called on any progress notifications\n * @return promise for the return value from the invoked callback\n */\nQ.when = when;\nfunction when(value, fulfilled, rejected, progressed) {\n    return Q(value).then(fulfilled, rejected, progressed);\n}\n\nPromise.prototype.thenResolve = function (value) {\n    return this.then(function () { return value; });\n};\n\nQ.thenResolve = function (promise, value) {\n    return Q(promise).thenResolve(value);\n};\n\nPromise.prototype.thenReject = function (reason) {\n    return this.then(function () { throw reason; });\n};\n\nQ.thenReject = function (promise, reason) {\n    return Q(promise).thenReject(reason);\n};\n\n/**\n * If an object is not a promise, it is as \"near\" as possible.\n * If a promise is rejected, it is as \"near\" as possible too.\n * If it’s a fulfilled promise, the fulfillment value is nearer.\n * If it’s a deferred promise and the deferred has been resolved, the\n * resolution is \"nearer\".\n * @param object\n * @returns most resolved (nearest) form of the object\n */\n\n// XXX should we re-do this?\nQ.nearer = nearer;\nfunction nearer(value) {\n    if (isPromise(value)) {\n        var inspected = value.inspect();\n        if (inspected.state === \"fulfilled\") {\n            return inspected.value;\n        }\n    }\n    return value;\n}\n\n/**\n * @returns whether the given object is a promise.\n * Otherwise it is a fulfilled value.\n */\nQ.isPromise = isPromise;\nfunction isPromise(object) {\n    return object instanceof Promise;\n}\n\nQ.isPromiseAlike = isPromiseAlike;\nfunction isPromiseAlike(object) {\n    return isObject(object) && typeof object.then === \"function\";\n}\n\n/**\n * @returns whether the given object is a pending promise, meaning not\n * fulfilled or rejected.\n */\nQ.isPending = isPending;\nfunction isPending(object) {\n    return isPromise(object) && object.inspect().state === \"pending\";\n}\n\nPromise.prototype.isPending = function () {\n    return this.inspect().state === \"pending\";\n};\n\n/**\n * @returns whether the given object is a value or fulfilled\n * promise.\n */\nQ.isFulfilled = isFulfilled;\nfunction isFulfilled(object) {\n    return !isPromise(object) || object.inspect().state === \"fulfilled\";\n}\n\nPromise.prototype.isFulfilled = function () {\n    return this.inspect().state === \"fulfilled\";\n};\n\n/**\n * @returns whether the given object is a rejected promise.\n */\nQ.isRejected = isRejected;\nfunction isRejected(object) {\n    return isPromise(object) && object.inspect().state === \"rejected\";\n}\n\nPromise.prototype.isRejected = function () {\n    return this.inspect().state === \"rejected\";\n};\n\n//// BEGIN UNHANDLED REJECTION TRACKING\n\n// This promise library consumes exceptions thrown in handlers so they can be\n// handled by a subsequent promise.  The exceptions get added to this array when\n// they are created, and removed when they are handled.  Note that in ES6 or\n// shimmed environments, this would naturally be a `Set`.\nvar unhandledReasons = [];\nvar unhandledRejections = [];\nvar reportedUnhandledRejections = [];\nvar trackUnhandledRejections = true;\n\nfunction resetUnhandledRejections() {\n    unhandledReasons.length = 0;\n    unhandledRejections.length = 0;\n\n    if (!trackUnhandledRejections) {\n        trackUnhandledRejections = true;\n    }\n}\n\nfunction trackRejection(promise, reason) {\n    if (!trackUnhandledRejections) {\n        return;\n    }\n    if (typeof process === \"object\" && typeof process.emit === \"function\") {\n        Q.nextTick.runAfter(function () {\n            if (array_indexOf(unhandledRejections, promise) !== -1) {\n                process.emit(\"unhandledRejection\", reason, promise);\n                reportedUnhandledRejections.push(promise);\n            }\n        });\n    }\n\n    unhandledRejections.push(promise);\n    if (reason && typeof reason.stack !== \"undefined\") {\n        unhandledReasons.push(reason.stack);\n    } else {\n        unhandledReasons.push(\"(no stack) \" + reason);\n    }\n}\n\nfunction untrackRejection(promise) {\n    if (!trackUnhandledRejections) {\n        return;\n    }\n\n    var at = array_indexOf(unhandledRejections, promise);\n    if (at !== -1) {\n        if (typeof process === \"object\" && typeof process.emit === \"function\") {\n            Q.nextTick.runAfter(function () {\n                var atReport = array_indexOf(reportedUnhandledRejections, promise);\n                if (atReport !== -1) {\n                    process.emit(\"rejectionHandled\", unhandledReasons[at], promise);\n                    reportedUnhandledRejections.splice(atReport, 1);\n                }\n            });\n        }\n        unhandledRejections.splice(at, 1);\n        unhandledReasons.splice(at, 1);\n    }\n}\n\nQ.resetUnhandledRejections = resetUnhandledRejections;\n\nQ.getUnhandledReasons = function () {\n    // Make a copy so that consumers can't interfere with our internal state.\n    return unhandledReasons.slice();\n};\n\nQ.stopUnhandledRejectionTracking = function () {\n    resetUnhandledRejections();\n    trackUnhandledRejections = false;\n};\n\nresetUnhandledRejections();\n\n//// END UNHANDLED REJECTION TRACKING\n\n/**\n * Constructs a rejected promise.\n * @param reason value describing the failure\n */\nQ.reject = reject;\nfunction reject(reason) {\n    var rejection = Promise({\n        \"when\": function (rejected) {\n            // note that the error has been handled\n            if (rejected) {\n                untrackRejection(this);\n            }\n            return rejected ? rejected(reason) : this;\n        }\n    }, function fallback() {\n        return this;\n    }, function inspect() {\n        return { state: \"rejected\", reason: reason };\n    });\n\n    // Note that the reason has not been handled.\n    trackRejection(rejection, reason);\n\n    return rejection;\n}\n\n/**\n * Constructs a fulfilled promise for an immediate reference.\n * @param value immediate reference\n */\nQ.fulfill = fulfill;\nfunction fulfill(value) {\n    return Promise({\n        \"when\": function () {\n            return value;\n        },\n        \"get\": function (name) {\n            return value[name];\n        },\n        \"set\": function (name, rhs) {\n            value[name] = rhs;\n        },\n        \"delete\": function (name) {\n            delete value[name];\n        },\n        \"post\": function (name, args) {\n            // Mark Miller proposes that post with no name should apply a\n            // promised function.\n            if (name === null || name === void 0) {\n                return value.apply(void 0, args);\n            } else {\n                return value[name].apply(value, args);\n            }\n        },\n        \"apply\": function (thisp, args) {\n            return value.apply(thisp, args);\n        },\n        \"keys\": function () {\n            return object_keys(value);\n        }\n    }, void 0, function inspect() {\n        return { state: \"fulfilled\", value: value };\n    });\n}\n\n/**\n * Converts thenables to Q promises.\n * @param promise thenable promise\n * @returns a Q promise\n */\nfunction coerce(promise) {\n    var deferred = defer();\n    Q.nextTick(function () {\n        try {\n            promise.then(deferred.resolve, deferred.reject, deferred.notify);\n        } catch (exception) {\n            deferred.reject(exception);\n        }\n    });\n    return deferred.promise;\n}\n\n/**\n * Annotates an object such that it will never be\n * transferred away from this process over any promise\n * communication channel.\n * @param object\n * @returns promise a wrapping of that object that\n * additionally responds to the \"isDef\" message\n * without a rejection.\n */\nQ.master = master;\nfunction master(object) {\n    return Promise({\n        \"isDef\": function () {}\n    }, function fallback(op, args) {\n        return dispatch(object, op, args);\n    }, function () {\n        return Q(object).inspect();\n    });\n}\n\n/**\n * Spreads the values of a promised array of arguments into the\n * fulfillment callback.\n * @param fulfilled callback that receives variadic arguments from the\n * promised array\n * @param rejected callback that receives the exception if the promise\n * is rejected.\n * @returns a promise for the return value or thrown exception of\n * either callback.\n */\nQ.spread = spread;\nfunction spread(value, fulfilled, rejected) {\n    return Q(value).spread(fulfilled, rejected);\n}\n\nPromise.prototype.spread = function (fulfilled, rejected) {\n    return this.all().then(function (array) {\n        return fulfilled.apply(void 0, array);\n    }, rejected);\n};\n\n/**\n * The async function is a decorator for generator functions, turning\n * them into asynchronous generators.  Although generators are only part\n * of the newest ECMAScript 6 drafts, this code does not cause syntax\n * errors in older engines.  This code should continue to work and will\n * in fact improve over time as the language improves.\n *\n * ES6 generators are currently part of V8 version 3.19 with the\n * --harmony-generators runtime flag enabled.  SpiderMonkey has had them\n * for longer, but under an older Python-inspired form.  This function\n * works on both kinds of generators.\n *\n * Decorates a generator function such that:\n *  - it may yield promises\n *  - execution will continue when that promise is fulfilled\n *  - the value of the yield expression will be the fulfilled value\n *  - it returns a promise for the return value (when the generator\n *    stops iterating)\n *  - the decorated function returns a promise for the return value\n *    of the generator or the first rejected promise among those\n *    yielded.\n *  - if an error is thrown in the generator, it propagates through\n *    every following yield until it is caught, or until it escapes\n *    the generator function altogether, and is translated into a\n *    rejection for the promise returned by the decorated generator.\n */\nQ.async = async;\nfunction async(makeGenerator) {\n    return function () {\n        // when verb is \"send\", arg is a value\n        // when verb is \"throw\", arg is an exception\n        function continuer(verb, arg) {\n            var result;\n\n            // Until V8 3.19 / Chromium 29 is released, SpiderMonkey is the only\n            // engine that has a deployed base of browsers that support generators.\n            // However, SM's generators use the Python-inspired semantics of\n            // outdated ES6 drafts.  We would like to support ES6, but we'd also\n            // like to make it possible to use generators in deployed browsers, so\n            // we also support Python-style generators.  At some point we can remove\n            // this block.\n\n            if (typeof StopIteration === \"undefined\") {\n                // ES6 Generators\n                try {\n                    result = generator[verb](arg);\n                } catch (exception) {\n                    return reject(exception);\n                }\n                if (result.done) {\n                    return Q(result.value);\n                } else {\n                    return when(result.value, callback, errback);\n                }\n            } else {\n                // SpiderMonkey Generators\n                // FIXME: Remove this case when SM does ES6 generators.\n                try {\n                    result = generator[verb](arg);\n                } catch (exception) {\n                    if (isStopIteration(exception)) {\n                        return Q(exception.value);\n                    } else {\n                        return reject(exception);\n                    }\n                }\n                return when(result, callback, errback);\n            }\n        }\n        var generator = makeGenerator.apply(this, arguments);\n        var callback = continuer.bind(continuer, \"next\");\n        var errback = continuer.bind(continuer, \"throw\");\n        return callback();\n    };\n}\n\n/**\n * The spawn function is a small wrapper around async that immediately\n * calls the generator and also ends the promise chain, so that any\n * unhandled errors are thrown instead of forwarded to the error\n * handler. This is useful because it's extremely common to run\n * generators at the top-level to work with libraries.\n */\nQ.spawn = spawn;\nfunction spawn(makeGenerator) {\n    Q.done(Q.async(makeGenerator)());\n}\n\n// FIXME: Remove this interface once ES6 generators are in SpiderMonkey.\n/**\n * Throws a ReturnValue exception to stop an asynchronous generator.\n *\n * This interface is a stop-gap measure to support generator return\n * values in older Firefox/SpiderMonkey.  In browsers that support ES6\n * generators like Chromium 29, just use \"return\" in your generator\n * functions.\n *\n * @param value the return value for the surrounding generator\n * @throws ReturnValue exception with the value.\n * @example\n * // ES6 style\n * Q.async(function* () {\n *      var foo = yield getFooPromise();\n *      var bar = yield getBarPromise();\n *      return foo + bar;\n * })\n * // Older SpiderMonkey style\n * Q.async(function () {\n *      var foo = yield getFooPromise();\n *      var bar = yield getBarPromise();\n *      Q.return(foo + bar);\n * })\n */\nQ[\"return\"] = _return;\nfunction _return(value) {\n    throw new QReturnValue(value);\n}\n\n/**\n * The promised function decorator ensures that any promise arguments\n * are settled and passed as values (`this` is also settled and passed\n * as a value).  It will also ensure that the result of a function is\n * always a promise.\n *\n * @example\n * var add = Q.promised(function (a, b) {\n *     return a + b;\n * });\n * add(Q(a), Q(B));\n *\n * @param {function} callback The function to decorate\n * @returns {function} a function that has been decorated.\n */\nQ.promised = promised;\nfunction promised(callback) {\n    return function () {\n        return spread([this, all(arguments)], function (self, args) {\n            return callback.apply(self, args);\n        });\n    };\n}\n\n/**\n * sends a message to a value in a future turn\n * @param object* the recipient\n * @param op the name of the message operation, e.g., \"when\",\n * @param args further arguments to be forwarded to the operation\n * @returns result {Promise} a promise for the result of the operation\n */\nQ.dispatch = dispatch;\nfunction dispatch(object, op, args) {\n    return Q(object).dispatch(op, args);\n}\n\nPromise.prototype.dispatch = function (op, args) {\n    var self = this;\n    var deferred = defer();\n    Q.nextTick(function () {\n        self.promiseDispatch(deferred.resolve, op, args);\n    });\n    return deferred.promise;\n};\n\n/**\n * Gets the value of a property in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of property to get\n * @return promise for the property value\n */\nQ.get = function (object, key) {\n    return Q(object).dispatch(\"get\", [key]);\n};\n\nPromise.prototype.get = function (key) {\n    return this.dispatch(\"get\", [key]);\n};\n\n/**\n * Sets the value of a property in a future turn.\n * @param object    promise or immediate reference for object object\n * @param name      name of property to set\n * @param value     new value of property\n * @return promise for the return value\n */\nQ.set = function (object, key, value) {\n    return Q(object).dispatch(\"set\", [key, value]);\n};\n\nPromise.prototype.set = function (key, value) {\n    return this.dispatch(\"set\", [key, value]);\n};\n\n/**\n * Deletes a property in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of property to delete\n * @return promise for the return value\n */\nQ.del = // XXX legacy\nQ[\"delete\"] = function (object, key) {\n    return Q(object).dispatch(\"delete\", [key]);\n};\n\nPromise.prototype.del = // XXX legacy\nPromise.prototype[\"delete\"] = function (key) {\n    return this.dispatch(\"delete\", [key]);\n};\n\n/**\n * Invokes a method in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of method to invoke\n * @param value     a value to post, typically an array of\n *                  invocation arguments for promises that\n *                  are ultimately backed with `resolve` values,\n *                  as opposed to those backed with URLs\n *                  wherein the posted value can be any\n *                  JSON serializable object.\n * @return promise for the return value\n */\n// bound locally because it is used by other methods\nQ.mapply = // XXX As proposed by \"Redsandro\"\nQ.post = function (object, name, args) {\n    return Q(object).dispatch(\"post\", [name, args]);\n};\n\nPromise.prototype.mapply = // XXX As proposed by \"Redsandro\"\nPromise.prototype.post = function (name, args) {\n    return this.dispatch(\"post\", [name, args]);\n};\n\n/**\n * Invokes a method in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of method to invoke\n * @param ...args   array of invocation arguments\n * @return promise for the return value\n */\nQ.send = // XXX Mark Miller's proposed parlance\nQ.mcall = // XXX As proposed by \"Redsandro\"\nQ.invoke = function (object, name /*...args*/) {\n    return Q(object).dispatch(\"post\", [name, array_slice(arguments, 2)]);\n};\n\nPromise.prototype.send = // XXX Mark Miller's proposed parlance\nPromise.prototype.mcall = // XXX As proposed by \"Redsandro\"\nPromise.prototype.invoke = function (name /*...args*/) {\n    return this.dispatch(\"post\", [name, array_slice(arguments, 1)]);\n};\n\n/**\n * Applies the promised function in a future turn.\n * @param object    promise or immediate reference for target function\n * @param args      array of application arguments\n */\nQ.fapply = function (object, args) {\n    return Q(object).dispatch(\"apply\", [void 0, args]);\n};\n\nPromise.prototype.fapply = function (args) {\n    return this.dispatch(\"apply\", [void 0, args]);\n};\n\n/**\n * Calls the promised function in a future turn.\n * @param object    promise or immediate reference for target function\n * @param ...args   array of application arguments\n */\nQ[\"try\"] =\nQ.fcall = function (object /* ...args*/) {\n    return Q(object).dispatch(\"apply\", [void 0, array_slice(arguments, 1)]);\n};\n\nPromise.prototype.fcall = function (/*...args*/) {\n    return this.dispatch(\"apply\", [void 0, array_slice(arguments)]);\n};\n\n/**\n * Binds the promised function, transforming return values into a fulfilled\n * promise and thrown errors into a rejected one.\n * @param object    promise or immediate reference for target function\n * @param ...args   array of application arguments\n */\nQ.fbind = function (object /*...args*/) {\n    var promise = Q(object);\n    var args = array_slice(arguments, 1);\n    return function fbound() {\n        return promise.dispatch(\"apply\", [\n            this,\n            args.concat(array_slice(arguments))\n        ]);\n    };\n};\nPromise.prototype.fbind = function (/*...args*/) {\n    var promise = this;\n    var args = array_slice(arguments);\n    return function fbound() {\n        return promise.dispatch(\"apply\", [\n            this,\n            args.concat(array_slice(arguments))\n        ]);\n    };\n};\n\n/**\n * Requests the names of the owned properties of a promised\n * object in a future turn.\n * @param object    promise or immediate reference for target object\n * @return promise for the keys of the eventually settled object\n */\nQ.keys = function (object) {\n    return Q(object).dispatch(\"keys\", []);\n};\n\nPromise.prototype.keys = function () {\n    return this.dispatch(\"keys\", []);\n};\n\n/**\n * Turns an array of promises into a promise for an array.  If any of\n * the promises gets rejected, the whole array is rejected immediately.\n * @param {Array*} an array (or promise for an array) of values (or\n * promises for values)\n * @returns a promise for an array of the corresponding values\n */\n// By Mark Miller\n// http://wiki.ecmascript.org/doku.php?id=strawman:concurrency&rev=1308776521#allfulfilled\nQ.all = all;\nfunction all(promises) {\n    return when(promises, function (promises) {\n        var pendingCount = 0;\n        var deferred = defer();\n        array_reduce(promises, function (undefined, promise, index) {\n            var snapshot;\n            if (\n                isPromise(promise) &&\n                (snapshot = promise.inspect()).state === \"fulfilled\"\n            ) {\n                promises[index] = snapshot.value;\n            } else {\n                ++pendingCount;\n                when(\n                    promise,\n                    function (value) {\n                        promises[index] = value;\n                        if (--pendingCount === 0) {\n                            deferred.resolve(promises);\n                        }\n                    },\n                    deferred.reject,\n                    function (progress) {\n                        deferred.notify({ index: index, value: progress });\n                    }\n                );\n            }\n        }, void 0);\n        if (pendingCount === 0) {\n            deferred.resolve(promises);\n        }\n        return deferred.promise;\n    });\n}\n\nPromise.prototype.all = function () {\n    return all(this);\n};\n\n/**\n * Returns the first resolved promise of an array. Prior rejected promises are\n * ignored.  Rejects only if all promises are rejected.\n * @param {Array*} an array containing values or promises for values\n * @returns a promise fulfilled with the value of the first resolved promise,\n * or a rejected promise if all promises are rejected.\n */\nQ.any = any;\n\nfunction any(promises) {\n    if (promises.length === 0) {\n        return Q.resolve();\n    }\n\n    var deferred = Q.defer();\n    var pendingCount = 0;\n    array_reduce(promises, function (prev, current, index) {\n        var promise = promises[index];\n\n        pendingCount++;\n\n        when(promise, onFulfilled, onRejected, onProgress);\n        function onFulfilled(result) {\n            deferred.resolve(result);\n        }\n        function onRejected(err) {\n            pendingCount--;\n            if (pendingCount === 0) {\n                var rejection = err || new Error(\"\" + err);\n\n                rejection.message = (\"Q can't get fulfillment value from any promise, all \" +\n                    \"promises were rejected. Last error message: \" + rejection.message);\n\n                deferred.reject(rejection);\n            }\n        }\n        function onProgress(progress) {\n            deferred.notify({\n                index: index,\n                value: progress\n            });\n        }\n    }, undefined);\n\n    return deferred.promise;\n}\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n/**\n * Waits for all promises to be settled, either fulfilled or\n * rejected.  This is distinct from `all` since that would stop\n * waiting at the first rejection.  The promise returned by\n * `allResolved` will never be rejected.\n * @param promises a promise for an array (or an array) of promises\n * (or values)\n * @return a promise for an array of promises\n */\nQ.allResolved = deprecate(allResolved, \"allResolved\", \"allSettled\");\nfunction allResolved(promises) {\n    return when(promises, function (promises) {\n        promises = array_map(promises, Q);\n        return when(all(array_map(promises, function (promise) {\n            return when(promise, noop, noop);\n        })), function () {\n            return promises;\n        });\n    });\n}\n\nPromise.prototype.allResolved = function () {\n    return allResolved(this);\n};\n\n/**\n * @see Promise#allSettled\n */\nQ.allSettled = allSettled;\nfunction allSettled(promises) {\n    return Q(promises).allSettled();\n}\n\n/**\n * Turns an array of promises into a promise for an array of their states (as\n * returned by `inspect`) when they have all settled.\n * @param {Array[Any*]} values an array (or promise for an array) of values (or\n * promises for values)\n * @returns {Array[State]} an array of states for the respective values.\n */\nPromise.prototype.allSettled = function () {\n    return this.then(function (promises) {\n        return all(array_map(promises, function (promise) {\n            promise = Q(promise);\n            function regardless() {\n                return promise.inspect();\n            }\n            return promise.then(regardless, regardless);\n        }));\n    });\n};\n\n/**\n * Captures the failure of a promise, giving an oportunity to recover\n * with a callback.  If the given promise is fulfilled, the returned\n * promise is fulfilled.\n * @param {Any*} promise for something\n * @param {Function} callback to fulfill the returned promise if the\n * given promise is rejected\n * @returns a promise for the return value of the callback\n */\nQ.fail = // XXX legacy\nQ[\"catch\"] = function (object, rejected) {\n    return Q(object).then(void 0, rejected);\n};\n\nPromise.prototype.fail = // XXX legacy\nPromise.prototype[\"catch\"] = function (rejected) {\n    return this.then(void 0, rejected);\n};\n\n/**\n * Attaches a listener that can respond to progress notifications from a\n * promise's originating deferred. This listener receives the exact arguments\n * passed to ``deferred.notify``.\n * @param {Any*} promise for something\n * @param {Function} callback to receive any progress notifications\n * @returns the given promise, unchanged\n */\nQ.progress = progress;\nfunction progress(object, progressed) {\n    return Q(object).then(void 0, void 0, progressed);\n}\n\nPromise.prototype.progress = function (progressed) {\n    return this.then(void 0, void 0, progressed);\n};\n\n/**\n * Provides an opportunity to observe the settling of a promise,\n * regardless of whether the promise is fulfilled or rejected.  Forwards\n * the resolution to the returned promise when the callback is done.\n * The callback can return a promise to defer completion.\n * @param {Any*} promise\n * @param {Function} callback to observe the resolution of the given\n * promise, takes no arguments.\n * @returns a promise for the resolution of the given promise when\n * ``fin`` is done.\n */\nQ.fin = // XXX legacy\nQ[\"finally\"] = function (object, callback) {\n    return Q(object)[\"finally\"](callback);\n};\n\nPromise.prototype.fin = // XXX legacy\nPromise.prototype[\"finally\"] = function (callback) {\n    if (!callback || typeof callback.apply !== \"function\") {\n        throw new Error(\"Q can't apply finally callback\");\n    }\n    callback = Q(callback);\n    return this.then(function (value) {\n        return callback.fcall().then(function () {\n            return value;\n        });\n    }, function (reason) {\n        // TODO attempt to recycle the rejection with \"this\".\n        return callback.fcall().then(function () {\n            throw reason;\n        });\n    });\n};\n\n/**\n * Terminates a chain of promises, forcing rejections to be\n * thrown as exceptions.\n * @param {Any*} promise at the end of a chain of promises\n * @returns nothing\n */\nQ.done = function (object, fulfilled, rejected, progress) {\n    return Q(object).done(fulfilled, rejected, progress);\n};\n\nPromise.prototype.done = function (fulfilled, rejected, progress) {\n    var onUnhandledError = function (error) {\n        // forward to a future turn so that ``when``\n        // does not catch it and turn it into a rejection.\n        Q.nextTick(function () {\n            makeStackTraceLong(error, promise);\n            if (Q.onerror) {\n                Q.onerror(error);\n            } else {\n                throw error;\n            }\n        });\n    };\n\n    // Avoid unnecessary `nextTick`ing via an unnecessary `when`.\n    var promise = fulfilled || rejected || progress ?\n        this.then(fulfilled, rejected, progress) :\n        this;\n\n    if (typeof process === \"object\" && process && process.domain) {\n        onUnhandledError = process.domain.bind(onUnhandledError);\n    }\n\n    promise.then(void 0, onUnhandledError);\n};\n\n/**\n * Causes a promise to be rejected if it does not get fulfilled before\n * some milliseconds time out.\n * @param {Any*} promise\n * @param {Number} milliseconds timeout\n * @param {Any*} custom error message or Error object (optional)\n * @returns a promise for the resolution of the given promise if it is\n * fulfilled before the timeout, otherwise rejected.\n */\nQ.timeout = function (object, ms, error) {\n    return Q(object).timeout(ms, error);\n};\n\nPromise.prototype.timeout = function (ms, error) {\n    var deferred = defer();\n    var timeoutId = setTimeout(function () {\n        if (!error || \"string\" === typeof error) {\n            error = new Error(error || \"Timed out after \" + ms + \" ms\");\n            error.code = \"ETIMEDOUT\";\n        }\n        deferred.reject(error);\n    }, ms);\n\n    this.then(function (value) {\n        clearTimeout(timeoutId);\n        deferred.resolve(value);\n    }, function (exception) {\n        clearTimeout(timeoutId);\n        deferred.reject(exception);\n    }, deferred.notify);\n\n    return deferred.promise;\n};\n\n/**\n * Returns a promise for the given value (or promised value), some\n * milliseconds after it resolved. Passes rejections immediately.\n * @param {Any*} promise\n * @param {Number} milliseconds\n * @returns a promise for the resolution of the given promise after milliseconds\n * time has elapsed since the resolution of the given promise.\n * If the given promise rejects, that is passed immediately.\n */\nQ.delay = function (object, timeout) {\n    if (timeout === void 0) {\n        timeout = object;\n        object = void 0;\n    }\n    return Q(object).delay(timeout);\n};\n\nPromise.prototype.delay = function (timeout) {\n    return this.then(function (value) {\n        var deferred = defer();\n        setTimeout(function () {\n            deferred.resolve(value);\n        }, timeout);\n        return deferred.promise;\n    });\n};\n\n/**\n * Passes a continuation to a Node function, which is called with the given\n * arguments provided as an array, and returns a promise.\n *\n *      Q.nfapply(FS.readFile, [__filename])\n *      .then(function (content) {\n *      })\n *\n */\nQ.nfapply = function (callback, args) {\n    return Q(callback).nfapply(args);\n};\n\nPromise.prototype.nfapply = function (args) {\n    var deferred = defer();\n    var nodeArgs = array_slice(args);\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.fapply(nodeArgs).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Passes a continuation to a Node function, which is called with the given\n * arguments provided individually, and returns a promise.\n * @example\n * Q.nfcall(FS.readFile, __filename)\n * .then(function (content) {\n * })\n *\n */\nQ.nfcall = function (callback /*...args*/) {\n    var args = array_slice(arguments, 1);\n    return Q(callback).nfapply(args);\n};\n\nPromise.prototype.nfcall = function (/*...args*/) {\n    var nodeArgs = array_slice(arguments);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.fapply(nodeArgs).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Wraps a NodeJS continuation passing function and returns an equivalent\n * version that returns a promise.\n * @example\n * Q.nfbind(FS.readFile, __filename)(\"utf-8\")\n * .then(console.log)\n * .done()\n */\nQ.nfbind =\nQ.denodeify = function (callback /*...args*/) {\n    if (callback === undefined) {\n        throw new Error(\"Q can't wrap an undefined function\");\n    }\n    var baseArgs = array_slice(arguments, 1);\n    return function () {\n        var nodeArgs = baseArgs.concat(array_slice(arguments));\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        Q(callback).fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n};\n\nPromise.prototype.nfbind =\nPromise.prototype.denodeify = function (/*...args*/) {\n    var args = array_slice(arguments);\n    args.unshift(this);\n    return Q.denodeify.apply(void 0, args);\n};\n\nQ.nbind = function (callback, thisp /*...args*/) {\n    var baseArgs = array_slice(arguments, 2);\n    return function () {\n        var nodeArgs = baseArgs.concat(array_slice(arguments));\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        function bound() {\n            return callback.apply(thisp, arguments);\n        }\n        Q(bound).fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n};\n\nPromise.prototype.nbind = function (/*thisp, ...args*/) {\n    var args = array_slice(arguments, 0);\n    args.unshift(this);\n    return Q.nbind.apply(void 0, args);\n};\n\n/**\n * Calls a method of a Node-style object that accepts a Node-style\n * callback with a given array of arguments, plus a provided callback.\n * @param object an object that has the named method\n * @param {String} name name of the method of object\n * @param {Array} args arguments to pass to the method; the callback\n * will be provided by Q and appended to these arguments.\n * @returns a promise for the value or error\n */\nQ.nmapply = // XXX As proposed by \"Redsandro\"\nQ.npost = function (object, name, args) {\n    return Q(object).npost(name, args);\n};\n\nPromise.prototype.nmapply = // XXX As proposed by \"Redsandro\"\nPromise.prototype.npost = function (name, args) {\n    var nodeArgs = array_slice(args || []);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Calls a method of a Node-style object that accepts a Node-style\n * callback, forwarding the given variadic arguments, plus a provided\n * callback argument.\n * @param object an object that has the named method\n * @param {String} name name of the method of object\n * @param ...args arguments to pass to the method; the callback will\n * be provided by Q and appended to these arguments.\n * @returns a promise for the value or error\n */\nQ.nsend = // XXX Based on Mark Miller's proposed \"send\"\nQ.nmcall = // XXX Based on \"Redsandro's\" proposal\nQ.ninvoke = function (object, name /*...args*/) {\n    var nodeArgs = array_slice(arguments, 2);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    Q(object).dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\nPromise.prototype.nsend = // XXX Based on Mark Miller's proposed \"send\"\nPromise.prototype.nmcall = // XXX Based on \"Redsandro's\" proposal\nPromise.prototype.ninvoke = function (name /*...args*/) {\n    var nodeArgs = array_slice(arguments, 1);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * If a function would like to support both Node continuation-passing-style and\n * promise-returning-style, it can end its internal promise chain with\n * `nodeify(nodeback)`, forwarding the optional nodeback argument.  If the user\n * elects to use a nodeback, the result will be sent there.  If they do not\n * pass a nodeback, they will receive the result promise.\n * @param object a result (or a promise for a result)\n * @param {Function} nodeback a Node.js-style callback\n * @returns either the promise or nothing\n */\nQ.nodeify = nodeify;\nfunction nodeify(object, nodeback) {\n    return Q(object).nodeify(nodeback);\n}\n\nPromise.prototype.nodeify = function (nodeback) {\n    if (nodeback) {\n        this.then(function (value) {\n            Q.nextTick(function () {\n                nodeback(null, value);\n            });\n        }, function (error) {\n            Q.nextTick(function () {\n                nodeback(error);\n            });\n        });\n    } else {\n        return this;\n    }\n};\n\nQ.noConflict = function() {\n    throw new Error(\"Q.noConflict only works when Q is used as a global\");\n};\n\n// All code before this point will be filtered from stack traces.\nvar qEndingLine = captureLine();\n\nreturn Q;\n\n});\n","import { Template } from '../nodes/aurum_element';\nimport { ownerSymbol } from './owner_symbol';\nimport { Div } from '../nodes/div';\nimport { Button } from '../nodes/button';\nimport { Input } from '../nodes/input';\nimport { Li } from '../nodes/li';\nimport { Span } from '../nodes/span';\nimport { Style } from '../nodes/style';\nimport { Ul } from '../nodes/ul';\nimport { P } from '../nodes/p';\nimport { Img } from '../nodes/img';\nimport { Link } from '../nodes/link';\nimport { Canvas } from '../nodes/canvas';\nimport { A } from '../nodes/a';\nimport { Article } from '../nodes/article';\nimport { Br } from '../nodes/br';\nimport { Form } from '../nodes/form';\nimport { Label } from '../nodes/label';\nimport { Ol } from '../nodes/ol';\nimport { Pre } from '../nodes/pre';\nimport { Progress } from '../nodes/progress';\nimport { Table } from '../nodes/table';\nimport { Td } from '../nodes/td';\nimport { Tr } from '../nodes/tr';\nimport { Th } from '../nodes/th';\nimport { TextArea } from '../nodes/textarea';\nimport { H1 } from '../nodes/h1';\nimport { H2 } from '../nodes/h2';\nimport { H3 } from '../nodes/h3';\nimport { H4 } from '../nodes/h4';\nimport { H5 } from '../nodes/h5';\nimport { H6 } from '../nodes/h6';\nimport { Header } from '../nodes/header';\nimport { Footer } from '../nodes/footer';\nimport { Nav } from '../nodes/nav';\nimport { B } from '../nodes/b';\nimport { I } from '../nodes/i';\nimport { Script } from '../nodes/script';\nimport { Abbr } from '../nodes/abbr';\nimport { Area } from '../nodes/area';\nimport { Aside } from '../nodes/aside';\nimport { Em } from '../nodes/em';\nimport { Heading } from '../nodes/heading';\nimport { IFrame } from '../nodes/iframe';\nimport { NoScript } from '../nodes/noscript';\nimport Q from 'q';\nimport { Select } from '../nodes/select';\nimport { Source } from '../nodes/source';\nimport { Title } from '../nodes/title';\nimport { Video } from '../nodes/video';\nimport { Tbody } from '../nodes/tbody';\nimport { Tfoot } from '../nodes/tfoot';\nimport { Thead } from '../nodes/thead';\nimport { Summary } from '../nodes/summary';\nimport { Details } from '../nodes/details';\nimport { Sub } from '../nodes/sub';\nimport { Sup } from '../nodes/sup';\nimport { Svg } from '../nodes/svg';\nimport { Data } from '../nodes/data';\nimport { Time } from '../nodes/time';\nconst nodeMap = {\n    button: Button,\n    div: Div,\n    input: Input,\n    li: Li,\n    span: Span,\n    style: Style,\n    ul: Ul,\n    p: P,\n    img: Img,\n    link: Link,\n    canvas: Canvas,\n    a: A,\n    article: Article,\n    br: Br,\n    form: Form,\n    label: Label,\n    ol: Ol,\n    pre: Pre,\n    progress: Progress,\n    table: Table,\n    td: Td,\n    tr: Tr,\n    th: Th,\n    textarea: TextArea,\n    h1: H1,\n    h2: H2,\n    h3: H3,\n    h4: H4,\n    h5: H5,\n    h6: H6,\n    header: Header,\n    footer: Footer,\n    nav: Nav,\n    b: B,\n    i: I,\n    script: Script,\n    abbr: Abbr,\n    area: Area,\n    aside: Aside,\n    audio: Audio,\n    em: Em,\n    heading: Heading,\n    iframe: IFrame,\n    noscript: NoScript,\n    option: Option,\n    q: Q,\n    select: Select,\n    source: Source,\n    title: Title,\n    video: Video,\n    tbody: Tbody,\n    tfoot: Tfoot,\n    thead: Thead,\n    summary: Summary,\n    details: Details,\n    sub: Sub,\n    sup: Sup,\n    svg: Svg,\n    data: Data,\n    time: Time,\n    template: Template\n};\nexport class Aurum {\n    static attach(aurumElement, dom) {\n        if (dom[ownerSymbol]) {\n            throw new Error('This node is already managed by aurum and cannot be used');\n        }\n        dom.appendChild(aurumElement.node);\n        aurumElement['handleAttach']();\n        dom[ownerSymbol] = aurumElement;\n    }\n    static detach(domNode) {\n        if (domNode[ownerSymbol]) {\n            domNode[ownerSymbol].node.remove();\n            domNode[ownerSymbol].handleDetach();\n            domNode[ownerSymbol].dispose();\n            domNode[ownerSymbol] = undefined;\n        }\n    }\n    static factory(node, args, ...innerNodes) {\n        if (typeof node === 'string') {\n            const type = node;\n            node = nodeMap[node];\n            if (node === undefined) {\n                throw new Error(`Node ${type} does not exist or is not supported`);\n            }\n        }\n        const children = [].concat(...innerNodes).filter((e) => e);\n        const templateMap = {};\n        let defaultTemplate;\n        let hasRef = false;\n        for (const c of children) {\n            if (typeof c === 'string') {\n                continue;\n            }\n            if (c instanceof Template && (!c.ref || c.ref === 'default')) {\n                defaultTemplate = c;\n            }\n            if (c.ref) {\n                templateMap[c.ref] = c;\n                hasRef = true;\n            }\n        }\n        args = (args !== null && args !== void 0 ? args : {});\n        if (defaultTemplate) {\n            args.template = defaultTemplate;\n        }\n        if (hasRef) {\n            args.templateMap = templateMap;\n        }\n        let instance;\n        if (node.prototype) {\n            instance = new node(args || {});\n        }\n        else {\n            instance = node(args || {});\n        }\n        instance.addChildren(children);\n        return instance;\n    }\n}\n//# sourceMappingURL=aurum.js.map"],"names":["EventEmitter","config","subscribeChannel","subscribeOnceChannel","throttleCount","onAfterFire","observable","makeObservable","cancellationToken","addCancelable","this","cancelAll","throttled","throttle","prototypeAccessors","subscriptions","length","oneTimeSubscriptions","linkEvent","eventToLink","linkedEvents","push","unlinkEvent","eventToUnlink","includes","Error","splice","indexOf","onSubscribe","onSubscribeOnce","onCancelAll","onCancel","swapSubscriptions","event","sub","subOnce","subscribe","callback","fire","createSubscription","hasSubscriptions","subscribeOnce","Promise","resolved","data","undefined","data2","data3","data4","data5","isFiring","i","let","forEach","cb","channel","that","subscription","facade","cancel","index","DataSource","initialValue","value","listeners","update","newValue","l","listen","_a","filter","filteredSource","pipe","targetDataSource","v","map","mappedSource","unique","uniqueSource","reduce","reducer","reduceSource","aggregate","otherSource","combinator","aggregatedSource","combine","combinedDataSource","debounce","time","debouncedDataSource","clearTimeout","timeout","buffer","bufferedDataSource","queue","queueDataSource","ArrayDataSource","pick","key","subDataSource","initialData","slice","onChange","getData","get","set","item","old","items","newState","swap","indexA","indexB","itemA","itemB","swapItems","ref","count","unshift","pop","merge","newData","removeRight","result","removeLeft","remove","clear","shift","toArray","FilteredArrayView","callbackfn","thisArg","toDataSource","stream","s","parent","initial","viewFilter","change","filteredItems","operation","ref$1","target","updateFilter","refresh","LinkedListNode","deleteNext","next","overNext","previous","deletePrevious","LinkedList","d","append","find","predicate","ptr","rootNode","element","lastNode","n","prepend","e","CancellationToken","cancelables","cancellables","_isCancelled","isCanceled","delegate","throwIfCancelled","console","log","removeCancelable","addDisposable","disposable","dispose","callIfNotCancelled","action","setTimeout","id","setInterval","clearInterval","requestAnimationFrame","cancelAnimationFrame","animationLoop","f","msg","chain","twoWays","registerDomEvent","eventEmitter","addEventListener","removeEventListener","c","const","ownerSymbol","Symbol","AurumElement","props","domNodeName","onDispose","onAttach","onDetach","template","node","create","initialize","_b","onCreate","call","Text","children","createEventHandlers","dataProps","Object","keys","startsWith","bindProps","class","handleClass","repeatModel","handleRepeat","assignStringSourceToAttribute","computedEventName","toUpperCase","defineProperty","bind","onClick","dataSource","repeatData","generate","render","index2","ref$2","rerenderPending","childNodes","addChildrenDom","child","handleDetach","getChildIndex","swapChildrenDom","addDomNodeAt","removeChild","setAttribute","handleAttach","isConnected","className","Array","isArray","join","p","resolveStringSource","source","document","createElement","hasChild","appendChild","nodeA","nodeB","childElementCount","insertBefore","hasParent","parentElement","removeChildAt","swapChildren","clearChildren","addChild","Template","childNodeToAurum","TextNode","text","toString","addChildAt","addChildren","nodes","internalDispose","detach","generator","textContent","createTextNode","A","Abbr","Area","Article","Aside","Audio","B","Br","Button","Canvas","Data","Details","Div","Em","Footer","Form","H1","H2","H3","H4","H5","H6","Header","Heading","I","IFrame","Img","Input","inputValueSource","_c","onInput","Label","Li","Link","Nav","NoScript","Ol","Option","P","Pre","Progress","Q","Script","Select","Source","Span","Switch","firstRender","templateMap","renderSwitch","state","lastValue","AurumRouter","urlDataSource","location","hash","substring","assign","window","Suspense","loader","then","newElement","Style","Sub","Summary","Sup","Svg","Table","Tbody","Td","TextArea","Tfoot","Th","Thead","Time","Title","Tr","Ul","Video","definition","hasStacks","stack","qFileName","qStartingLine","captureLine","noop","nextTick","head","task","tail","flushing","requestTick","isNodeJS","laterQueue","flush","domain","enter","runSingle","exit","process","setImmediate","MessageChannel","port1","onmessage","requestPortTick","port2","postMessage","runAfter","Function","uncurryThis","apply","arguments","QReturnValue","array_slice","prototype","array_reduce","basis","TypeError","array_indexOf","array_map","thisp","self","collect","object_create","Type","object_defineProperty","obj","prop","descriptor","object_hasOwnProperty","hasOwnProperty","object_keys","object","object_toString","ReturnValue","STACK_JUMP_SEPARATOR","makeStackTraceLong","error","promise","stacks","__minimumStackCounter__","stackCounter","configurable","stackString","lines","split","desiredLines","line","isInternalFrame","stackLine","filterStackString","getFileNameAndLineNumber","attempt1","exec","Number","attempt2","attempt3","fileNameAndLineNumber","lineNumber","qEndingLine","isPromiseAlike","deferred","defer","resolve","reject","notify","exception","fulfill","longStackSupport","longStackCounter","resolvedPromise","messages","progressListeners","promiseDispatch","op","operands","args","valueOf","nearerValue","nearer","isPromise","inspect","become","newPromise","message","reason","progress","progressListener","resolver","race","answerPs","len","fallback","inspected","when","fulfilled","rejected","progressed","env","Q_DEBUG","makeNodeResolver","all","passByCopy","x","y","spread","makePromise","done","_fulfilled","newException","_rejected","threw","_progressed","onerror","tap","fcall","thenResolve","thenReject","isPending","isFulfilled","isRejected","unhandledReasons","unhandledRejections","reportedUnhandledRejections","trackUnhandledRejections","resetUnhandledRejections","rejection","at","emit","atReport","untrackRejection","trackRejection","name","rhs","delete","post","dispatch","promises","pendingCount","snapshot","any","prev","current","err","allResolved","getUnhandledReasons","stopUnhandledRejectionTracking","master","isDef","array","async","makeGenerator","continuer","verb","arg","StopIteration","errback","isStopIteration","spawn","promised","del","mapply","send","mcall","invoke","fapply","fbind","concat","warn","allSettled","regardless","fail","fin","onUnhandledError","ms","timeoutId","code","delay","nfapply","nodeArgs","nfcall","nfbind","denodeify","baseArgs","nbind","nmapply","npost","nsend","nmcall","ninvoke","nodeify","nodeback","noConflict","bootstrap","module","nodeMap","button","div","input","li","span","style","ul","img","link","canvas","a","article","br","form","label","ol","pre","table","td","tr","th","textarea","h1","h2","h3","h4","h5","h6","header","footer","nav","b","script","abbr","area","aside","audio","em","heading","iframe","noscript","option","q","select","title","video","tbody","tfoot","thead","summary","details","sup","svg","Aurum","attach","aurumElement","dom","domNode","factory","type","defaultTemplate","instance","innerNodes","hasRef"],"mappings":"IAuBaA,EAuBZ,SAAYC,mBACNC,iBAAmB,QACnBC,qBAAuB,QACvBC,cAAgB,OAChBC,YAAc,GAEfJ,IACCA,EAAOK,iBACLC,iBAEFN,EAAOO,mBACVP,EAAOO,kBAAkBC,gCAAoBC,EAAKC,cAG/CV,EAAOW,iBACLC,SAAWZ,EAAOW,wFA7B1BE,EAAWC,oCACHL,KAAKR,iBAAiBc,QAG9BF,EAAWG,2CACHP,KAAKP,qBAAqBa,QA6B3BhB,YAAAkB,mBAAUC,GACXT,KAAKU,oBACJA,aAAe,SAGhBA,aAAaC,KAAKF,IAGjBnB,YAAAsB,qBAAYC,OACbb,KAAKU,eAAiBV,KAAKU,aAAaI,SAASD,SAC/C,IAAIE,MAAM,+CAGZL,aAAaM,OAAOhB,KAAKU,aAAaO,QAAQJ,GAAgB,IAG7DvB,YAAAO,0BACDG,KAAKkB,mBACJA,YAAc,IAAI5B,OAClB6B,gBAAkB,IAAI7B,OACtB8B,YAAc,IAAI9B,OAClB+B,SAAW,IAAI/B,IAIfA,YAAAgC,2BAAkBC,OAClBC,EAA8BxB,KAAKR,iBACnCiC,EAAkCzB,KAAKP,0BAExCD,iBAAmB+B,EAAM/B,sBACzBC,qBAAuB8B,EAAM9B,qBAElC8B,EAAM/B,iBAAmBgC,EACzBD,EAAM9B,qBAAuBgC,GAGvBnC,YAAAoC,mBAAUC,EAA4B7B,UACxCE,KAAKkB,kBACHA,YAAYU,OAGC5B,KAAK6B,mBAAmBF,EAAU3B,KAAKR,iBAAkBM,WAKtER,YAAAwC,mCACC9B,KAAKK,cAAgB,GAAKL,KAAKO,qBAAuB,GAEvDjB,YAAAyC,uBAAcjC,qBAChBE,KAAKmB,sBACHA,gBAAgBS,OAGf,IAAII,iBAAYC,KACjBJ,4BAAoBK,UAAYD,EAASC,IAAOlC,EAAKP,qBAAsBK,MAI3ER,YAAAW,0BACmBkC,IAArBnC,KAAKoB,kBACHA,YAAYQ,QAIZtC,YAAAsC,cAAKM,EAAUE,EAAWC,EAAWC,EAAWC,OAClDvC,KAAKG,UAAYH,KAAKN,gBAAkBM,KAAKG,UAAa,QAIzDqC,UAAW,UAEZlC,EAASN,KAAKR,iBAAiBc,OAE1BmC,EAAI,EAAGA,EAAInC,EAAQmC,SACtBjD,iBAAiBiD,GAAGd,SAASO,MAGnC5B,EAASN,KAAKP,qBAAqBa,OAE/BN,KAAKP,qBAAqBa,OAAS,EAAG,KACpCoC,IAAID,EAAI,EAAGA,EAAInC,EAAQmC,SACtBhD,qBAAqBgD,GAAGd,SAASO,QAElCzC,qBAAqBa,OAAS,KAIhCN,KAAKU,iBACH,UAAaV,KAAKU,kCAChBkB,KAAKM,EAAME,EAAOC,EAAOC,EAAOC,QAInCC,UAAW,EACZxC,KAAKL,YAAYW,OAAS,SACxBX,YAAYgD,iBAASC,UAAOA,WAC5BjD,YAAYW,OAAS,KAIpBhB,YAAAuC,4BACPF,EACAkB,EACA/C,OAEMgD,EAAa9C,KAEb+C,EAAqC,UAC1CpB,GAGKqB,EAAkC,CACvCC,oBACMA,OAAOF,EAAcF,iBAIFV,IAAtBrC,GACHA,EAAkBC,gCAAoB+C,EAAKG,OAAOF,EAAcF,KAEjEA,EAAQlC,KAAKoC,GAEN,cAAEA,SAAcC,IAGhB1D,YAAA2D,gBAAOF,EAAoCF,cAC9CK,EAAgBL,EAAQ5B,QAAQ8B,GAChCG,GAAS,IACPlD,KAAKwC,cAGJ7C,YAAYgB,uBAAWX,EAAKiD,OAAOF,EAAcF,OAF9C7B,OAAOkC,EAAO,gDC/LbC,EAIZ,SAAYC,QACNC,MAAQD,OACRE,UAAY,IAGXH,YAAAI,gBAAOC,QACRH,MAAQG,MACR,UAAWxD,KAAKsD,2BACpBG,QAAED,IAIGL,YAAAO,gBAAO/B,EAA8B7B,qBACtCwD,UAAU3C,KAAKgB,OACdsB,iBACCC,EAAQlD,EAAKsD,UAAUrC,QAAQU,IACtB,IAAXuB,KACEI,UAAUtC,OAAOkC,EAAO,WAGd,QAAjBS,EAAA7D,SAAiB,IAAA6D,GAAAA,EAAE5D,+BAGZkD,GAGDE,YAAAS,gBAAOjC,EAAiC7B,OACxC+D,EAAiB,IAAIV,cACtBO,gBAAQL,GACR1B,EAAS0B,IACZQ,EAAeN,OAAOF,IAErBvD,GACI+D,GAGDV,YAAAW,cAAKC,EAAiCjE,QACvC4D,gBAAQM,UAAMD,EAAiBR,OAAOS,IAAIlE,IAGzCqD,YAAAc,aAAOtC,EAA2B7B,OAClCoE,EAAe,IAAIf,EAAcxB,EAAS3B,KAAKqD,oBAChDK,gBAAQL,KACCE,OAAO5B,EAAS0B,KAC3BvD,GACIoE,GAGDf,YAAAgB,gBAAOrE,OACPsE,EAAe,IAAIjB,EAAcnD,KAAKqD,mBACvCK,gBAAQL,GACRA,IAAUe,EAAaf,OAC1Be,EAAab,OAAOF,IAEnBvD,GACIsE,GAGDjB,YAAAkB,gBAAOC,EAA4BlB,EAAiBtD,OACpDyE,EAAe,IAAIpB,EAAcC,eAClCM,gBAAQM,UAAMO,EAAahB,OAAOe,EAAQC,EAAalB,MAAOW,KAAKlE,GAEjEyE,GAGDpB,YAAAqB,mBAAgBC,EAA4BC,EAAsC5E,cAClF6E,EAAmB,IAAIxB,EAAcuB,EAAW1E,KAAKqD,MAAOoB,EAAYpB,oBAEzEK,yBAAaiB,EAAiBpB,OAAOmB,EAAW1E,EAAKqD,MAAOoB,EAAYpB,SAASvD,KAC1E4D,yBAAaiB,EAAiBpB,OAAOmB,EAAW1E,EAAKqD,MAAOoB,EAAYpB,SAASvD,GAEtF6E,GAGDxB,YAAAyB,iBAAQH,EAA4B3E,OACpC+E,EAAqB,IAAI1B,cAC1BW,KAAKe,EAAoB/E,KAClBgE,KAAKe,EAAoB/E,GAE9B+E,GAGD1B,YAAA2B,kBAASC,EAAcjF,OACvBkF,EAAsB,IAAI7B,cAG3BO,gBAAQM,GACZiB,kBAHGC,yBAKFF,EAAoBzB,OAAOS,IACzBe,IACDjF,GAEIkF,GAGD7B,YAAAgC,gBAAOJ,EAAcjF,OAEvBoF,EADEE,EAAqB,IAAIjC,EAE3BgC,EAAS,eAERzB,gBAAQM,GACZmB,EAAOxE,KAAKqD,GACPkB,gCAEO/C,EACViD,EAAmB7B,OAAO4B,KACjB,IACPJ,IAEFjF,GAEIsF,GAGDjC,YAAAkC,eAAMN,EAAcjF,OACpBwF,EAAkB,IAAIC,cAEvB7B,gBAAQM,GACZsB,EAAgB3E,KAAKqD,IACnBlE,GAEIwF,GAGDnC,YAAAqC,cAAKC,EAAc3F,SACnB4F,EAA2C,IAAIvC,EAAqB,QAAXQ,EAAC3D,KAAKqD,aAAK,IAAAM,OAAA,EAAAA,EAAG8B,gBAExE/B,gBAAQM,KAEGT,OADXS,MAAAA,EACkBA,EAAEyB,GAEFzB,IAEpBlE,GAEI4F,GAGDvC,YAAAlD,0BACDqD,UAAUhD,OAAS,OAabiF,EAIZ,SAAYI,QAELzD,KADFyD,EACSA,EAAYC,QAEZ,QAERC,SAAW,IAAIvG,gCAGrBc,EAAWE,6BACHN,KAAKkC,KAAK5B,QAGXiF,YAAAO,0BACC9F,KAAKkC,KAAK0D,SAGXL,YAAAQ,aAAI7C,UACHlD,KAAKkC,KAAKgB,IAGXqC,YAAAS,aAAI9C,EAAe+C,OACnBC,EAAMlG,KAAKkC,KAAKgB,GAClBgD,IAAQD,SAGP/D,KAAKgB,GAAS+C,OACdJ,SAASjE,KAAK,WAAa,iBAAmBsE,QAAY,QAAGhD,EAAOiD,MAAO,CAACF,GAAOG,SAAUpG,KAAKkC,SAGjGqD,YAAAc,cAAKC,EAAgBC,MACvBD,IAAWC,OAITC,EAAQxG,KAAKkC,KAAKoE,GAClBG,EAAQzG,KAAKkC,KAAKqE,QACnBrE,KAAKqE,GAAUC,OACftE,KAAKoE,GAAUG,OAEfZ,SAASjE,KAAK,WAAa,aAAe0E,SAAgBC,EAAQJ,MAAO,CAACK,EAAOC,GAAQL,SAAUpG,KAAKkC,SAGvGqD,YAAAmB,mBAAUF,EAAUC,MACtBD,IAAUC,OAIRH,EAAStG,KAAKkC,KAAKjB,QAAQuF,GAC3BD,EAASvG,KAAKkC,KAAKjB,QAAQwF,IACjB,IAAZH,IAA6B,IAAZC,SACfrE,KAAKqE,GAAUC,OACftE,KAAKoE,GAAUG,QAGhBZ,SAASjE,KAAK,WAAa,aAAe0E,SAAgBC,EAAQJ,MAAO,CAACK,EAAOC,GAAQL,SAAUpG,KAAKkC,SAGvGqD,YAAA5E,iFACDuB,MAAKvB,WAAKgG,EAAGR,QACbN,SAASjE,KAAK,WACP,SACXgF,MAAOT,EAAM7F,aACNN,KAAKkC,KAAK5B,OAAS6F,EAAM7F,aAChC6F,EACAC,SAAUpG,KAAKkC,QAIVqD,YAAAsB,oFACD3E,MAAK2E,cAAQF,EAAGR,QAChBN,SAASjE,KAAK,WAAa,UAAWgF,MAAOT,EAAM7F,aAAQ6F,QAAc,EAAGC,SAAUpG,KAAKkC,QAG1FqD,YAAAuB,mBACAb,EAAOjG,KAAKkC,KAAK4E,kBAClBjB,SAASjE,KAAK,WACP,eACJ,EACPsB,MAAOlD,KAAKkC,KAAK5B,OACjB6F,MAAO,CAACF,GACRG,SAAUpG,KAAKkC,OAGT+D,GAGDV,YAAAwB,eAAMC,OACPtE,IAAID,EAAI,EAAGA,EAAIuE,EAAQ1G,OAAQmC,IAC/BzC,KAAKkC,KAAKO,KAAOuE,EAAQvE,KACxBzC,KAAKM,OAASmC,OACZuD,IAAIvD,EAAGuE,EAAQvE,SAEf9B,KAAKqG,EAAQvE,KAIjBzC,KAAKM,OAAS0G,EAAQ1G,aACpB2G,YAAYjH,KAAKM,OAAS0G,EAAQ1G,SAIlCiF,YAAA0B,qBAAYL,OACZM,EAASlH,KAAKkC,KAAKlB,OAAOhB,KAAKM,OAASsG,EAAOA,QAChDf,SAASjE,KAAK,WAAa,eAAUgF,EAAO1D,MAAOlD,KAAKM,OAASsG,QAAcM,EAAQd,SAAUpG,KAAKkC,QAGrGqD,YAAA4B,oBAAWP,OACXM,EAASlH,KAAKkC,KAAKlB,OAAO,EAAG4F,QAC9Bf,SAASjE,KAAK,WAAa,eAAUgF,QAAc,QAAUM,EAAQd,SAAUpG,KAAKkC,QAGnFqD,YAAA6B,gBAAOnB,OACP/C,EAAQlD,KAAKkC,KAAKjB,QAAQgF,IACjB,IAAX/C,SACEhB,KAAKlB,OAAOkC,EAAO,QACnB2C,SAASjE,KAAK,WAAa,eAAiB,QAAGsB,EAAOiD,MAAO,CAACF,GAAOG,SAAUpG,KAAKkC,SAIpFqD,YAAA8B,qBACAlB,EAAQnG,KAAKkC,UACdA,KAAO,QACP2D,SAASjE,KAAK,WACP,SACXgF,MAAOT,EAAM7F,aACN,QACP6F,EACAC,SAAUpG,KAAKkC,QAIVqD,YAAA+B,qBACArB,EAAOjG,KAAKkC,KAAKoF,oBAClBzB,SAASjE,KAAK,WAAa,SAAUuE,MAAO,CAACF,SAAc,QAAU,EAAGG,SAAUpG,KAAKkC,OAErF+D,GAGDV,YAAAgC,0BACCvH,KAAKkC,KAAK0D,SAGXL,YAAA3B,gBAAOjC,EAAwB7B,UAC9B,IAAI0H,EAAkBxH,KAAM2B,EAAU7B,IAGvCyF,YAAA5C,iBAAQ8E,EAA2DC,UAClE1H,KAAKkC,KAAKS,QAAQ8E,EAAYC,IAG/BnC,YAAAoC,4BACAC,EAAS,IAAIzE,EAAWnD,KAAKkC,kBAC9B2D,SAASnE,mBAAWmG,KACjBtE,OAAOsE,EAAEzB,YAEVwB,8CAIIJ,cAIZ,WAAYM,EAA4BlE,EAAsB9D,cACvDiI,EAAWD,EAAgC5F,KAAK0B,OAAOA,eACvDmE,QAEDD,OAASA,OACTE,WAAapE,EAElBkE,EAAOjC,SAASnE,mBAAWuG,WACtBC,SACID,EAAOE,eACT,aACC,UAAcF,EAAO9B,wBACpBiB,uBAGF,UACJc,EAAgBD,EAAO9B,MAAMvC,OAAO5D,EAAKgI,kBACpCnB,cAAQF,EAAGuB,aAEZ,SACJA,EAAgBD,EAAO9B,MAAMvC,OAAO5D,EAAKgI,kBACpCrH,WAAKyH,EAAGF,aAET,WACE5B,EAAStG,EAAKkC,KAAKjB,QAAQgH,EAAO9B,MAAM,IACxCI,EAASvG,EAAKkC,KAAKjB,QAAQgH,EAAO9B,MAAM,KAC9B,IAAZG,IAA6B,IAAZC,KACfF,KAAKC,EAAQC,aAGf,cACErD,EAAQlD,EAAKkC,KAAKjB,QAAQgH,EAAOI,SACxB,IAAXnF,IACelD,EAAKgI,WAAWC,EAAO9B,MAAM,MAEzCH,IAAI9C,EAAO+E,EAAO9B,MAAM,MAExBiB,OAAOa,EAAOI,WAKrBvI,mGAGGwI,sBAAa1E,GACf5D,KAAKgI,aAAepE,SAGnBoE,WAAapE,OACb2E,wBAGIA,8BACJlB,YACCnF,EAAQlC,KAAK8H,OAAgC5F,KAAK0B,OAAO5D,KAAKgI,qBAC/DrH,WAAKgG,EAAGzE,OA5D2BqD,GCtU7BiD,EAKT,SAAYtG,QACHA,KAAOA,GAGTsG,YAAAC,yBACCzI,KAAK0I,KAAM,KACLC,EAAW3I,KAAK0I,KAAKA,UACtBA,KAAKA,UAAOvG,OACZuG,KAAKE,cAAWzG,OAChBuG,KAAOC,OACPD,KAAKE,SAAW5I,OAItBwI,YAAAK,0BACC7I,KAAK4I,gBACAA,SAAW5I,KAAK4I,SAASA,cACzBA,SAASF,UAAOvG,OAChByG,SAASA,cAAWzG,ICpB/B,IAAO2G,EAKZ,SAAY5G,6BAAY,SAClB5B,OAAS,EACd4B,EAAKS,iBAASoG,UAAM/I,EAAKgJ,OAAOD,MAG1BD,YAAAG,cAAKC,WACPC,EAAyBnJ,KAAKoJ,SAC3BD,IAAQD,EAAUC,IACxBA,EAAMA,EAAIT,YAGJS,GAGDL,YAAAE,gBAAOK,UACRrJ,KAAKoJ,UAAapJ,KAAKsJ,eAGtBA,SAASZ,KAAO,IAAIF,EAAea,QACnCC,SAASZ,KAAKE,SAAW5I,KAAKsJ,cAC9BA,SAAWtJ,KAAKsJ,SAASZ,WAJzBU,SAAWpJ,KAAKsJ,SAAW,IAAId,EAAea,QAO/C/I,SACE+I,GAGDP,YAAAnG,iBAAQC,QACTqG,cAAMM,UACV3G,EAAG2G,EAAErH,OACE,KAIF4G,YAAAU,iBAAQH,UACTrJ,KAAKoJ,UAAapJ,KAAKsJ,eAGtBF,SAASR,SAAW,IAAIJ,EAAea,QACvCD,SAASR,SAASF,KAAO1I,KAAKoJ,cAC9BA,SAAWpJ,KAAKoJ,SAASR,eAJzBQ,SAAWpJ,KAAKsJ,SAAW,IAAId,EAAea,QAM/C/I,SACE+I,GAGDP,YAAA1B,gBAAOiC,MACTA,IAAYrJ,KAAKoJ,SAASlH,UACxBkH,SAAWpJ,KAAKoJ,SAASV,UACzBpI,aACC,KACA4G,EAASlH,KAAKiJ,cAAMQ,UAAMA,EAAEf,MAAQe,EAAEf,KAAKxG,OAASmH,IACtDnC,IACCA,EAAOwB,OAAS1I,KAAKsJ,gBACnBA,SAAWpC,GAEjBA,EAAOuB,kBACFnI,gBC9DIoJ,EAQZ,uEACMC,YAAc,IAAIb,EAAWc,QAC7BC,cAAe,oCANrBzJ,EAAW0J,iCACH9J,KAAK6J,cAYNH,YAAA3J,uBAAcgK,eACfC,iBAAiB,yEAEjBL,YAAYX,OAAOe,GAEpB/J,KAAK2J,YAAYrJ,OAAS,KAC7B2J,QAAQC,IAAI,yEAGNlK,MAGD0J,YAAAS,0BAAiBJ,eAClBC,iBAAiB,8EAEjBL,YAAYvC,OAAO2C,GAEjB/J,MAGD0J,YAAAU,uBAAcC,eACftK,gCAAoBsK,EAAWC,YAE7BtK,MAGD0J,YAAAa,4BAAmBC,GACpBxK,KAAK8J,iBAKJJ,YAAAe,oBAAW7H,EAAcmC,kBAAe,OACxC2F,EAAKD,WAAW7H,EAAImC,QACrBhF,gCAAoBkF,aAAayF,MAGhChB,YAAAiB,qBAAY/H,EAAcmC,OAC1B2F,EAAKC,YAAY/H,EAAImC,QACtBhF,gCAAoB6K,cAAcF,MAGjChB,YAAAmB,+BAAsBjI,OACtB8H,EAAaG,sBAAsBjI,QACpC7C,gCAAoB+K,qBAAqBJ,MAGxChB,YAAAqB,uBAAcnI,OAChB8H,EAAaG,sBAAsB,SAASG,EAAEjG,GACjDnC,EAAGmC,GACH2F,EAAKG,sBAAsBG,UAGvBjL,gCAAoB+K,qBAAqBJ,MAGxChB,YAAAM,0BAAiBiB,MACnBjL,KAAK8J,iBACF,IAAI/I,MAAMkK,GAAO,oCAIlBvB,YAAAwB,eAAM7C,EAA2B8C,0BAAmB,GACtDA,KACID,MAAMlL,MAAM,QAGfD,gCAAoBsI,EAAOpF,WAEzBjD,MAMD0J,YAAA0B,0BAAiBC,EAAsC9J,EAAeI,YAC9C2J,iBAAiB/J,EAAOI,QACjD5B,gCAAoBsL,EAAaE,oBAAoBhK,EAAOI,KAE1D3B,MAMD0J,YAAAzG,kBACFjD,KAAK8J,kBAGJD,cAAe,OACfF,YAAYhH,iBAAS6I,UAAMA,WAC3B7B,iBAAcxH,2CC/GdsJ,IAAMC,EAAcC,OAAO,SC8CZC,EAgCrB,SAAYC,EAA0BC,gBAChCC,UAAYF,EAAME,eAClBC,SAAWH,EAAMG,cACjBC,SAAWJ,EAAMI,cAEjBH,YAAcA,OACdI,SAAWL,EAAMK,cACjBpM,kBAAoB,IAAI4J,OACxByC,KAAOnM,KAAKoM,OAAOP,QACnBQ,WAAWR,GACF,QAAdS,GAAA3I,EAAAkI,GAAMU,gBAAQ,IAAAD,GAAAA,EAAAE,KAAA7I,EAAG3D,OAGV4L,YAAAS,oBAAWR,GACZ7L,KAAKmM,gBAAgBM,YACrBC,SAAW,SAGZC,oBACJ,CACC,OACA,OACA,YACA,UACA,WACA,WACA,YACA,YACA,OACA,QACA,QACA,WACA,UACA,SACA,QACA,YACA,UACA,aACA,aACA,cAEDd,OAGKe,EAAYC,OAAOC,KAAKjB,GAAOjI,gBAAQ6F,UAAMA,EAAEsD,WAAW,OAAStD,EAAEsD,WAAW,gBACjFC,UAAU,CAAC,KAAM,YAAa,WAAY,QAAS,OAAQ,0BAAsBJ,GAAYf,GAE9FA,EAAMoB,YACJC,YAAYrB,EAAMoB,OAGpBpB,EAAMsB,kBACJC,aAAavB,EAAMsB,cAIhBvB,YAAAoB,mBAAUF,EAAgBjB,OAC9B,UAAaiB,kBAAM,CAAnBrB,IAAMhG,OACNoG,EAAMpG,SACJ4H,8BAA8BxB,EAAMpG,GAAMA,KAKxCmG,YAAAe,6BAAoBG,EAAgBjB,mBACzC7L,KAAKmM,gBAAgBM,2BAIpBhB,IAAMhG,OACJ6H,EAAoB,KAAO7H,EAAI,GAAG8H,cAAgB9H,EAAIG,MAAM,GAE9DyF,SACJwB,OAAOW,eAAexN,EAAMsN,EAAmB,CAC9CvH,sBACMsF,IACJA,EAAe,IAAIlI,GAEbkI,GAERrF,qBACO,IAAIjF,MAAMuM,EAAoB,oBAIlCzB,EAAMyB,KACLzB,EAAMyB,aAA8BnK,IAClCmK,GAAmB5J,OAAOmI,EAAMyB,GAAmB/J,OAAOkK,KAAK5B,EAAM6B,SAAU1N,EAAKF,mBAC3C,mBAA7B+L,EAAMyB,MAClBA,GAAmB5J,OAAOmI,EAAMyB,GAAoBtN,EAAKF,sBAG3DA,kBAAkBsL,iBAAiBpL,EAAKmM,KAAM1G,WAAMgE,UAAkBzJ,EAAKsN,GAAmB/J,OAAOkG,YAvBzFqD,uBA2BXlB,YAAAwB,sBAAaO,qBAEdC,WADFD,aAAsBpI,EACPoI,EAEA,IAAIpI,EAAqBoI,GAGxC3N,KAAK4N,WAAWtN,iBACdoM,UAAS/L,WAAKgG,EAAI3G,KAAK4N,WAAoCrG,UAAUtD,aAAKxB,UAAMzC,EAAKkM,SAAS2B,SAASpL,WACvGqL,eAGDF,WAAW/H,SAASnE,mBAAWuG,oBAC3BA,EAAOE,eACT,WAEE1B,EAAQzG,EAAK0M,SAASzE,EAAO8F,UAC9BrB,SAASzE,EAAO8F,QAFP/N,EAAK0M,SAASzE,EAAO/E,SAG9BwJ,SAASzE,EAAO/E,OAASuD,YAE1B,cACCiG,UAAS/L,WAAKgG,EAAGsB,EAAO9B,MAAMlC,aAAKxB,UAAMzC,EAAKkM,SAAS2B,SAASpL,gBAEjE,eACCiK,UAAS7F,cAAQuB,EAAGH,EAAO9B,MAAMlC,aAAKxB,UAAMzC,EAAKkM,SAAS2B,SAASpL,gBAEpE,WACCiK,SAAS1L,OAAOiH,EAAO/E,MAAO+E,EAAOrB,uBAGrC8F,SAASpM,OAAS,OAClBoM,UAAS/L,WAAKqN,EAAIhO,EAAK4N,WAAoCrG,UAAUtD,aAAKxB,UAAMzC,EAAKkM,SAAS2B,SAASpL,QAGzGqL,YAIGlC,YAAAkC,6BACL9N,KAAKiO,iBAILjO,KAAKmM,gBAAgBM,iCAKnB/J,IAAID,EAAI,EAAGA,EAAIzC,EAAK0M,SAASpM,OAAQmC,IAAK,IAC1CzC,EAAKmM,KAAK+B,WAAW5N,QAAUmC,EAAG,GAChC0L,eAAenO,EAAK0M,SAAS9G,MAAMnD,EAAGzC,EAAK0M,SAASpM,kBAGtDN,EAAKmM,KAAK+B,WAAWzL,GAAGiJ,KAAiB1L,EAAK0M,SAASjK,GAAI,KACzDzC,EAAK0M,SAAS5L,SAASd,EAAKmM,KAAK+B,WAAWzL,GAAGiJ,IAA+B,KAC5E0C,EAAQpO,EAAKmM,KAAK+B,WAAWzL,GACnC2L,EAAMhH,SACNgH,EAAM1C,GAAa2C,gCAKdnL,EAAQlD,EAAKsO,cAActO,EAAK0M,SAASjK,GAAG0J,OACnC,IAAXjJ,IACEqL,gBAAgB9L,EAAGS,KAEnBsL,aAAaxO,EAAK0M,SAASjK,GAAG0J,KAAM1J,SAIrCzC,EAAKmM,KAAK+B,WAAW5N,OAASN,EAAK0M,SAASpM,QAAQ,KACpD8N,EAAQpO,EAAKmM,KAAK+B,WAAWlO,EAAKmM,KAAK+B,WAAW5N,OAAS,KAC5D6L,KAAKsC,YAAYL,GACtBA,EAAM1C,GAAa2C,iBAEfJ,iBAAkB,SAEnBA,iBAAkB,IAGdrC,YAAAyB,uCAA8BnL,EAAoBuD,cACvDzF,KAAKmM,gBAAgBM,OAIL,iBAATvK,OACLiK,KAAKuC,aAAajJ,EAAKvD,IAExBA,EAAKmB,YACH8I,KAAKuC,aAAajJ,EAAKvD,EAAKmB,OAElCnB,EAAKiC,OAAOnE,KAAKF,mBAAmB4D,gBAAQM,UAAOhE,EAAKmM,KAAqBuC,aAAajJ,EAAKzB,IAAIhE,KAAKF,sBAIlG8L,YAAA+C,iCACH3O,KAAKmM,KAAKyC,YAAa,CACb,QAAbtC,EAAAtM,KAAKgM,gBAAQ,IAAAM,GAAAA,EAAAE,KAAbxM,KAAgBA,UACX,UAAeA,KAAKmM,KAAK+B,gCACvBxC,GAAaiD,iBAMd/C,YAAAyC,kCACFrO,KAAKmM,KAAKyC,YAAa,CACd,QAAbtC,EAAAtM,KAAKiM,gBAAQ,IAAAK,GAAAA,EAAAE,KAAbxM,KAAgBA,UACX,UAAeA,KAAKmM,KAAK+B,2BAAY,CAArCzC,IAAM2C,OACNA,EAAM1C,IACT0C,EAAM1C,GAAa2C,kBAMfzC,YAAAsB,qBAAYhL,mBACflC,KAAKmM,gBAAgBM,SAIL,iBAATvK,OACLiK,KAAK0C,UAAY3M,OAChB,GAAIA,aAAgBiB,EACtBjB,EAAKmB,QACJyL,MAAMC,QAAQ7M,EAAKmB,aACjB8I,KAAK0C,UAAY3M,EAAKmB,MAAM2L,KAAK,KACtC9M,EAAKiC,OAAOnE,KAAKF,mBAAmB4D,oBAC7ByI,KAAqB0C,UAAa3M,EAAKmB,MAAmB2L,KAAK,MACnEhP,KAAKF,0BAEHqM,KAAK0C,UAAY3M,EAAKmB,MAC3BnB,EAAKiC,OAAOnE,KAAKF,mBAAmB4D,oBAC7ByI,KAAqB0C,UAAY3M,EAAKmB,OAC1CrD,KAAKF,uBAGLqE,OAAOnE,KAAKF,mBAAmB4D,gBAAQM,UAAQhE,EAAKmM,KAAqB0C,UAAY7K,GAAIhE,KAAKF,uBAC7F,KACAuD,EAAgBnB,EAAKmC,gBAAgB4K,EAAGzD,SAC5B,iBAANA,EACAyD,MAAKzD,EAEXA,EAAEnI,MACK4L,MAAKzD,EAAO,MAEfyD,GAGP,SACE9C,KAAK0C,UAAYxL,MACjB,UAAWnB,kBAAM,CAAjBuJ,IAAMhJ,OACNA,aAAaU,GAChBV,EAAE0B,OAAOnE,KAAKF,mBAAmB4D,gBAAQM,OAClCX,EAAgBnB,EAAKmC,gBAAgB4K,EAAGzD,SAC5B,iBAANA,EACAyD,MAAKzD,EAEXA,EAAEnI,MACK4L,MAAKzD,EAAO,MAEfyD,GAGP,MACG9C,KAAqB0C,UAAYxL,GACrCrD,KAAKF,sBAMF8L,YAAAsD,6BAAoBC,SACP,iBAAXA,EACHA,EAEAA,EAAO9L,OAINuI,YAAAQ,gBAAOP,OACVM,EAAOiD,SAASC,cAAcrP,KAAK8L,oBACzCK,EAAKT,GAAe1L,KACbmM,GAGEP,YAAA0C,uBAAcnC,WACnB1J,EAAI,QACY0J,EAAK+B,2BAAY,WACtB/B,SACN1J,aAID,GAGCmJ,YAAA0D,kBAASnD,MACdnM,KAAKmM,gBAAgBM,WAClB,IAAI1L,MAAM,sCAGZ,UAAeoL,EAAKO,mCACVP,SACN,SAGF,GAGEP,YAAAuC,wBAAezB,MACpB1M,KAAKmM,gBAAgBM,WAClB,IAAI1L,MAAM,sCAGZ,UAAe2L,kBAAU,CAAzBjB,IAAM2C,YACLjC,KAAKoD,YAAYnB,EAAMjC,MAC5BiC,EAAMO,iBAIE/C,YAAA2C,yBAAgBjI,EAAgBC,MACrCvG,KAAKmM,gBAAgBM,WAClB,IAAI1L,MAAM,qCAGbuF,IAAWC,OAITiJ,EAAQxP,KAAKmM,KAAKO,SAASpG,GAC3BmJ,EAAQzP,KAAKmM,KAAKO,SAASnG,GACjCiJ,EAAMpI,SACNqI,EAAMrI,SACFd,EAASC,QACPiI,aAAaiB,EAAsBnJ,QACnCkI,aAAagB,EAAsBjJ,UAEnCiI,aAAagB,EAAsBjJ,QACnCiI,aAAaiB,EAAsBnJ,MAIhCsF,YAAA4C,sBAAarC,EAA0BjJ,MAC5ClD,KAAKmM,gBAAgBM,WAClB,IAAI1L,MAAM,kCAGbmC,GAASlD,KAAKmM,KAAKuD,wBACjBvD,KAAKoD,YAAYpD,GACtBA,EAAKT,GAAaiD,sBAEbxC,KAAKwD,aAAaxD,EAAMnM,KAAKmM,KAAKO,SAASxJ,IAChDiJ,EAAKT,GAAaiD,iBAIb/C,YAAAxE,kBACFpH,KAAK4P,kBACHzD,KAAK0D,cAAcnE,GAAa+C,YAAYzO,KAAKmM,OAIjDP,YAAAgE,6BACG5P,KAAKmM,KAAK0D,eAGbjE,YAAAgD,8BACC5O,KAAKmM,KAAKyC,aAGXhD,YAAA6C,qBAAYL,OACZlL,EAAQlD,KAAK0M,SAASzL,QAAQmN,IACrB,IAAXlL,QACEwJ,SAAS1L,OAAOkC,EAAO,QAExB4K,UAGClC,YAAAkE,uBAAc5M,QACfwJ,SAAS1L,OAAOkC,EAAO,QACvB4K,UAGClC,YAAAmE,sBAAazJ,EAAgBC,MAC/BD,IAAWC,OAITiJ,EAAQxP,KAAK0M,SAASpG,QAEvBoG,SAASpG,GADAtG,KAAK0M,SAASnG,QAEvBmG,SAASnG,GAAUiJ,OACnB1B,WAGClC,YAAAoE,4BACFhQ,KAAKmM,gBAAgBM,WAClB,IAAI1L,MAAM,uCAGZ2L,SAASpM,OAAS,OAClBwN,UAGClC,YAAAqE,kBAAS7B,MACXpO,KAAKmM,gBAAgBM,WAClB,IAAI1L,MAAM,kCAGbqN,aAAiB8B,MAGblQ,KAAKmQ,iBAAiB/B,QAEzB1B,SAAS/L,KAAKyN,QACdN,WAGElC,YAAAuE,0BAAiB/B,SACH,iBAAVA,GAAsBA,aAAiBjL,EACjDiL,EAAQ,IAAIgC,EAAS,MACdhC,IAEKA,aAAiBxC,IAC7BwC,EAAQ,IAAIgC,EAAS,CACpBC,KAAOjC,EAAckC,cAGhBlC,GAGDxC,YAAA2E,oBAAWnC,EAAkBlL,MAC/BlD,KAAKmM,gBAAgBM,WAClB,IAAI1L,MAAM,kCAGbqN,aAAiB8B,MAIblQ,KAAKmQ,iBAAiB/B,QACzB1B,SAAS1L,OAAOkC,EAAO,EAAGkL,QAC1BN,WAGClC,YAAA4E,qBAAYC,MACdzQ,KAAKmM,gBAAgBM,WAClB,IAAI1L,MAAM,qCAGI,IAAjB0P,EAAMnQ,WAIL,UAAemQ,uBACdR,gBAIArE,YAAAtB,wBACDoG,iBAAgB,IAGd9E,YAAA8E,yBAAgBC,cAClB7Q,kBAAkBmD,SACnB0N,QACEvJ,aAED,UAAepH,KAAKmM,KAAK+B,2BAAY,CAArCzC,IAAM2C,OACNA,EAAM1C,MACHA,GAAagF,iBAAgB,GAGvB,QAAdpE,EAAAtM,KAAK+L,iBAAS,IAAAO,GAAAA,EAAAE,KAAdxM,KAAiBA,aAWNkQ,cAIZ,WAAYrE,eACLA,EAAO,iBACRlF,IAAMkF,EAAMlF,SACZkH,SAAWhC,EAAM+E,iGAPShF,GAiBpBwE,cACZ,WAAYvE,0BACLA,EAAO,YACTA,EAAMwE,gBAAgBlN,GACzB0I,EAAMwE,KAAK3M,gBAAQM,UAAOhE,EAAKmM,KAAK0E,YAAc7M,GAAIhE,KAAKF,mHAInDsM,gBAAOP,OACVM,EAAOiD,SAAS0B,eAAe9Q,KAAKkP,oBAAoBrD,EAAMwE,cACpElE,EAAKT,GAAe1L,KACbmM,MAXqBP,GCpjBjBmF,cAGZ,WAAYlF,eACLA,EAAO,UACRmB,UAAU,CAAC,OAAQ,UAAWnB,0FALdD,GCFVoF,cACZ,WAAYnF,eACLA,EAAO,+FAFWD,GCAbqF,cAGZ,WAAYpF,eACLA,EAAO,+FAJWD,GCAbsF,cACZ,WAAYrF,eACLA,EAAO,kGAFcD,GCAhBuF,cACZ,WAAYtF,eACLA,EAAO,gGAFYD,GCMdwF,cAGZ,WAAYvF,eACLA,EAAO,cACRmB,UAAU,CAAC,WAAY,WAAY,OAAQ,QAAS,UAAW,OAAQnB,0FALnDD,GCNdyF,cACZ,WAAYxF,eACLA,EAAO,4FAFQD,GCAV0F,cAGZ,WAAYzF,eACLA,EAAO,6FAJSD,GCCX2F,cAGZ,WAAY1F,eACLA,EAAO,eACRmB,UAAU,CAAC,YAAanB,0FALHD,GCCf4F,cAGZ,WAAY3F,eACLA,EAAO,eACRmB,UAAU,CAAC,QAAS,UAAWnB,0FALVD,GCDf6F,cAGZ,WAAY5F,eACLA,EAAO,aACRmB,UAAU,CAAC,WAAYnB,0FALJD,GCDb8F,cAGZ,WAAY7F,eACLA,EAAO,kGAJcD,GCAhB+F,cAGZ,WAAY9F,eACLA,EAAO,8FAJUD,GCAZgG,cACZ,WAAY/F,eACLA,EAAO,6FAFSD,GCAXiG,cACZ,WAAYhG,eACLA,EAAO,iGAFaD,GCAfkG,cAGZ,WAAYjG,eACLA,EAAO,+FAJWD,GCAbmG,cACZ,WAAYlG,eACLA,EAAO,6FAFSD,GCAXoG,cACZ,WAAYnG,eACLA,EAAO,6FAFSD,GCAXqG,cACZ,WAAYpG,eACLA,EAAO,6FAFSD,GCAXsG,cACZ,WAAYrG,eACLA,EAAO,6FAFSD,GCAXuG,cACZ,WAAYtG,eACLA,EAAO,6FAFSD,GCAXwG,cACZ,WAAYvG,eACLA,EAAO,6FAFSD,GCAXyG,cACZ,WAAYxG,eACLA,EAAO,iGAFaD,GCAf0G,cAGZ,WAAYzG,eACLA,EAAO,kGAJcD,GCAhB2G,cACZ,WAAY1G,eACLA,EAAO,4FAFQD,GCOV4G,cAGZ,WAAY3G,eACLA,EAAO,eACRmB,UAAU,CAAC,MAAO,SAAU,QAAS,SAAU,QAAS,kBAAmB,uBAAwBnB,0FAL9ED,GCCf6G,cAGZ,WAAY5G,eACLA,EAAO,YACRmB,UAAU,CAAC,MAAO,MAAO,QAAS,SAAU,iBAAkB,QAAS,SAAU,UAAWnB,0FAL1ED,GCoBZ8G,cAMZ,WAAY7G,gCACLA,EAAO,SACTA,EAAM8G,uBACJxG,KAAK9I,MAA0DiJ,OAArDA,EAAqB3I,OAArBA,EAAGkI,EAAMzI,cAAYO,EAAIkI,EAAM8G,iBAAiBtP,OAAKiJ,EAAI,GACxET,EAAM8G,iBAAiBxO,SAAST,gBAAQL,UAAWrD,EAAKmM,KAAK9I,MAAQA,GAAQrD,KAAKF,yBAE7EqM,KAAK9I,MAA0BuP,OAArBA,EAAG/G,EAAMzI,cAAYwP,EAAI,QAEpC5F,UACJ,CACC,cACA,WACA,WACA,SACA,MACA,eACA,YACA,UACA,iBACA,aACA,cACA,aACA,iBACA,aACA,MACA,YACA,MACA,YACA,UACA,WACA,WACA,QAEDnB,QAEIc,oBAAoB,CAAC,QAAS,UAAWd,GAE1CA,EAAM8G,uBACJE,QAAQ5O,aAAKgL,UAAMjP,EAAKmM,KAAK9I,QAAOS,KAAK+H,EAAM8G,yGA5C5B/G,GC3BdkH,cAGZ,WAAYjH,eACLA,EAAO,cACRmB,UAAU,CAAC,OAAQnB,0FALCD,GCDdmH,cAGZ,WAAYlH,eACLA,EAAO,6FAJSD,GCMXoH,cAGZ,WAAYnH,eACLA,EAAO,aACRmB,UAAU,CAAC,OAAQ,MAAO,QAAS,KAAM,WAAY,QAASnB,0FAL3CD,GCNbqH,cACZ,WAAYpH,eACLA,EAAO,8FAFUD,GCAZsH,cACZ,WAAYrH,eACLA,EAAO,mGAFeD,GCAjBuH,cAGZ,WAAYtH,eACLA,EAAO,6FAJSD,GCAXwH,cAGZ,WAAYvH,eACLA,EAAO,iGAJaD,GCAfyH,cAGZ,WAAYxH,eACLA,EAAO,4FAJQD,GCAV0H,cAGZ,WAAYzH,eACLA,EAAO,8FAJUD,GCGZ2H,cAGZ,WAAY1H,eACLA,EAAO,iBACRmB,UAAU,CAAC,MAAO,SAAUnB,0FALLD,GCHjB4H,cAGZ,WAAY3H,eACLA,EAAO,4FAJQD,GCMV6H,eAGZ,WAAY5H,eACLA,EAAO,eACRmB,UAAU,CAAC,MAAO,QAAS,QAAS,YAAa,WAAY,QAASnB,0FALjDD,GCNf8H,eAGZ,WAAY7H,eACLA,EAAO,iGAJaD,GCKf+H,eAGZ,WAAY9H,eACLA,EAAO,eACRmB,UAAU,CAAC,MAAO,SAAU,QAAS,QAAS,QAASnB,0FALlCD,GCLfgI,eAGZ,WAAY/H,eACLA,EAAO,+FAJWD,GCAbiI,eAMZ,WAAYhI,0BACLA,EAAO,eALNiI,aAAc,OAOhBC,YAAclI,EAAMkI,iBACpBC,aAAanI,EAAMoI,MAAM5Q,OAC9BwI,EAAMoI,MAAMvQ,gBAAQxB,KACd8R,aAAa9R,IAChBlC,KAAKF,mHAGCkU,sBAAa9R,YAClBA,IAASlC,KAAKkU,WAAalU,KAAK8T,oBAC9BI,UAAYhS,OACZ4R,aAAc,OACd9D,gBACD9N,MAAAA,EAAqC,KAClCgK,EAA4CvI,OAApCA,EAAG3D,KAAK+T,YAAY7R,EAAKoO,aAAW3M,EAAI3D,KAAKkM,YACvDA,EAAU,KACPhF,EAASgF,EAAS2B,gBACnBoC,SAAS/I,SAET,GAAIlH,KAAKkM,SAAU,KACnBhF,EAASlH,KAAKkM,SAAS2B,gBACxBoC,SAAS/I,QA7BuB0E,GCJ5BuI,eACZ,WAAYtI,OACLuI,EAAgB,IAAIjR,EAAWkR,SAASC,KAAKC,UAAU,gBACxD1H,OAAA2H,OAAA3H,OAAA2H,OAAA,GACD3I,GAAK,CACRoI,MAAOG,KAGRK,OAAOnJ,iBAAiB,wBACvB8I,EAAc7Q,OAAO8Q,SAASC,KAAKC,UAAU,6FATfV,ICCpBa,eAIZ,WAAY7I,0BACLA,EAAO,YAEbA,EAAM8I,SAASC,cAAMC,KACf7E,kBACAC,SAAS4E,4FAT0BjJ,GCI9BkJ,eAGZ,WAAYjJ,eACLA,EAAO,cACRmB,UAAU,CAAC,SAAUnB,0FALDD,GCDdmJ,eACZ,WAAYlJ,eACLA,EAAO,8FAFUD,GCAZoJ,eACZ,WAAYnJ,eACLA,EAAO,kGAFcD,GCAhBqJ,eACZ,WAAYpJ,eACLA,EAAO,8FAFUD,GCEZsJ,eACZ,WAAYrJ,eACLA,EAAO,YACRmB,UAAU,CAAC,QAAS,UAAWnB,0FAHbD,GCFZuJ,eAGZ,WAAYtJ,eACLA,EAAO,gGAJYD,GCAdwJ,eACZ,WAAYvJ,eACLA,EAAO,gGAFYD,GCAdyJ,eAGZ,WAAYxJ,eACLA,EAAO,6FAJSD,GCoBX0J,eAMZ,WAAYzJ,gCACLA,EAAO,YACTA,EAAM8G,uBACJxG,KAAK9I,MAA0DiJ,OAArDA,EAAqB3I,OAArBA,EAAGkI,EAAMzI,cAAYO,EAAIkI,EAAM8G,iBAAiBtP,OAAKiJ,EAAI,GACxET,EAAM8G,iBAAiBxO,SAAST,gBAAQL,UAAWrD,EAAKmM,KAAK9I,MAAQA,GAAQrD,KAAKF,yBAE7EqM,KAAK9I,MAA0BuP,OAArBA,EAAG/G,EAAMzI,cAAYwP,EAAI,QAEpC5F,UACJ,CAAC,cAAe,WAAY,WAAY,OAAQ,OAAQ,eAAgB,YAAa,MAAO,YAAa,MAAO,YAAa,WAAY,QACzInB,QAEIc,oBAAoB,CAAC,QAAS,UAAWd,GAE1CA,EAAM8G,uBACJE,QAAQ5O,aAAKgL,UAAMjP,EAAKmM,KAAK9I,QAAOS,KAAK+H,EAAM8G,yGArBzB/G,GCpBjB2J,eACZ,WAAY1J,eACLA,EAAO,gGAFYD,GCAd4J,eAGZ,WAAY3J,eACLA,EAAO,6FAJSD,GCAX6J,eACZ,WAAY5J,eACLA,EAAO,gGAFYD,GCCd8J,eAGZ,WAAY7J,eACLA,EAAO,aACRmB,UAAU,CAAC,YAAanB,0FALLD,GCDb+J,eAGZ,WAAY9J,eACLA,EAAO,gGAJYD,GCAdgK,eAGZ,WAAY/J,eACLA,EAAO,6FAJSD,GCAXiK,eAGZ,WAAYhK,eACLA,EAAO,6FAJSD,GCSXkK,eAGZ,WAAYjK,eACLA,EAAO,cACRmB,UAAU,CAAC,WAAY,WAAY,OAAQ,QAAS,UAAW,MAAO,SAAU,QAAS,UAAWnB,0FALhFD,qBCS3B,IAAWmK,EAAAA,EAkDR,WAGH,IAAIC,GAAY,EAChB,IACI,MAAM,IAAIjV,MACZ,MAAO0I,GACLuM,IAAcvM,EAAEwM,MAKpB,IACIC,EADAC,EAAgBC,IAMhBC,EAAO,aAIPC,EAAU,WAEV,IAAIC,EAAO,CAACC,UAAM,EAAQ9N,KAAM,MAC5B+N,EAAOF,EACPG,GAAW,EACXC,OAAc,EACdC,GAAW,EAEXC,EAAa,GAEjB,SAASC,IAIL,IAFA,IAAIN,EAAMO,EAEHR,EAAK7N,MAER8N,GADAD,EAAOA,EAAK7N,MACA8N,KACZD,EAAKC,UAAO,GACZO,EAASR,EAAKQ,UAGVR,EAAKQ,YAAS,EACdA,EAAOC,SAEXC,EAAUT,EAAMO,GAGpB,KAAOF,EAAWvW,QAEd2W,EADAT,EAAOK,EAAW/P,OAGtB4P,GAAW,EAGf,SAASO,EAAUT,EAAMO,GACrB,IACIP,IAEF,MAAO/M,GACL,GAAImN,EAeA,MARIG,GACAA,EAAOG,OAEXzM,WAAWqM,EAAO,GACdC,GACAA,EAAOC,QAGLvN,EAKNgB,WAAW,WACP,MAAMhB,GACP,GAIPsN,GACAA,EAAOG,OAiBf,GAbAZ,EAAW,SAAUE,GACjBC,EAAOA,EAAK/N,KAAO,CACf8N,KAAMA,EACNO,OAAQH,GAAYO,QAAQJ,OAC5BrO,KAAM,MAGLgO,IACDA,GAAW,EACXC,MAIe,iBAAZQ,SACgB,qBAAvBA,QAAQ7G,YAAqC6G,QAAQb,SASrDM,GAAW,EAEXD,EAAc,WACVQ,QAAQb,SAASQ,SAGlB,GAA4B,mBAAjBM,aAGVT,EADkB,oBAAXlC,OACO2C,aAAa3J,KAAKgH,OAAQqC,GAE1B,WACVM,aAAaN,SAIlB,GAA8B,oBAAnBO,eAAgC,CAG9C,IAAIxU,EAAU,IAAIwU,eAGlBxU,EAAQyU,MAAMC,UAAY,WACtBZ,EAAca,EACd3U,EAAQyU,MAAMC,UAAYT,EAC1BA,KAEJ,IAAIU,EAAkB,WAGlB3U,EAAQ4U,MAAMC,YAAY,IAE9Bf,EAAc,WACVlM,WAAWqM,EAAO,GAClBU,UAKJb,EAAc,WACVlM,WAAWqM,EAAO,IAa1B,OAPAR,EAASqB,SAAW,SAAUnB,GAC1BK,EAAWlW,KAAK6V,GACXE,IACDA,GAAW,EACXC,MAGDL,EAlJG,GA+JV9J,EAAOoL,SAASpL,KACpB,SAASqL,EAAY7M,GACjB,OAAO,WACH,OAAOwB,EAAKsL,MAAM9M,EAAG+M,YAO7B,IA+FIC,EA/FAC,EAAcJ,EAAY/I,MAAMoJ,UAAUtS,OAE1CuS,EAAeN,EACf/I,MAAMoJ,UAAU7T,QAAU,SAAU1C,EAAUyW,GAC1C,IAAIlV,EAAQ,EACR5C,EAASN,KAAKM,OAElB,GAAyB,IAArByX,UAAUzX,OAGV,OAAG,CACC,GAAI4C,KAASlD,KAAM,CACfoY,EAAQpY,KAAKkD,KACb,MAEJ,KAAMA,GAAS5C,EACX,MAAM,IAAI+X,UAKtB,KAAOnV,EAAQ5C,EAAQ4C,IAEfA,KAASlD,OACToY,EAAQzW,EAASyW,EAAOpY,KAAKkD,GAAQA,IAG7C,OAAOkV,IAIXE,EAAgBT,EAChB/I,MAAMoJ,UAAUjX,SAAW,SAAUoC,GAEjC,IAAK,IAAIZ,EAAI,EAAGA,EAAIzC,KAAKM,OAAQmC,IAC7B,GAAIzC,KAAKyC,KAAOY,EACZ,OAAOZ,EAGf,OAAQ,IAIZ8V,EAAYV,EACZ/I,MAAMoJ,UAAUjU,KAAO,SAAUtC,EAAU6W,GACvC,IAAIC,EAAOzY,KACP0Y,EAAU,GAId,OAHAP,EAAaM,EAAM,SAAUtW,EAAWkB,EAAOH,GAC3CwV,EAAQ/X,KAAKgB,EAAS6K,KAAKgM,EAAOnV,EAAOH,EAAOuV,UACjD,GACIC,IAIXC,EAAgB9L,OAAOT,QAAU,SAAU8L,GAC3C,SAASU,KAET,OADAA,EAAKV,UAAYA,EACV,IAAIU,GAGXC,EAAwBhM,OAAOW,gBAAkB,SAAUsL,EAAKC,EAAMC,GAEtE,OADAF,EAAIC,GAAQC,EAAW3V,MAChByV,GAGPG,EAAwBpB,EAAYhL,OAAOqL,UAAUgB,gBAErDC,EAActM,OAAOC,MAAQ,SAAUsM,GACvC,IAAItM,EAAO,GACX,IAAK,IAAIrH,KAAO2T,EACRH,EAAsBG,EAAQ3T,IAC9BqH,EAAKnM,KAAK8E,GAGlB,OAAOqH,GAGPuM,EAAkBxB,EAAYhL,OAAOqL,UAAU5H,UAoB/C0H,EADuB,oBAAhBsB,YACQA,YAEA,SAAUjW,GACrBrD,KAAKqD,MAAQA,GAMrB,IAAIkW,EAAuB,uBAE3B,SAASC,EAAmBC,EAAOC,GAG/B,GAAI1D,GACA0D,EAAQzD,OACS,iBAAVwD,GACG,OAAVA,GACAA,EAAMxD,MACR,CAEE,IADA,IAAI0D,EAAS,GACJ1K,EAAIyK,EAAWzK,EAAGA,EAAIA,EAAEE,OACzBF,EAAEgH,SAAWwD,EAAMG,yBAA2BH,EAAMG,wBAA0B3K,EAAE4K,gBAChFhB,EAAsBY,EAAO,0BAA2B,CAACpW,MAAO4L,EAAE4K,aAAcC,cAAc,IAC9FH,EAAO9S,QAAQoI,EAAEgH,QAGzB0D,EAAO9S,QAAQ4S,EAAMxD,OAErB,IACIA,EAKZ,SAA2B8D,GAGvB,IAFA,IAAIC,EAPqBL,EAAO3K,KAAK,KAAOuK,EAAuB,MAO3CU,MAAM,MAC1BC,EAAe,GACVzX,EAAI,EAAGA,EAAIuX,EAAM1Z,SAAUmC,EAAG,CACnC,IAAI0X,EAAOH,EAAMvX,IAEZ2X,EAAgBD,KAQoB,KAD5BE,EAP8BF,GAQ9BlZ,QAAQ,iBACkB,IAApCoZ,EAAUpZ,QAAQ,cAT+BkZ,GAChDD,EAAavZ,KAAKwZ,GAM9B,IAAqBE,EAHjB,OAAOH,EAAalL,KAAK,MAfTsL,GACZzB,EAAsBY,EAAO,QAAS,CAACpW,MAAO4S,EAAO6D,cAAc,KAsB3E,SAASS,EAAyBF,GAG9B,IAAIG,EAAW,gCAAgCC,KAAKJ,GACpD,GAAIG,EACA,MAAO,CAACA,EAAS,GAAIE,OAAOF,EAAS,KAIzC,IAAIG,EAAW,4BAA4BF,KAAKJ,GAChD,GAAIM,EACA,MAAO,CAACA,EAAS,GAAID,OAAOC,EAAS,KAIzC,IAAIC,EAAW,iBAAiBH,KAAKJ,GACrC,OAAIO,EACO,CAACA,EAAS,GAAIF,OAAOE,EAAS,UADzC,EAKJ,SAASR,EAAgBC,GACrB,IAAIQ,EAAwBN,EAAyBF,GAErD,IAAKQ,EACD,OAAO,EAGX,IACIC,EAAaD,EAAsB,GAEvC,OAHeA,EAAsB,KAGjB3E,GAChB4E,GAAc3E,GACd2E,GAAcC,EAKtB,SAAS3E,IACL,GAAKJ,EAIL,IACI,MAAM,IAAIjV,MACZ,MAAO0I,GACL,IAAIuQ,EAAQvQ,EAAEwM,MAAMgE,MAAM,MAEtBY,EAAwBN,EADZP,EAAM,GAAG/Y,QAAQ,KAAO,EAAI+Y,EAAM,GAAKA,EAAM,IAE7D,IAAKa,EACD,OAIJ,OADA3E,EAAY2E,EAAsB,GAC3BA,EAAsB,IAuBrC,SAASrH,EAAEnQ,GAIP,OAAIA,aAAiBrB,EACVqB,EAIP2X,EAAe3X,IAsrBPqW,EArrBMrW,EAsrBd4X,EAAWC,IACf1H,EAAE8C,SAAS,WACP,IACIoD,EAAQ9E,KAAKqG,EAASE,QAASF,EAASG,OAAQH,EAASI,QAC3D,MAAOC,GACLL,EAASG,OAAOE,MAGjBL,EAASvB,SA5rBL6B,EAAQlY,GAmrBvB,IAAgBqW,EACRuB,EAjrBRzH,EAAE2H,QAAU3H,EAMZA,EAAE8C,SAAWA,EAKb9C,EAAEgI,kBAAmB,EAQrB,IAAIC,EAAmB,EAkBvB,SAASP,IAOL,IAA2CQ,EAAvCC,EAAW,GAAIC,EAAoB,GAEnCX,EAAWtC,EAAcuC,EAAMhD,WAC/BwB,EAAUf,EAAc3W,EAAQkW,WAmCpC,GAjCAwB,EAAQmC,gBAAkB,SAAUV,EAASW,EAAIC,GAC7C,IAAIC,EAAO/D,EAAYF,WACnB4D,GACAA,EAAShb,KAAKqb,GACH,SAAPF,GAAiBC,EAAS,IAC1BH,EAAkBjb,KAAKob,EAAS,KAGpCvI,EAAE8C,SAAS,WACPoF,EAAgBG,gBAAgB/D,MAAM4D,EAAiBM,MAMnEtC,EAAQuC,QAAU,WACd,GAAIN,EACA,OAAOjC,EAEX,IAAIwC,EAAcC,EAAOT,GAIzB,OAHIU,EAAUF,KACVR,EAAkBQ,GAEfA,GAGXxC,EAAQ2C,QAAU,WACd,OAAKX,EAGEA,EAAgBW,UAFZ,CAAEpI,MAAO,YAKpBT,EAAEgI,kBAAoBxF,EACtB,IACI,MAAM,IAAIjV,MACZ,MAAO0I,GAOLiQ,EAAQzD,MAAQxM,EAAEwM,MAAM1B,UAAU9K,EAAEwM,MAAMhV,QAAQ,MAAQ,GAC1DyY,EAAQG,aAAe4B,IAQ/B,SAASa,EAAOC,GACZb,EAAkBa,EAEd/I,EAAEgI,kBAAoBxF,IAGtB0D,EAAQvK,OAASoN,GAGrBpE,EAAawD,EAAU,SAAUxZ,EAAWqa,GACxChJ,EAAE8C,SAAS,WACPiG,EAAWV,gBAAgB/D,MAAMyE,EAAYC,WAElD,GAEHb,OAAW,EACXC,OAAoB,EAsCxB,OAnCAX,EAASvB,QAAUA,EACnBuB,EAASE,QAAU,SAAU9X,GACrBqY,GAIJY,EAAO9I,EAAEnQ,KAGb4X,EAASM,QAAU,SAAUlY,GACrBqY,GAIJY,EAAOf,EAAQlY,KAEnB4X,EAASG,OAAS,SAAUqB,GACpBf,GAIJY,EAAOlB,EAAOqB,KAElBxB,EAASI,OAAS,SAAUqB,GACpBhB,GAIJvD,EAAayD,EAAmB,SAAUzZ,EAAWwa,GACjDnJ,EAAE8C,SAAS,WACPqG,EAAiBD,WAEtB,IAGAzB,EA6BX,SAASvB,EAAQkD,GACb,GAAwB,mBAAbA,EACP,MAAM,IAAIvE,UAAU,gCAExB,IAAI4C,EAAWC,IACf,IACI0B,EAAS3B,EAASE,QAASF,EAASG,OAAQH,EAASI,QACvD,MAAOoB,GACLxB,EAASG,OAAOqB,GAEpB,OAAOxB,EAASvB,QAqDpB,SAASmD,EAAKC,GACV,OAAOpD,EAAQ,SAAUyB,EAASC,GAM9B,IAAK,IAAI3Y,EAAI,EAAGsa,EAAMD,EAASxc,OAAQmC,EAAIsa,EAAKta,IAC5C+Q,EAAEsJ,EAASra,IAAImS,KAAKuG,EAASC,KAqBzC,SAASpZ,EAAQgX,EAAYgE,EAAUX,QAClB,IAAbW,IACAA,EAAW,SAAUlB,GACjB,OAAOV,EAAO,IAAIra,MACd,uCAAyC+a,WAIrC,IAAZO,IACAA,EAAU,WACN,MAAO,CAACpI,MAAO,aAIvB,IAAIyF,EAAUf,EAAc3W,EAAQkW,WAqBpC,GAnBAwB,EAAQmC,gBAAkB,SAAUV,EAASW,EAAIE,GAC7C,IAAI9U,EACJ,IAEQA,EADA8R,EAAW8C,GACF9C,EAAW8C,GAAIhE,MAAM4B,EAASsC,GAE9BgB,EAASxQ,KAAKkN,EAASoC,EAAIE,GAE1C,MAAOV,GACLpU,EAASkU,EAAOE,GAEhBH,GACAA,EAAQjU,IAIhBwS,EAAQ2C,QAAUA,EAGdA,EAAS,CACT,IAAIY,EAAYZ,IACQ,aAApBY,EAAUhJ,QACVyF,EAAQ4B,UAAY2B,EAAUR,QAGlC/C,EAAQuC,QAAU,WACd,IAAIgB,EAAYZ,IAChB,MAAwB,YAApBY,EAAUhJ,OACU,aAApBgJ,EAAUhJ,MACHyF,EAEJuD,EAAU5Z,OAIzB,OAAOqW,EAuHX,SAASwD,EAAK7Z,EAAO8Z,EAAWC,EAAUC,GACtC,OAAO7J,EAAEnQ,GAAOuR,KAAKuI,EAAWC,EAAUC,GA+B9C,SAASlB,EAAO9Y,GACZ,GAAI+Y,EAAU/Y,GAAQ,CAClB,IAAI4Z,EAAY5Z,EAAMgZ,UACtB,GAAwB,cAApBY,EAAUhJ,MACV,OAAOgJ,EAAU5Z,MAGzB,OAAOA,EAQX,SAAS+Y,EAAUhD,GACf,OAAOA,aAAkBpX,EAI7B,SAASgZ,EAAe5B,GACpB,OAtpBc/V,EAspBE+V,KArpBCvM,OAAOxJ,IAqpB0B,mBAAhB+V,EAAOxE,KAtpB7C,IAAkBvR,EAyLK,iBAAZ8T,SAAwBA,SAAWA,QAAQmG,KAAOnG,QAAQmG,IAAIC,UACrE/J,EAAEgI,kBAAmB,GAazBhI,EAAE0H,MAAQA,EA+HVA,EAAMhD,UAAUsF,iBAAmB,WAC/B,IAAI/E,EAAOzY,KACX,OAAO,SAAUyZ,EAAOpW,GAChBoW,EACAhB,EAAK2C,OAAO3B,GAEZhB,EAAK0C,QADEpD,UAAUzX,OAAS,EACb2X,EAAYF,UAAW,GAEvB1U,KAWzBmQ,EAAExR,QAAU0X,EACZlG,EAAEkG,QAAUA,EAcZA,EAAQmD,KAAOA,EACfnD,EAAQ+D,IAAMA,EACd/D,EAAQ0B,OAASA,EACjB1B,EAAQyB,QAAU3H,EAKlBA,EAAEkK,WAAa,SAAUtE,GAGrB,OAAOA,GAGXpX,EAAQkW,UAAUwF,WAAa,WAG3B,OAAO1d,MAYXwT,EAAExE,KAAO,SAAU2O,EAAGC,GAClB,OAAOpK,EAAEmK,GAAG3O,KAAK4O,IAGrB5b,EAAQkW,UAAUlJ,KAAO,SAAUlM,GAC/B,OAAO0Q,EAAE,CAACxT,KAAM8C,IAAO+a,OAAO,SAAUF,EAAGC,GACvC,GAAID,IAAMC,EAEN,OAAOD,EAEP,MAAM,IAAI5c,MAAM,+BAAiC4c,EAAI,IAAMC,MAUvEpK,EAAEqJ,KAAOA,EAcT7a,EAAQkW,UAAU2E,KAAO,WACrB,OAAO7c,KAAK4U,KAAKpB,EAAEqJ,OAcvBrJ,EAAEsK,YAAc9b,EAuDhBA,EAAQkW,UAAU5H,SAAW,WACzB,MAAO,oBAGXtO,EAAQkW,UAAUtD,KAAO,SAAUuI,EAAWC,EAAUC,GACpD,IAAI5E,EAAOzY,KACPib,EAAWC,IACX6C,GAAO,EAiEX,OAtCAvK,EAAE8C,SAAS,WACPmC,EAAKoD,gBAAgB,SAAUxY,GACvB0a,IAGJA,GAAO,EAEP9C,EAASE,QA/BjB,SAAoB9X,GAChB,IACI,MAA4B,mBAAd8Z,EAA2BA,EAAU9Z,GAASA,EAC9D,MAAOiY,GACL,OAAOF,EAAOE,IA2BG0C,CAAW3a,MAC7B,OAAQ,CAAC,SAAUiY,GACdyC,IAGJA,GAAO,EAEP9C,EAASE,QA9BjB,SAAmBG,GACf,GAAwB,mBAAb8B,EAAyB,CAChC5D,EAAmB8B,EAAW7C,GAC9B,IACI,OAAO2E,EAAS9B,GAClB,MAAO2C,GACL,OAAO7C,EAAO6C,IAGtB,OAAO7C,EAAOE,GAqBO4C,CAAU5C,UAKnC7C,EAAKoD,qBAAgB,EAAQ,OAAQ,MAAC,EAAQ,SAAUxY,GACpD,IAAIG,EACA2a,GAAQ,EACZ,IACI3a,EA3BR,SAAqBH,GACjB,MAA6B,mBAAfga,EAA4BA,EAAWha,GAASA,EA0B/C+a,CAAY/a,GACzB,MAAOoG,GAEL,GADA0U,GAAQ,GACJ3K,EAAE6K,QAGF,MAAM5U,EAFN+J,EAAE6K,QAAQ5U,GAMb0U,GACDlD,EAASI,OAAO7X,MAIjByX,EAASvB,SAGpBlG,EAAE8K,IAAM,SAAU5E,EAAS/X,GACvB,OAAO6R,EAAEkG,GAAS4E,IAAI3c,IAe1BK,EAAQkW,UAAUoG,IAAM,SAAU3c,GAG9B,OAFAA,EAAW6R,EAAE7R,GAEN3B,KAAK4U,KAAK,SAAUvR,GACvB,OAAO1B,EAAS4c,MAAMlb,GAAOmb,YAAYnb,MAoBjDmQ,EAAE0J,KAAOA,EAKTlb,EAAQkW,UAAUsG,YAAc,SAAUnb,GACtC,OAAOrD,KAAK4U,KAAK,WAAc,OAAOvR,KAG1CmQ,EAAEgL,YAAc,SAAU9E,EAASrW,GAC/B,OAAOmQ,EAAEkG,GAAS8E,YAAYnb,IAGlCrB,EAAQkW,UAAUuG,WAAa,SAAUhC,GACrC,OAAOzc,KAAK4U,KAAK,WAAc,MAAM6H,KAGzCjJ,EAAEiL,WAAa,SAAU/E,EAAS+C,GAC9B,OAAOjJ,EAAEkG,GAAS+E,WAAWhC,IAcjCjJ,EAAE2I,OAASA,EAeX3I,EAAE4I,UAAYA,EAKd5I,EAAEwH,eAAiBA,EASnBxH,EAAEkL,UACF,SAAmBtF,GACf,OAAOgD,EAAUhD,IAAsC,YAA3BA,EAAOiD,UAAUpI,OAGjDjS,EAAQkW,UAAUwG,UAAY,WAC1B,MAAgC,YAAzB1e,KAAKqc,UAAUpI,OAO1BT,EAAEmL,YACF,SAAqBvF,GACjB,OAAQgD,EAAUhD,IAAsC,cAA3BA,EAAOiD,UAAUpI,OAGlDjS,EAAQkW,UAAUyG,YAAc,WAC5B,MAAgC,cAAzB3e,KAAKqc,UAAUpI,OAM1BT,EAAEoL,WACF,SAAoBxF,GAChB,OAAOgD,EAAUhD,IAAsC,aAA3BA,EAAOiD,UAAUpI,OAGjDjS,EAAQkW,UAAU0G,WAAa,WAC3B,MAAgC,aAAzB5e,KAAKqc,UAAUpI,OAS1B,IApkBmBtS,EAokBfkd,EAAmB,GACnBC,EAAsB,GACtBC,EAA8B,GAC9BC,GAA2B,EAE/B,SAASC,IACLJ,EAAiBve,OAAS,EAC1Bwe,EAAoBxe,OAAS,EAExB0e,IACDA,GAA2B,GAmEnC,SAAS5D,EAAOqB,GACZ,IAAIyC,EAAYld,EAAQ,CACpBkb,KAAQ,SAAUE,GAKd,OAHIA,GA9ChB,SAA0B1D,GACtB,GAAKsF,EAAL,CAIA,IAAIG,EAAK7G,EAAcwG,EAAqBpF,IAChC,IAARyF,IACuB,iBAAZhI,SAAgD,mBAAjBA,QAAQiI,MAC9C5L,EAAE8C,SAASqB,SAAS,WAChB,IAAI0H,EAAW/G,EAAcyG,EAA6BrF,IACxC,IAAd2F,IACAlI,QAAQiI,KAAK,mBAAoBP,EAAiBM,GAAKzF,GACvDqF,EAA4B/d,OAAOqe,EAAU,MAIzDP,EAAoB9d,OAAOme,EAAI,GAC/BN,EAAiB7d,OAAOme,EAAI,KA8BpBG,CAAiBtf,MAEdod,EAAWA,EAASX,GAAUzc,OAE1C,WACC,OAAOA,MACR,WACC,MAAO,CAAEiU,MAAO,WAAYwI,OAAQA,KAMxC,OAjFJ,SAAwB/C,EAAS+C,GACxBuC,IAGkB,iBAAZ7H,SAAgD,mBAAjBA,QAAQiI,MAC9C5L,EAAE8C,SAASqB,SAAS,YACqC,IAAjDW,EAAcwG,EAAqBpF,KACnCvC,QAAQiI,KAAK,qBAAsB3C,EAAQ/C,GAC3CqF,EAA4Bpe,KAAK+Y,MAK7CoF,EAAoBne,KAAK+Y,GAErBmF,EAAiBle,KADjB8b,QAAkC,IAAjBA,EAAOxG,MACFwG,EAAOxG,MAEP,cAAgBwG,IA8D1C8C,CAAeL,EAAWzC,GAEnByC,EAQX,SAAS3D,EAAQlY,GACb,OAAOrB,EAAQ,CACXkb,KAAQ,WACJ,OAAO7Z,GAEX0C,IAAO,SAAUyZ,GACb,OAAOnc,EAAMmc,IAEjBxZ,IAAO,SAAUwZ,EAAMC,GACnBpc,EAAMmc,GAAQC,GAElBC,OAAU,SAAUF,UACTnc,EAAMmc,IAEjBG,KAAQ,SAAUH,EAAMxD,GAGpB,OAAIwD,MAAAA,EACOnc,EAAMyU,WAAM,EAAQkE,GAEpB3Y,EAAMmc,GAAM1H,MAAMzU,EAAO2Y,IAGxClE,MAAS,SAAUU,EAAOwD,GACtB,OAAO3Y,EAAMyU,MAAMU,EAAOwD,IAE9BlP,KAAQ,WACJ,OAAOqM,EAAY9V,UAExB,EAAQ,WACP,MAAO,CAAE4Q,MAAO,YAAa5Q,MAAOA,KAoD5C,SAASwa,EAAOxa,EAAO8Z,EAAWC,GAC9B,OAAO5J,EAAEnQ,GAAOwa,OAAOV,EAAWC,GA+JtC,SAASwC,EAASxG,EAAQ0C,EAAIE,GAC1B,OAAOxI,EAAE4F,GAAQwG,SAAS9D,EAAIE,GAiLlC,SAASyB,EAAIoC,GACT,OAAO3C,EAAK2C,EAAU,SAAUA,GAC5B,IAAIC,EAAe,EACf7E,EAAWC,IA4Bf,OA3BA/C,EAAa0H,EAAU,SAAU1d,EAAWuX,EAASxW,GACjD,IAAI6c,EAEA3D,EAAU1C,IAC+B,eAAxCqG,EAAWrG,EAAQ2C,WAAWpI,MAE/B4L,EAAS3c,GAAS6c,EAAS1c,SAEzByc,EACF5C,EACIxD,EACA,SAAUrW,GACNwc,EAAS3c,GAASG,EACK,KAAjByc,GACF7E,EAASE,QAAQ0E,IAGzB5E,EAASG,OACT,SAAUsB,GACNzB,EAASI,OAAO,CAAEnY,MAAOA,EAAOG,MAAOqZ,aAIpD,GACkB,IAAjBoD,GACA7E,EAASE,QAAQ0E,GAEd5E,EAASvB,UAiBxB,SAASsG,EAAIH,GACT,GAAwB,IAApBA,EAASvf,OACT,OAAOkT,EAAE2H,UAGb,IAAIF,EAAWzH,EAAE0H,QACb4E,EAAe,EA6BnB,OA5BA3H,EAAa0H,EAAU,SAAUI,EAAMC,EAAShd,GAG5C4c,IAEA5C,EAJc2C,EAAS3c,GAKvB,SAAqBgE,GACjB+T,EAASE,QAAQjU,IAErB,SAAoBiZ,GAEhB,GAAqB,KADrBL,EACwB,CACpB,IAAIZ,EAAYiB,GAAO,IAAIpf,MAAM,GAAKof,GAEtCjB,EAAU1C,QAAW,mGACgC0C,EAAU1C,QAE/DvB,EAASG,OAAO8D,KAGxB,SAAoBxC,GAChBzB,EAASI,OAAO,CACZnY,MAAOA,EACPG,MAAOqZ,YAGhBva,GAEI8Y,EAASvB,QAiBpB,SAAS0G,EAAYP,GACjB,OAAO3C,EAAK2C,EAAU,SAAUA,GAE5B,OADAA,EAAWtH,EAAUsH,EAAUrM,GACxB0J,EAAKO,EAAIlF,EAAUsH,EAAU,SAAUnG,GAC1C,OAAOwD,EAAKxD,EAASrD,EAAMA,MAC1B,WACD,OAAOwJ,MA7jBnBrM,EAAEyL,yBAA2BA,EAE7BzL,EAAE6M,oBAAsB,WAEpB,OAAOxB,EAAiBjZ,SAG5B4N,EAAE8M,+BAAiC,WAC/BrB,IACAD,GAA2B,GAG/BC,IAQAzL,EAAE4H,OAASA,EA0BX5H,EAAE+H,QAAUA,EA6DZ/H,EAAE+M,OACF,SAAgBnH,GACZ,OAAOpX,EAAQ,CACXwe,MAAS,cACV,SAAkB1E,EAAIE,GACrB,OAAO4D,EAASxG,EAAQ0C,EAAIE,IAC7B,WACC,OAAOxI,EAAE4F,GAAQiD,aAczB7I,EAAEqK,OAASA,EAKX7b,EAAQkW,UAAU2F,OAAS,SAAUV,EAAWC,GAC5C,OAAOpd,KAAKyd,MAAM7I,KAAK,SAAU6L,GAC7B,OAAOtD,EAAUrF,WAAM,EAAQ2I,IAChCrD,IA6BP5J,EAAEkN,MACF,SAAeC,GACX,OAAO,WAGH,SAASC,EAAUC,EAAMC,GACrB,IAAI5Z,EAUJ,GAA6B,oBAAlB6Z,cAA+B,CAEtC,IACI7Z,EAAS0J,EAAUiQ,GAAMC,GAC3B,MAAOxF,GACL,OAAOF,EAAOE,GAElB,OAAIpU,EAAO6W,KACAvK,EAAEtM,EAAO7D,OAET6Z,EAAKhW,EAAO7D,MAAO1B,EAAUqf,GAKxC,IACI9Z,EAAS0J,EAAUiQ,GAAMC,GAC3B,MAAOxF,GACL,OA77BpB,SAAyBA,GACrB,MACmC,2BAA/BjC,EAAgBiC,IAChBA,aAAqBtD,EA07BLiJ,CAAgB3F,GACT9H,EAAE8H,EAAUjY,OAEZ+X,EAAOE,GAGtB,OAAO4B,EAAKhW,EAAQvF,EAAUqf,GAGtC,IAAIpQ,EAAY+P,EAAc7I,MAAM9X,KAAM+X,WACtCpW,EAAWif,EAAUnT,KAAKmT,EAAW,QACrCI,EAAUJ,EAAUnT,KAAKmT,EAAW,SACxC,OAAOjf,MAWf6R,EAAE0N,MACF,SAAeP,GACXnN,EAAEuK,KAAKvK,EAAEkN,MAAMC,EAARnN,KA4BXA,EAAU,OACV,SAAiBnQ,GACb,MAAM,IAAI2U,EAAa3U,IAkB3BmQ,EAAE2N,SACF,SAAkBxf,GACd,OAAO,WACH,OAAOkc,EAAO,CAAC7d,KAAMyd,EAAI1F,YAAa,SAAUU,EAAMuD,GAClD,OAAOra,EAASmW,MAAMW,EAAMuD,OAYxCxI,EAAEoM,SAAWA,EAKb5d,EAAQkW,UAAU0H,SAAW,SAAU9D,EAAIE,GACvC,IAAIvD,EAAOzY,KACPib,EAAWC,IAIf,OAHA1H,EAAE8C,SAAS,WACPmC,EAAKoD,gBAAgBZ,EAASE,QAASW,EAAIE,KAExCf,EAASvB,SASpBlG,EAAEzN,IAAM,SAAUqT,EAAQ3T,GACtB,OAAO+N,EAAE4F,GAAQwG,SAAS,MAAO,CAACna,KAGtCzD,EAAQkW,UAAUnS,IAAM,SAAUN,GAC9B,OAAOzF,KAAK4f,SAAS,MAAO,CAACna,KAUjC+N,EAAExN,IAAM,SAAUoT,EAAQ3T,EAAKpC,GAC3B,OAAOmQ,EAAE4F,GAAQwG,SAAS,MAAO,CAACna,EAAKpC,KAG3CrB,EAAQkW,UAAUlS,IAAM,SAAUP,EAAKpC,GACnC,OAAOrD,KAAK4f,SAAS,MAAO,CAACna,EAAKpC,KAStCmQ,EAAE4N,IACF5N,EAAU,OAAI,SAAU4F,EAAQ3T,GAC5B,OAAO+N,EAAE4F,GAAQwG,SAAS,SAAU,CAACna,KAGzCzD,EAAQkW,UAAUkJ,IAClBpf,EAAQkW,UAAkB,OAAI,SAAUzS,GACpC,OAAOzF,KAAK4f,SAAS,SAAU,CAACna,KAgBpC+N,EAAE6N,OACF7N,EAAEmM,KAAO,SAAUvG,EAAQoG,EAAMxD,GAC7B,OAAOxI,EAAE4F,GAAQwG,SAAS,OAAQ,CAACJ,EAAMxD,KAG7Cha,EAAQkW,UAAUmJ,OAClBrf,EAAQkW,UAAUyH,KAAO,SAAUH,EAAMxD,GACrC,OAAOhc,KAAK4f,SAAS,OAAQ,CAACJ,EAAMxD,KAUxCxI,EAAE8N,KACF9N,EAAE+N,MACF/N,EAAEgO,OAAS,SAAUpI,EAAQoG,GACzB,OAAOhM,EAAE4F,GAAQwG,SAAS,OAAQ,CAACJ,EAAMvH,EAAYF,UAAW,MAGpE/V,EAAQkW,UAAUoJ,KAClBtf,EAAQkW,UAAUqJ,MAClBvf,EAAQkW,UAAUsJ,OAAS,SAAUhC,GACjC,OAAOxf,KAAK4f,SAAS,OAAQ,CAACJ,EAAMvH,EAAYF,UAAW,MAQ/DvE,EAAEiO,OAAS,SAAUrI,EAAQ4C,GACzB,OAAOxI,EAAE4F,GAAQwG,SAAS,QAAS,MAAC,EAAQ5D,KAGhDha,EAAQkW,UAAUuJ,OAAS,SAAUzF,GACjC,OAAOhc,KAAK4f,SAAS,QAAS,MAAC,EAAQ5D,KAQ3CxI,EAAO,IACPA,EAAE+K,MAAQ,SAAUnF,GAChB,OAAO5F,EAAE4F,GAAQwG,SAAS,QAAS,MAAC,EAAQ3H,EAAYF,UAAW,MAGvE/V,EAAQkW,UAAUqG,MAAQ,WACtB,OAAOve,KAAK4f,SAAS,QAAS,MAAC,EAAQ3H,EAAYF,cASvDvE,EAAEkO,MAAQ,SAAUtI,GAChB,IAAIM,EAAUlG,EAAE4F,GACZ4C,EAAO/D,EAAYF,UAAW,GAClC,OAAO,WACH,OAAO2B,EAAQkG,SAAS,QAAS,CAC7B5f,KACAgc,EAAK2F,OAAO1J,EAAYF,gBAIpC/V,EAAQkW,UAAUwJ,MAAQ,WACtB,IAAIhI,EAAU1Z,KACVgc,EAAO/D,EAAYF,WACvB,OAAO,WACH,OAAO2B,EAAQkG,SAAS,QAAS,CAC7B5f,KACAgc,EAAK2F,OAAO1J,EAAYF,gBAWpCvE,EAAE1G,KAAO,SAAUsM,GACf,OAAO5F,EAAE4F,GAAQwG,SAAS,OAAQ,KAGtC5d,EAAQkW,UAAUpL,KAAO,WACrB,OAAO9M,KAAK4f,SAAS,OAAQ,KAYjCpM,EAAEiK,IAAMA,EAoCRzb,EAAQkW,UAAUuF,IAAM,WACpB,OAAOA,EAAIzd,OAUfwT,EAAEwM,IAAMA,EAwCRhe,EAAQkW,UAAU8H,IAAM,WACpB,OAAOA,EAAIhgB,OAYfwT,EAAE4M,aAlrCiBze,EAkrCOye,EAjrCf,WAMH,MALuB,oBAAZnW,SACiB,mBAAjBA,QAAQ2X,MACf3X,QAAQ2X,KAAKpC,qDACa,IAAIze,MAAM,IAAIkV,OAErCtU,EAASmW,MAAMnW,EAAUoW,aAurCxC/V,EAAQkW,UAAUkI,YAAc,WAC5B,OAAOA,EAAYpgB,OAMvBwT,EAAEqO,WACF,SAAoBhC,GAChB,OAAOrM,EAAEqM,GAAUgC,cAUvB7f,EAAQkW,UAAU2J,WAAa,WAC3B,OAAO7hB,KAAK4U,KAAK,SAAUiL,GACvB,OAAOpC,EAAIlF,EAAUsH,EAAU,SAAUnG,GAErC,SAASoI,IACL,OAAOpI,EAAQ2C,UAEnB,OAJA3C,EAAUlG,EAAEkG,IAIG9E,KAAKkN,EAAYA,SAc5CtO,EAAEuO,KACFvO,EAAS,MAAI,SAAU4F,EAAQgE,GAC3B,OAAO5J,EAAE4F,GAAQxE,UAAK,EAAQwI,IAGlCpb,EAAQkW,UAAU6J,KAClB/f,EAAQkW,UAAiB,MAAI,SAAUkF,GACnC,OAAOpd,KAAK4U,UAAK,EAAQwI,IAW7B5J,EAAEkJ,SACF,SAAkBtD,EAAQiE,GACtB,OAAO7J,EAAE4F,GAAQxE,UAAK,OAAQ,EAAQyI,IAG1Crb,EAAQkW,UAAUwE,SAAW,SAAUW,GACnC,OAAOrd,KAAK4U,UAAK,OAAQ,EAAQyI,IAcrC7J,EAAEwO,IACFxO,EAAW,QAAI,SAAU4F,EAAQzX,GAC7B,OAAO6R,EAAE4F,GAAiB,QAAEzX,IAGhCK,EAAQkW,UAAU8J,IAClBhgB,EAAQkW,UAAmB,QAAI,SAAUvW,GACrC,IAAKA,GAAsC,mBAAnBA,EAASmW,MAC7B,MAAM,IAAI/W,MAAM,kCAGpB,OADAY,EAAW6R,EAAE7R,GACN3B,KAAK4U,KAAK,SAAUvR,GACvB,OAAO1B,EAAS4c,QAAQ3J,KAAK,WACzB,OAAOvR,KAEZ,SAAUoZ,GAET,OAAO9a,EAAS4c,QAAQ3J,KAAK,WACzB,MAAM6H,OAWlBjJ,EAAEuK,KAAO,SAAU3E,EAAQ+D,EAAWC,EAAUV,GAC5C,OAAOlJ,EAAE4F,GAAQ2E,KAAKZ,EAAWC,EAAUV,IAG/C1a,EAAQkW,UAAU6F,KAAO,SAAUZ,EAAWC,EAAUV,GACpD,IAAIuF,EAAmB,SAAUxI,GAG7BjG,EAAE8C,SAAS,WAEP,GADAkD,EAAmBC,EAAOC,IACtBlG,EAAE6K,QAGF,MAAM5E,EAFNjG,EAAE6K,QAAQ5E,MAQlBC,EAAUyD,GAAaC,GAAYV,EACnC1c,KAAK4U,KAAKuI,EAAWC,EAAUV,GAC/B1c,KAEmB,iBAAZmX,SAAwBA,SAAWA,QAAQJ,SAClDkL,EAAmB9K,QAAQJ,OAAOtJ,KAAKwU,IAG3CvI,EAAQ9E,UAAK,EAAQqN,IAYzBzO,EAAEtO,QAAU,SAAUkU,EAAQ8I,EAAIzI,GAC9B,OAAOjG,EAAE4F,GAAQlU,QAAQgd,EAAIzI,IAGjCzX,EAAQkW,UAAUhT,QAAU,SAAUgd,EAAIzI,GACtC,IAAIwB,EAAWC,IACXiH,EAAY1X,WAAW,WAClBgP,GAAS,iBAAoBA,KAC9BA,EAAQ,IAAI1Y,MAAM0Y,GAAS,mBAAqByI,EAAK,QAC/CE,KAAO,aAEjBnH,EAASG,OAAO3B,IACjByI,GAUH,OARAliB,KAAK4U,KAAK,SAAUvR,GAChB4B,aAAakd,GACblH,EAASE,QAAQ9X,IAClB,SAAUiY,GACTrW,aAAakd,GACblH,EAASG,OAAOE,IACjBL,EAASI,QAELJ,EAASvB,SAYpBlG,EAAE6O,MAAQ,SAAUjJ,EAAQlU,GAKxB,YAJgB,IAAZA,IACAA,EAAUkU,EACVA,OAAS,GAEN5F,EAAE4F,GAAQiJ,MAAMnd,IAG3BlD,EAAQkW,UAAUmK,MAAQ,SAAUnd,GAChC,OAAOlF,KAAK4U,KAAK,SAAUvR,GACvB,IAAI4X,EAAWC,IAIf,OAHAzQ,WAAW,WACPwQ,EAASE,QAAQ9X,IAClB6B,GACI+V,EAASvB,WAaxBlG,EAAE8O,QAAU,SAAU3gB,EAAUqa,GAC5B,OAAOxI,EAAE7R,GAAU2gB,QAAQtG,IAG/Bha,EAAQkW,UAAUoK,QAAU,SAAUtG,GAClC,IAAIf,EAAWC,IACXqH,EAAWtK,EAAY+D,GAG3B,OAFAuG,EAAS5hB,KAAKsa,EAASuC,oBACvBxd,KAAKyhB,OAAOc,GAAUR,KAAK9G,EAASG,QAC7BH,EAASvB,SAYpBlG,EAAEgP,OAAS,SAAU7gB,GACjB,IAAIqa,EAAO/D,EAAYF,UAAW,GAClC,OAAOvE,EAAE7R,GAAU2gB,QAAQtG,IAG/Bha,EAAQkW,UAAUsK,OAAS,WACvB,IAAID,EAAWtK,EAAYF,WACvBkD,EAAWC,IAGf,OAFAqH,EAAS5hB,KAAKsa,EAASuC,oBACvBxd,KAAKyhB,OAAOc,GAAUR,KAAK9G,EAASG,QAC7BH,EAASvB,SAWpBlG,EAAEiP,OACFjP,EAAEkP,UAAY,SAAU/gB,GACpB,QAAiBQ,IAAbR,EACA,MAAM,IAAIZ,MAAM,sCAEpB,IAAI4hB,EAAW1K,EAAYF,UAAW,GACtC,OAAO,WACH,IAAIwK,EAAWI,EAAShB,OAAO1J,EAAYF,YACvCkD,EAAWC,IAGf,OAFAqH,EAAS5hB,KAAKsa,EAASuC,oBACvBhK,EAAE7R,GAAU8f,OAAOc,GAAUR,KAAK9G,EAASG,QACpCH,EAASvB,UAIxB1X,EAAQkW,UAAUuK,OAClBzgB,EAAQkW,UAAUwK,UAAY,WAC1B,IAAI1G,EAAO/D,EAAYF,WAEvB,OADAiE,EAAKnV,QAAQ7G,MACNwT,EAAEkP,UAAU5K,WAAM,EAAQkE,IAGrCxI,EAAEoP,MAAQ,SAAUjhB,EAAU6W,GAC1B,IAAImK,EAAW1K,EAAYF,UAAW,GACtC,OAAO,WACH,IAAIwK,EAAWI,EAAShB,OAAO1J,EAAYF,YACvCkD,EAAWC,IAMf,OALAqH,EAAS5hB,KAAKsa,EAASuC,oBAIvBhK,EAHA,WACI,OAAO7R,EAASmW,MAAMU,EAAOT,aAExB0J,OAAOc,GAAUR,KAAK9G,EAASG,QACjCH,EAASvB,UAIxB1X,EAAQkW,UAAU0K,MAAQ,WACtB,IAAI5G,EAAO/D,EAAYF,UAAW,GAElC,OADAiE,EAAKnV,QAAQ7G,MACNwT,EAAEoP,MAAM9K,WAAM,EAAQkE,IAYjCxI,EAAEqP,QACFrP,EAAEsP,MAAQ,SAAU1J,EAAQoG,EAAMxD,GAC9B,OAAOxI,EAAE4F,GAAQ0J,MAAMtD,EAAMxD,IAGjCha,EAAQkW,UAAU2K,QAClB7gB,EAAQkW,UAAU4K,MAAQ,SAAUtD,EAAMxD,GACtC,IAAIuG,EAAWtK,EAAY+D,GAAQ,IAC/Bf,EAAWC,IAGf,OAFAqH,EAAS5hB,KAAKsa,EAASuC,oBACvBxd,KAAK4f,SAAS,OAAQ,CAACJ,EAAM+C,IAAWR,KAAK9G,EAASG,QAC/CH,EAASvB,SAapBlG,EAAEuP,MACFvP,EAAEwP,OACFxP,EAAEyP,QAAU,SAAU7J,EAAQoG,GAC1B,IAAI+C,EAAWtK,EAAYF,UAAW,GAClCkD,EAAWC,IAGf,OAFAqH,EAAS5hB,KAAKsa,EAASuC,oBACvBhK,EAAE4F,GAAQwG,SAAS,OAAQ,CAACJ,EAAM+C,IAAWR,KAAK9G,EAASG,QACpDH,EAASvB,SAGpB1X,EAAQkW,UAAU6K,MAClB/gB,EAAQkW,UAAU8K,OAClBhhB,EAAQkW,UAAU+K,QAAU,SAAUzD,GAClC,IAAI+C,EAAWtK,EAAYF,UAAW,GAClCkD,EAAWC,IAGf,OAFAqH,EAAS5hB,KAAKsa,EAASuC,oBACvBxd,KAAK4f,SAAS,OAAQ,CAACJ,EAAM+C,IAAWR,KAAK9G,EAASG,QAC/CH,EAASvB,SAapBlG,EAAE0P,QACF,SAAiB9J,EAAQ+J,GACrB,OAAO3P,EAAE4F,GAAQ8J,QAAQC,IAG7BnhB,EAAQkW,UAAUgL,QAAU,SAAUC,GAClC,IAAIA,EAWA,OAAOnjB,KAVPA,KAAK4U,KAAK,SAAUvR,GAChBmQ,EAAE8C,SAAS,WACP6M,EAAS,KAAM9f,MAEpB,SAAUoW,GACTjG,EAAE8C,SAAS,WACP6M,EAAS1J,QAQzBjG,EAAE4P,WAAa,WACX,MAAM,IAAIriB,MAAM,uDAIpB,IAAIga,EAAc3E,IAElB,OAAO5C,GAp/DsB,mBAAd6P,UACPA,UAAU,UAAWtN,GAIrBuN,UAAiBvN,gCCoBnBwN,GAAU,CACfC,OAAQjS,EACRkS,IAAK9R,EACL+R,MAAOhR,EACPiR,GAAI5Q,EACJ6Q,KAAMhQ,GACNiQ,MAAO/O,GACPgP,GAAIjO,GACJ5G,EAAGoE,EACH0Q,IAAKtR,EACLuR,KAAMhR,EACNiR,OAAQzS,EACR0S,EAAGnT,EACHoT,QAASjT,EACTkT,GAAI9S,EACJ+S,KAAMvS,EACNwS,MAAOxR,EACPyR,GAAIpR,EACJqR,IAAKlR,EACLoJ,SAAUnJ,EACVkR,MAAOtP,GACPuP,GAAIrP,GACJsP,GAAI/O,GACJgP,GAAIpP,GACJqP,SAAUvP,GACVwP,GAAI/S,EACJgT,GAAI/S,EACJgT,GAAI/S,EACJgT,GAAI/S,EACJgT,GAAI/S,EACJgT,GAAI/S,EACJgT,OAAQ/S,EACRgT,OAAQxT,EACRyT,IAAKrS,EACLsS,EAAGlU,EACH5O,EAAG8P,EACHiT,OAAQ/R,GACRgS,KAAMzU,EACN0U,KAAMzU,EACN0U,MAAOxU,EACPyU,MAAOxU,MACPyU,GAAIjU,EACJkU,QAASxT,EACTyT,OAAQvT,EACRwT,SAAU9S,EACV+S,OAAQ7S,OACR8S,EAAG1S,GACH2S,OAAQzS,GACRvE,OAAQwE,GACRyS,MAAOzQ,GACP0Q,MAAOvQ,GACPwQ,MAAOlR,GACPmR,MAAOhR,GACPiR,MAAO/Q,GACPgR,QAASzR,GACT0R,QAAShV,EACTlQ,IAAKuT,GACL4R,IAAK1R,GACL2R,IAAK1R,GACLhT,KAAMuP,EACN1M,KAAM2Q,GACNxJ,SAAUgE,GAGE2W,mBACEC,gBAAOC,EAA4BC,MAC5CA,EAAItb,SACD,IAAI3K,MAAM,8DAEbwO,YAAYwX,EAAa5a,MAC7B4a,EAAY,eACZC,EAAItb,GAAeqb,MAGNpW,gBAAOsW,GAChBA,EAAQvb,OACHA,GAAaS,KAAK/E,SAC1B6f,EAAQvb,GAAa2C,eACrB4Y,EAAQvb,GAAapB,UACrB2c,EAAQvb,QAAevJ,OAIX+kB,iBACb/a,EACA6P,sEAGoB,iBAAT7P,EAAmB,KACvBgb,EAAOhb,UAEAhK,KADbgK,EAAOoX,GAAQpX,UAER,IAAIpL,cAAcomB,iDAMtBC,EAwBAC,EA1BE3a,KAAW,IAAGiV,aAAOhb,EAAG2gB,GAAY1jB,gBAAQ6F,UAAMA,IAClDsK,EAAc,GAEhBwT,GAAkB,QACN7a,kBAAU,CAArBjB,IAAMD,OACO,iBAANA,IAGPA,aAAa0E,KAAc1E,EAAE7E,KAAiB,YAAV6E,EAAE7E,SACvB6E,GAGfA,EAAE7E,QACO6E,EAAE7E,KAAO6E,KACZ,WAIXwQ,EAAOA,MAAAA,EAAAA,EAAQ,GACXoL,IACHpL,EAAK9P,SAAWkb,GAEbG,IACHvL,EAAKjI,YAAcA,MAIhB5H,EAAK+L,UAEG,IAAI/L,EAAK6P,GAAQ,IAGjB7P,EAAK6P,GAAQ,KAEhBxL,YAAY9D,GAEd2a"}