{"version":3,"file":"aurumjs.mjs","sources":["../dist/utilities/event_emitter.js","../dist/stream/data_source.js","../dist/utilities/linkedlist/linked_list_node.js","../dist/utilities/linkedlist/linked_list.js","../dist/utilities/cancellation_token.js","../dist/utilities/owner_symbol.js","../dist/nodes/special/aurum_text.js","../dist/nodes/special/aurum_element.js","../dist/nodes/a.js","../dist/nodes/abbr.js","../dist/nodes/area.js","../dist/nodes/article.js","../dist/nodes/aside.js","../dist/nodes/audio.js","../dist/nodes/b.js","../dist/nodes/br.js","../dist/nodes/button.js","../dist/nodes/canvas.js","../dist/nodes/data.js","../dist/nodes/details.js","../dist/nodes/div.js","../dist/nodes/em.js","../dist/nodes/footer.js","../dist/nodes/form.js","../dist/nodes/h1.js","../dist/nodes/h2.js","../dist/nodes/h3.js","../dist/nodes/h4.js","../dist/nodes/h5.js","../dist/nodes/h6.js","../dist/nodes/header.js","../dist/nodes/heading.js","../dist/nodes/i.js","../dist/nodes/iframe.js","../dist/nodes/img.js","../dist/nodes/input.js","../dist/nodes/label.js","../dist/nodes/li.js","../dist/nodes/link.js","../dist/nodes/nav.js","../dist/nodes/noscript.js","../dist/nodes/ol.js","../dist/nodes/option.js","../dist/nodes/p.js","../dist/nodes/pre.js","../dist/nodes/progress.js","../dist/nodes/q.js","../dist/nodes/script.js","../dist/nodes/select.js","../dist/nodes/source.js","../dist/nodes/span.js","../dist/nodes/style.js","../dist/nodes/sub.js","../dist/nodes/summary.js","../dist/nodes/sup.js","../dist/nodes/svg.js","../dist/nodes/table.js","../dist/nodes/tbody.js","../dist/nodes/td.js","../dist/nodes/textarea.js","../dist/nodes/tfoot.js","../dist/nodes/th.js","../dist/nodes/thead.js","../dist/nodes/time.js","../dist/nodes/title.js","../dist/nodes/tr.js","../dist/nodes/ul.js","../dist/nodes/video.js","../dist/nodes/body.js","../dist/nodes/head.js","../dist/stream/object_data_source.js","../dist/utilities/aurum.js","../dist/nodes/special/custom.js","../dist/nodes/special/switch.js","../dist/nodes/special/router.js","../dist/nodes/special/suspense.js"],"sourcesContent":["export class EventEmitter {\n    constructor() {\n        this.subscribeChannel = [];\n        this.onAfterFire = [];\n    }\n    get subscriptions() {\n        return this.subscribeChannel.length;\n    }\n    subscribe(callback, cancellationToken) {\n        const { facade } = this.createSubscription(callback, this.subscribeChannel, cancellationToken);\n        return facade;\n    }\n    hasSubscriptions() {\n        return this.subscriptions > 0;\n    }\n    cancelAll() {\n        if (!this.isFiring) {\n            this.subscribeChannel.length = 0;\n        }\n        else {\n            this.onAfterFire.push(() => (this.subscribeChannel.length = 0));\n        }\n    }\n    fireFiltered(data, filter) {\n        this.isFiring = true;\n        let length = this.subscribeChannel.length;\n        for (let i = 0; i < length; i++) {\n            if (this.subscribeChannel[i].callback !== filter) {\n                this.subscribeChannel[i].callback(data);\n            }\n        }\n        this.isFiring = false;\n        this.afterFire();\n    }\n    afterFire() {\n        if (this.onAfterFire.length > 0) {\n            this.onAfterFire.forEach((cb) => cb());\n            this.onAfterFire.length = 0;\n        }\n    }\n    fire(data) {\n        this.isFiring = true;\n        let length = this.subscribeChannel.length;\n        for (let i = 0; i < length; i++) {\n            this.subscribeChannel[i].callback(data);\n        }\n        this.isFiring = false;\n        this.afterFire();\n    }\n    createSubscription(callback, channel, cancellationToken) {\n        const that = this;\n        const subscription = {\n            callback\n        };\n        const facade = {\n            cancel() {\n                that.cancel(subscription, channel);\n            }\n        };\n        if (cancellationToken !== undefined) {\n            cancellationToken.addCancelable(() => that.cancel(subscription, channel));\n        }\n        channel.push(subscription);\n        return { subscription, facade };\n    }\n    cancel(subscription, channel) {\n        let index = channel.indexOf(subscription);\n        if (index >= 0) {\n            if (!this.isFiring) {\n                channel.splice(index, 1);\n            }\n            else {\n                this.onAfterFire.push(() => this.cancel(subscription, channel));\n            }\n        }\n    }\n}\n//# sourceMappingURL=event_emitter.js.map","import { EventEmitter } from '../utilities/event_emitter';\nexport class DataSource {\n    constructor(initialValue) {\n        this.value = initialValue;\n        this.updateEvent = new EventEmitter();\n    }\n    update(newValue) {\n        if (this.updating) {\n            throw new Error('Problem in datas source: Unstable value propagation, when updating a value the stream was updated back as a direct response. This can lead to infinite loops and is therefore not allowed');\n        }\n        this.updating = true;\n        this.value = newValue;\n        this.updateEvent.fire(newValue);\n        this.updating = false;\n    }\n    backPropagate(sender, newValue) {\n        this.value = newValue;\n        this.updating = true;\n        this.updateEvent.fireFiltered(newValue, sender);\n        this.updating = false;\n    }\n    listenAndRepeat(callback, cancellationToken) {\n        callback(this.value);\n        return this.listen(callback, cancellationToken);\n    }\n    listen(callback, cancellationToken) {\n        return this.updateEvent.subscribe(callback, cancellationToken).cancel;\n    }\n    filter(callback, cancellationToken) {\n        const filteredSource = new DataSource();\n        this.listen((value) => {\n            if (callback(value)) {\n                filteredSource.update(value);\n            }\n        }, cancellationToken);\n        return filteredSource;\n    }\n    filterDuplex(callback, cancellationToken) {\n        const filteredSource = new DataSource();\n        const cb = (value) => {\n            if (callback(value)) {\n                filteredSource.backPropagate(cb2, value);\n            }\n        };\n        const cb2 = (value) => {\n            if (callback(value)) {\n                this.backPropagate(cb, value);\n            }\n        };\n        this.listen(cb, cancellationToken);\n        filteredSource.listen(cb2, cancellationToken);\n        return filteredSource;\n    }\n    pipe(targetDataSource, cancellationToken) {\n        this.listen((v) => targetDataSource.update(v), cancellationToken);\n    }\n    pipeDuplex(targetDataSource, cancellationToken) {\n        const cb = (v) => targetDataSource.backPropagate(cb2, v);\n        const cb2 = (v) => this.backPropagate(cb, v);\n        this.listen(cb, cancellationToken);\n        targetDataSource.listen(cb2, cancellationToken);\n    }\n    map(callback, cancellationToken) {\n        const mappedSource = new DataSource(callback(this.value));\n        this.listen((value) => {\n            mappedSource.update(callback(value));\n        }, cancellationToken);\n        return mappedSource;\n    }\n    mapDuplex(callback, reverseMap, cancellationToken) {\n        const mappedSource = new DataSource(callback(this.value));\n        const cb = (value) => mappedSource.backPropagate(cb2, callback(value));\n        const cb2 = (value) => this.backPropagate(cb, reverseMap(value));\n        this.listen(cb, cancellationToken);\n        mappedSource.listen(cb2, cancellationToken);\n        return mappedSource;\n    }\n    unique(cancellationToken) {\n        const uniqueSource = new DataSource(this.value);\n        this.listen((value) => {\n            if (value !== uniqueSource.value) {\n                uniqueSource.update(value);\n            }\n        }, cancellationToken);\n        return uniqueSource;\n    }\n    uniqueDuplex(cancellationToken) {\n        const uniqueSource = new DataSource(this.value);\n        const cb = (value) => {\n            if (value !== uniqueSource.value) {\n                uniqueSource.backPropagate(cb2, value);\n            }\n        };\n        const cb2 = (value) => {\n            if (value !== this.value) {\n                this.backPropagate(cb, value);\n            }\n        };\n        this.listen(cb, cancellationToken);\n        uniqueSource.listen(cb2, cancellationToken);\n        return uniqueSource;\n    }\n    reduce(reducer, initialValue, cancellationToken) {\n        const reduceSource = new DataSource(initialValue);\n        this.listen((v) => reduceSource.update(reducer(reduceSource.value, v)), cancellationToken);\n        return reduceSource;\n    }\n    aggregate(otherSource, combinator, cancellationToken) {\n        const aggregatedSource = new DataSource(combinator(this.value, otherSource.value));\n        this.listen(() => aggregatedSource.update(combinator(this.value, otherSource.value)), cancellationToken);\n        otherSource.listen(() => aggregatedSource.update(combinator(this.value, otherSource.value)), cancellationToken);\n        return aggregatedSource;\n    }\n    combine(otherSource, cancellationToken) {\n        const combinedDataSource = new DataSource();\n        this.pipe(combinedDataSource, cancellationToken);\n        otherSource.pipe(combinedDataSource, cancellationToken);\n        return combinedDataSource;\n    }\n    debounce(time, cancellationToken) {\n        const debouncedDataSource = new DataSource();\n        let timeout;\n        this.listen((v) => {\n            clearTimeout(timeout);\n            timeout = setTimeout(() => {\n                debouncedDataSource.update(v);\n            }, time);\n        }, cancellationToken);\n        return debouncedDataSource;\n    }\n    buffer(time, cancellationToken) {\n        const bufferedDataSource = new DataSource();\n        let timeout;\n        let buffer = [];\n        this.listen((v) => {\n            buffer.push(v);\n            if (!timeout) {\n                timeout = setTimeout(() => {\n                    timeout = undefined;\n                    bufferedDataSource.update(buffer);\n                    buffer = [];\n                }, time);\n            }\n        }, cancellationToken);\n        return bufferedDataSource;\n    }\n    queue(time, cancellationToken) {\n        const queueDataSource = new ArrayDataSource();\n        this.listen((v) => {\n            queueDataSource.push(v);\n        }, cancellationToken);\n        return queueDataSource;\n    }\n    pick(key, cancellationToken) {\n        var _a;\n        const subDataSource = new DataSource((_a = this.value) === null || _a === void 0 ? void 0 : _a[key]);\n        this.listen((v) => {\n            if (v !== undefined && v !== null) {\n                subDataSource.update(v[key]);\n            }\n            else {\n                subDataSource.update(v);\n            }\n        }, cancellationToken);\n        return subDataSource;\n    }\n    cancelAll() {\n        this.updateEvent.cancelAll();\n    }\n}\nexport class ArrayDataSource {\n    constructor(initialData) {\n        if (initialData) {\n            this.data = initialData.slice();\n        }\n        else {\n            this.data = [];\n        }\n        this.lengthSource = new DataSource(this.data.length).unique();\n        this.updateEvent = new EventEmitter();\n    }\n    listenAndRepeat(callback, cancellationToken) {\n        callback({\n            operation: 'add',\n            operationDetailed: 'append',\n            index: 0,\n            items: this.data,\n            newState: this.data,\n            count: this.data.length\n        });\n        return this.listen(callback, cancellationToken);\n    }\n    listen(callback, cancellationToken) {\n        return this.updateEvent.subscribe(callback, cancellationToken).cancel;\n    }\n    get length() {\n        return this.lengthSource;\n    }\n    getData() {\n        return this.data.slice();\n    }\n    get(index) {\n        return this.data[index];\n    }\n    set(index, item) {\n        const old = this.data[index];\n        if (old === item) {\n            return;\n        }\n        this.data[index] = item;\n        this.update({ operation: 'replace', operationDetailed: 'replace', target: old, count: 1, index, items: [item], newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    swap(indexA, indexB) {\n        if (indexA === indexB) {\n            return;\n        }\n        const itemA = this.data[indexA];\n        const itemB = this.data[indexB];\n        this.data[indexB] = itemA;\n        this.data[indexA] = itemB;\n        this.update({ operation: 'swap', operationDetailed: 'swap', index: indexA, index2: indexB, items: [itemA, itemB], newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    swapItems(itemA, itemB) {\n        if (itemA === itemB) {\n            return;\n        }\n        const indexA = this.data.indexOf(itemA);\n        const indexB = this.data.indexOf(itemB);\n        if (indexA !== -1 && indexB !== -1) {\n            this.data[indexB] = itemA;\n            this.data[indexA] = itemB;\n        }\n        this.update({ operation: 'swap', operationDetailed: 'swap', index: indexA, index2: indexB, items: [itemA, itemB], newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    appendArray(items) {\n        const old = this.data;\n        this.data = new Array(old.length);\n        let i = 0;\n        for (i = 0; i < old.length; i++) {\n            this.data[i] = old[i];\n        }\n        for (let n = 0; n < items.length; n++) {\n            this.data[i + n] = items[n];\n        }\n        this.update({\n            operation: 'add',\n            operationDetailed: 'append',\n            count: items.length,\n            index: this.data.length - items.length,\n            items,\n            newState: this.data\n        });\n        this.lengthSource.update(this.data.length);\n    }\n    push(...items) {\n        this.appendArray(items);\n        this.lengthSource.update(this.data.length);\n    }\n    unshift(...items) {\n        this.data.unshift(...items);\n        this.update({ operation: 'add', operationDetailed: 'prepend', count: items.length, items, index: 0, newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    pop() {\n        const item = this.data.pop();\n        this.update({\n            operation: 'remove',\n            operationDetailed: 'removeRight',\n            count: 1,\n            index: this.data.length,\n            items: [item],\n            newState: this.data\n        });\n        this.lengthSource.update(this.data.length);\n        return item;\n    }\n    merge(newData) {\n        for (let i = 0; i < newData.length; i++) {\n            if (this.data[i] !== newData[i]) {\n                if (this.data.length > i) {\n                    this.set(i, newData[i]);\n                }\n                else {\n                    this.push(newData[i]);\n                }\n            }\n        }\n        if (this.data.length > newData.length) {\n            this.removeRight(this.data.length - newData.length);\n        }\n        this.lengthSource.update(this.data.length);\n    }\n    removeRight(count) {\n        const length = this.data.length;\n        const result = this.data.splice(length - count, count);\n        this.update({ operation: 'remove', operationDetailed: 'removeRight', count, index: length - count, items: result, newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    removeLeft(count) {\n        const result = this.data.splice(0, count);\n        this.update({ operation: 'remove', operationDetailed: 'removeLeft', count, index: 0, items: result, newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    remove(item) {\n        const index = this.data.indexOf(item);\n        if (index !== -1) {\n            this.data.splice(index, 1);\n            this.update({ operation: 'remove', operationDetailed: 'remove', count: 1, index, items: [item], newState: this.data });\n            this.lengthSource.update(this.data.length);\n        }\n    }\n    clear() {\n        const items = this.data;\n        this.data = [];\n        this.update({\n            operation: 'remove',\n            operationDetailed: 'clear',\n            count: items.length,\n            index: 0,\n            items,\n            newState: this.data\n        });\n        this.lengthSource.update(this.data.length);\n    }\n    shift() {\n        const item = this.data.shift();\n        this.update({ operation: 'remove', operationDetailed: 'removeLeft', items: [item], count: 1, index: 0, newState: this.data });\n        this.lengthSource.update(this.data.length);\n        return item;\n    }\n    toArray() {\n        return this.data.slice();\n    }\n    sort(comparator, cancellationToken) {\n        return new SortedArrayView(this, comparator, cancellationToken);\n    }\n    map(mapper, cancellationToken) {\n        return new MappedArrayView(this, mapper, cancellationToken);\n    }\n    filter(callback, cancellationToken) {\n        return new FilteredArrayView(this, callback, cancellationToken);\n    }\n    forEach(callbackfn, thisArg) {\n        return this.data.forEach(callbackfn, thisArg);\n    }\n    toDataSource() {\n        const stream = new DataSource(this.data);\n        this.listen((s) => {\n            stream.update(s.newState);\n        });\n        return stream;\n    }\n    update(change) {\n        this.updateEvent.fire(change);\n    }\n}\nexport class MappedArrayView extends ArrayDataSource {\n    constructor(parent, mapper, cancellationToken) {\n        const initial = parent.getData().map(mapper);\n        super(initial);\n        this.mapper = mapper;\n        parent.listen((change) => {\n            switch (change.operationDetailed) {\n                case 'removeLeft':\n                    this.removeLeft(change.count);\n                    break;\n                case 'removeRight':\n                    this.removeRight(change.count);\n                    break;\n                case 'remove':\n                    this.remove(this.data[change.index]);\n                    break;\n                case 'clear':\n                    this.data.length = 0;\n                    break;\n                case 'prepend':\n                    this.unshift(...change.items.map(this.mapper));\n                    break;\n                case 'append':\n                    this.appendArray(change.items.map(this.mapper));\n                    break;\n                case 'swap':\n                    break;\n                case 'replace':\n                    this.set(change.index, this.mapper(change.items[0]));\n                    break;\n            }\n        }, cancellationToken);\n    }\n}\nexport class SortedArrayView extends ArrayDataSource {\n    constructor(parent, comparator, cancellationToken) {\n        const initial = parent.getData().sort(comparator);\n        super(initial);\n        this.comparator = comparator;\n        parent.listen((change) => {\n            switch (change.operationDetailed) {\n                case 'removeLeft':\n                    this.removeLeft(change.count);\n                    break;\n                case 'removeRight':\n                    this.removeRight(change.count);\n                    break;\n                case 'remove':\n                    this.remove(change.items[0]);\n                    break;\n                case 'clear':\n                    this.data.length = 0;\n                    break;\n                case 'prepend':\n                    this.unshift(...change.items);\n                    this.data.sort(this.comparator);\n                    break;\n                case 'append':\n                    this.push(...change.items);\n                    this.data.sort(this.comparator);\n                    break;\n                case 'swap':\n                    break;\n                case 'replace':\n                    this.set(change.index, change.items[0]);\n                    this.data.sort(this.comparator);\n                    break;\n            }\n        }, cancellationToken);\n    }\n}\nexport class FilteredArrayView extends ArrayDataSource {\n    constructor(parent, filter, cancellationToken) {\n        if (Array.isArray(parent)) {\n            parent = new ArrayDataSource(parent);\n        }\n        filter = (filter !== null && filter !== void 0 ? filter : (() => true));\n        const initial = parent.data.filter(filter);\n        super(initial);\n        this.parent = parent;\n        this.viewFilter = filter;\n        parent.listen((change) => {\n            let filteredItems;\n            switch (change.operationDetailed) {\n                case 'removeLeft':\n                case 'removeRight':\n                case 'remove':\n                case 'clear':\n                    for (const item of change.items) {\n                        this.remove(item);\n                    }\n                    break;\n                case 'prepend':\n                    filteredItems = change.items.filter(this.viewFilter);\n                    this.unshift(...filteredItems);\n                    break;\n                case 'append':\n                    filteredItems = change.items.filter(this.viewFilter);\n                    this.push(...filteredItems);\n                    break;\n                case 'swap':\n                    const indexA = this.data.indexOf(change.items[0]);\n                    const indexB = this.data.indexOf(change.items[1]);\n                    if (indexA !== -1 && indexB !== -1) {\n                        this.swap(indexA, indexB);\n                    }\n                    break;\n                case 'replace':\n                    const index = this.data.indexOf(change.target);\n                    if (index !== -1) {\n                        const acceptNew = this.viewFilter(change.items[0]);\n                        if (acceptNew) {\n                            this.set(index, change.items[0]);\n                        }\n                        else {\n                            this.remove(change.target);\n                        }\n                    }\n                    break;\n            }\n        }, cancellationToken);\n    }\n    updateFilter(filter) {\n        if (this.viewFilter === filter) {\n            return;\n        }\n        this.viewFilter = filter;\n        this.refresh();\n        return this.data.length;\n    }\n    refresh() {\n        this.clear();\n        const data = this.parent.data.filter(this.viewFilter);\n        this.push(...data);\n    }\n}\n//# sourceMappingURL=data_source.js.map","export class LinkedListNode {\n    constructor(data) {\n        this.data = data;\n    }\n    deleteNext() {\n        if (this.next) {\n            const overNext = this.next.next;\n            this.next.next = undefined;\n            this.next.previous = undefined;\n            this.next = overNext;\n            if (this.next) {\n                this.next.previous = this;\n            }\n        }\n    }\n    deletePrevious() {\n        if (this.previous) {\n            const overPrevious = this.previous.previous;\n            this.previous.next = undefined;\n            this.previous.previous = undefined;\n            this.previous = overPrevious;\n            if (this.previous) {\n                this.previous.next = this;\n            }\n        }\n    }\n}\n//# sourceMappingURL=linked_list_node.js.map","import { LinkedListNode } from './linked_list_node';\nexport class LinkedList {\n    constructor(data = []) {\n        this.length = 0;\n        data.forEach((d) => this.append(d));\n    }\n    find(predicate) {\n        let ptr = this.rootNode;\n        while (ptr && !predicate(ptr)) {\n            ptr = ptr.next;\n        }\n        return ptr;\n    }\n    append(element) {\n        if (!this.rootNode && !this.lastNode) {\n            this.rootNode = this.lastNode = new LinkedListNode(element);\n        }\n        else {\n            this.lastNode.next = new LinkedListNode(element);\n            this.lastNode.next.previous = this.lastNode;\n            this.lastNode = this.lastNode.next;\n        }\n        this.length++;\n        return element;\n    }\n    forEach(cb) {\n        this.find((n) => {\n            cb(n.data);\n            return false;\n        });\n    }\n    prepend(element) {\n        if (!this.rootNode && !this.lastNode) {\n            this.rootNode = this.lastNode = new LinkedListNode(element);\n        }\n        else {\n            this.rootNode.previous = new LinkedListNode(element);\n            this.rootNode.previous.next = this.rootNode;\n            this.rootNode = this.rootNode.previous;\n        }\n        this.length++;\n        return element;\n    }\n    remove(element) {\n        if (element === this.rootNode.data) {\n            if (this.rootNode === this.lastNode) {\n                this.rootNode = this.lastNode = undefined;\n            }\n            else {\n                this.rootNode = this.rootNode.next;\n            }\n            this.length--;\n        }\n        else {\n            const result = this.find((e) => e.next && e.next.data === element);\n            if (result) {\n                if (result.next === this.lastNode) {\n                    this.lastNode = result;\n                }\n                result.deleteNext();\n                this.length--;\n            }\n        }\n    }\n}\n//# sourceMappingURL=linked_list.js.map","import { LinkedList } from './linkedlist/linked_list';\nexport class CancellationToken {\n    constructor(...cancellables) {\n        this.cancelables = new LinkedList(cancellables);\n        this._isCancelled = false;\n    }\n    get isCanceled() {\n        return this._isCancelled;\n    }\n    addCancelable(delegate) {\n        this.throwIfCancelled('attempting to add cancellable to token that is already cancelled');\n        this.cancelables.append(delegate);\n        if (this.cancelables.length > 200) {\n            console.log('potential memory leak: cancellation token has over 200 clean up calls');\n        }\n        return this;\n    }\n    removeCancelable(delegate) {\n        this.throwIfCancelled('attempting to remove cancellable from token that is already cancelled');\n        this.cancelables.remove(delegate);\n        return this;\n    }\n    addDisposable(disposable) {\n        this.addCancelable(() => disposable.dispose());\n        return this;\n    }\n    callIfNotCancelled(action) {\n        if (!this.isCanceled) {\n            action();\n        }\n    }\n    setTimeout(cb, time = 0) {\n        const id = setTimeout(() => {\n            this.removeCancelable(cancelable);\n            cb();\n        }, time);\n        const cancelable = () => clearTimeout(id);\n        this.addCancelable(cancelable);\n    }\n    setInterval(cb, time) {\n        const id = setInterval(cb, time);\n        this.addCancelable(() => clearInterval(id));\n    }\n    requestAnimationFrame(cb) {\n        const id = requestAnimationFrame(cb);\n        this.addCancelable(() => cancelAnimationFrame(id));\n    }\n    animationLoop(cb) {\n        let id = requestAnimationFrame(function f(time) {\n            cb(time);\n            id = requestAnimationFrame(f);\n        });\n        this.addCancelable(() => cancelAnimationFrame(id));\n    }\n    throwIfCancelled(msg) {\n        if (this.isCanceled) {\n            throw new Error(msg || 'cancellation token is cancelled');\n        }\n    }\n    chain(target, twoWays = false) {\n        if (twoWays) {\n            target.chain(this, false);\n        }\n        this.addCancelable(() => target.cancel());\n        return this;\n    }\n    registerDomEvent(eventEmitter, event, callback) {\n        eventEmitter.addEventListener(event, callback);\n        this.addCancelable(() => eventEmitter.removeEventListener(event, callback));\n        return this;\n    }\n    cancel() {\n        if (this.isCanceled) {\n            return;\n        }\n        this._isCancelled = true;\n        this.cancelables.forEach((c) => c());\n        this.cancelables = undefined;\n    }\n}\n//# sourceMappingURL=cancellation_token.js.map","export const ownerSymbol = Symbol('owner');\n//# sourceMappingURL=owner_symbol.js.map","import { DataSource } from '../../stream/data_source';\nimport { ownerSymbol } from '../../utilities/owner_symbol';\nexport class AurumTextElement {\n    constructor(text) {\n        this.node = this.create(text);\n        if (text instanceof DataSource) {\n            this.subscription = text.listen((v) => {\n                if (this.node) {\n                    this.node.textContent = v;\n                }\n            });\n        }\n    }\n    resolveStringSource(source) {\n        if (typeof source === 'string') {\n            return source;\n        }\n        else {\n            return source.value;\n        }\n    }\n    create(text) {\n        const node = document.createTextNode(this.resolveStringSource(text));\n        node[ownerSymbol] = this;\n        return node;\n    }\n    remove() {\n        if (this.hasParent()) {\n            this.node.parentElement[ownerSymbol].removeChild(this.node);\n        }\n    }\n    hasParent() {\n        return !!this.node.parentElement;\n    }\n    dispose() {\n        var _a, _b;\n        (_b = (_a = this).subscription) === null || _b === void 0 ? void 0 : _b.call(_a);\n        delete this.node[ownerSymbol];\n        delete this.node;\n    }\n}\n//# sourceMappingURL=aurum_text.js.map","import { ArrayDataSource, DataSource } from '../../stream/data_source';\nimport { CancellationToken } from '../../utilities/cancellation_token';\nimport { ownerSymbol } from '../../utilities/owner_symbol';\nimport { AurumTextElement } from './aurum_text';\nconst defaultEvents = {\n    drag: 'onDrag',\n    dragstart: 'onDragStart',\n    dragend: 'onDragEnd',\n    dragexit: 'onDragExit',\n    dragover: 'onDragOver',\n    dragenter: 'onDragEnter',\n    dragleave: 'onDragLeave',\n    blur: 'onBlur',\n    focus: 'onFocus',\n    click: 'onClick',\n    dblclick: 'onDblClick',\n    keydown: 'onKeyDown',\n    keyhit: 'onKeyHit',\n    keyup: 'onKeyUp',\n    mousedown: 'onMouseDown',\n    mouseup: 'onMouseUp',\n    mousemove: 'onMouseMove',\n    mouseenter: 'onMouseEnter',\n    mouseleave: 'onMouseLeave',\n    mousewheel: 'onMouseWheel'\n};\nconst defaultProps = ['id', 'name', 'draggable', 'tabindex', 'style', 'role', 'contentEditable'];\nexport class AurumElement {\n    constructor(props, children, domNodeName) {\n        var _a, _b;\n        this.cancellationToken = new CancellationToken();\n        this.node = this.create(domNodeName);\n        this.children = [];\n        if (props !== null) {\n            this.onDispose = props.onDispose;\n            if (props.onAttach) {\n                this.onAttach = props.onAttach;\n                this.needAttach = true;\n            }\n            this.onDetach = props.onDetach;\n            this.template = props.template;\n            this.initialize(props);\n            (_b = (_a = props).onCreate) === null || _b === void 0 ? void 0 : _b.call(_a, this);\n        }\n        if (children) {\n            this.addChildren(children);\n        }\n    }\n    initialize(props) {\n        this.createEventHandlers(defaultEvents, props);\n        const dataProps = Object.keys(props).filter((e) => e.includes('-'));\n        this.bindProps(defaultProps, props, dataProps);\n        if (props.class) {\n            this.handleClass(props.class);\n        }\n        if (props.repeatModel) {\n            this.handleRepeat(props.repeatModel);\n        }\n    }\n    bindProps(keys, props, dynamicProps) {\n        for (const key of keys) {\n            if (props[key]) {\n                this.assignStringSourceToAttribute(props[key], key);\n            }\n        }\n        if (dynamicProps) {\n            for (const key of dynamicProps) {\n                if (props[key]) {\n                    this.assignStringSourceToAttribute(props[key], key);\n                }\n            }\n        }\n    }\n    createEventHandlers(events, props) {\n        for (const key in events) {\n            if (props[events[key]]) {\n                if (props[events[key]] instanceof DataSource) {\n                    this.node.addEventListener(key, (e) => props[events[key]].update(e));\n                }\n                else if (typeof props[events[key]] === 'function') {\n                    this.node.addEventListener(key, (e) => props[events[key]](e));\n                }\n            }\n        }\n    }\n    handleRepeat(dataSource) {\n        if (dataSource instanceof ArrayDataSource) {\n            this.repeatData = dataSource;\n        }\n        else {\n            this.repeatData = new ArrayDataSource(dataSource);\n        }\n        this.repeatData.listenAndRepeat((change) => {\n            switch (change.operationDetailed) {\n                case 'swap':\n                    const itemA = this.children[change.index];\n                    const itemB = this.children[change.index2];\n                    this.children[change.index2] = itemA;\n                    this.children[change.index] = itemB;\n                    break;\n                case 'append':\n                    const old = this.children;\n                    this.children = new Array(old.length);\n                    let i = 0;\n                    for (i = 0; i < old.length; i++) {\n                        this.children[i] = old[i];\n                    }\n                    for (let index = 0; index < change.items.length; index++) {\n                        this.children[i + index] = this.template.generate(change.items[index]);\n                    }\n                    break;\n                case 'prepend':\n                    this.children.unshift(...change.items.map((i) => this.template.generate(i)));\n                    break;\n                case 'remove':\n                case 'removeLeft':\n                case 'removeRight':\n                    this.children.splice(change.index, change.count);\n                    break;\n                case 'clear':\n                    this.children = [];\n                    break;\n                default:\n                    throw new Error('unhandled operation');\n            }\n            this.render();\n        });\n    }\n    render() {\n        if (this.cancellationToken.isCanceled) {\n            return;\n        }\n        for (let i = 0; i < this.children.length; i++) {\n            if (this.node.childNodes.length <= i) {\n                for (let n = i; n < this.children.length; n++) {\n                    this.addChildDom(this.children[n]);\n                }\n                return;\n            }\n            if (this.node.childNodes[i][ownerSymbol] !== this.children[i]) {\n                if (!this.children.includes(this.node.childNodes[i][ownerSymbol])) {\n                    const child = this.node.childNodes[i];\n                    child.remove();\n                    child[ownerSymbol].dispose();\n                    i--;\n                    continue;\n                }\n                const index = this.getChildIndex(this.children[i].node);\n                if (index !== -1) {\n                    this.swapChildrenDom(i, index);\n                }\n                else {\n                    this.addDomNodeAt(this.children[i].node, i);\n                }\n            }\n        }\n        while (this.node.childNodes.length > this.children.length) {\n            const child = this.node.childNodes[this.node.childNodes.length - 1];\n            this.node.removeChild(child);\n            child[ownerSymbol].dispose();\n        }\n    }\n    assignStringSourceToAttribute(data, key) {\n        if (typeof data === 'string') {\n            this.node.setAttribute(key, data);\n        }\n        else {\n            if (data.value) {\n                this.node.setAttribute(key, data.value);\n            }\n            data.unique(this.cancellationToken).listen((v) => this.node.setAttribute(key, v), this.cancellationToken);\n        }\n    }\n    handleAttach(parent) {\n        var _a, _b, _c, _d, _e;\n        if (this.needAttach) {\n            if (parent.isConnected()) {\n                (_b = (_a = this).onAttach) === null || _b === void 0 ? void 0 : _b.call(_a, this);\n                for (const child of this.node.childNodes) {\n                    (_e = (_c = child[ownerSymbol]) === null || _c === void 0 ? void 0 : (_d = _c).handleAttach) === null || _e === void 0 ? void 0 : _e.call(_d, this);\n                }\n            }\n            else {\n                parent.needAttach = true;\n            }\n        }\n    }\n    handleDetach() {\n        var _a, _b, _c, _d;\n        if (!this.node.isConnected) {\n            (_b = (_a = this).onDetach) === null || _b === void 0 ? void 0 : _b.call(_a, this);\n            for (const child of this.node.childNodes) {\n                if (child[ownerSymbol]) {\n                    (_d = (_c = child[ownerSymbol]).handleDetach) === null || _d === void 0 ? void 0 : _d.call(_c);\n                }\n            }\n        }\n    }\n    handleClass(data) {\n        if (typeof data === 'string') {\n            this.node.className = data;\n        }\n        else if (data instanceof DataSource) {\n            if (data.value) {\n                if (Array.isArray(data.value)) {\n                    this.node.className = data.value.join(' ');\n                    data.unique(this.cancellationToken).listen(() => {\n                        this.node.className = data.value.join(' ');\n                    }, this.cancellationToken);\n                }\n                else {\n                    this.node.className = data.value;\n                    data.unique(this.cancellationToken).listen(() => {\n                        this.node.className = data.value;\n                    }, this.cancellationToken);\n                }\n            }\n            data.unique(this.cancellationToken).listen((v) => (this.node.className = v), this.cancellationToken);\n        }\n        else {\n            const value = data.reduce((p, c) => {\n                if (typeof c === 'string') {\n                    return `${p} ${c}`;\n                }\n                else {\n                    if (c.value) {\n                        return `${p} ${c.value}`;\n                    }\n                    else {\n                        return p;\n                    }\n                }\n            }, '');\n            this.node.className = value;\n            for (const i of data) {\n                if (i instanceof DataSource) {\n                    i.unique(this.cancellationToken).listen((v) => {\n                        const value = data.reduce((p, c) => {\n                            if (typeof c === 'string') {\n                                return `${p} ${c}`;\n                            }\n                            else {\n                                if (c.value) {\n                                    return `${p} ${c.value}`;\n                                }\n                                else {\n                                    return p;\n                                }\n                            }\n                        }, '');\n                        this.node.className = value;\n                    }, this.cancellationToken);\n                }\n            }\n        }\n    }\n    resolveStringSource(source) {\n        if (typeof source === 'string') {\n            return source;\n        }\n        else {\n            return source.value;\n        }\n    }\n    create(domNodeName) {\n        const node = document.createElement(domNodeName);\n        node[ownerSymbol] = this;\n        return node;\n    }\n    getChildIndex(node) {\n        let i = 0;\n        for (const child of node.childNodes) {\n            if (child === node) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n    hasChild(node) {\n        for (const child of node.children) {\n            if (child === node) {\n                return true;\n            }\n        }\n        return false;\n    }\n    addChildDom(child) {\n        var _a, _b;\n        this.node.appendChild(child.node);\n        (_b = (_a = child).handleAttach) === null || _b === void 0 ? void 0 : _b.call(_a, this);\n    }\n    swapChildrenDom(indexA, indexB) {\n        if (indexA === indexB) {\n            return;\n        }\n        const nodeA = this.node.children[indexA];\n        const nodeB = this.node.children[indexB];\n        nodeA.remove();\n        nodeB.remove();\n        if (indexA < indexB) {\n            this.addDomNodeAt(nodeB, indexA);\n            this.addDomNodeAt(nodeA, indexB);\n        }\n        else {\n            this.addDomNodeAt(nodeA, indexB);\n            this.addDomNodeAt(nodeB, indexA);\n        }\n    }\n    addDomNodeAt(node, index) {\n        var _a, _b, _c, _d;\n        if (index >= this.node.childElementCount) {\n            this.node.appendChild(node);\n            (_b = (_a = node[ownerSymbol]).handleAttach) === null || _b === void 0 ? void 0 : _b.call(_a, this);\n        }\n        else {\n            this.node.insertBefore(node, this.node.children[index]);\n            (_d = (_c = node[ownerSymbol]).handleAttach) === null || _d === void 0 ? void 0 : _d.call(_c, this);\n        }\n    }\n    remove() {\n        if (this.hasParent()) {\n            this.node.parentElement[ownerSymbol].removeChild(this.node);\n        }\n    }\n    hasParent() {\n        return !!this.node.parentElement;\n    }\n    isConnected() {\n        return this.node.isConnected;\n    }\n    removeChild(child) {\n        const index = this.children.indexOf(child);\n        if (index !== -1) {\n            this.children.splice(index, 1);\n        }\n        this.render();\n    }\n    removeChildAt(index) {\n        this.children.splice(index, 1);\n        this.render();\n    }\n    swapChildren(indexA, indexB) {\n        if (indexA === indexB) {\n            return;\n        }\n        const nodeA = this.children[indexA];\n        const nodeB = this.children[indexB];\n        this.children[indexA] = nodeB;\n        this.children[indexB] = nodeA;\n        this.render();\n    }\n    clearChildren() {\n        this.children.length = 0;\n        this.render();\n    }\n    addChild(child) {\n        if (child instanceof Template) {\n            return;\n        }\n        child = this.childNodeToAurum(child);\n        this.children.push(child);\n        this.render();\n    }\n    childNodeToAurum(child) {\n        if (child instanceof ArrayDataSource) {\n            return new AurumFragment({ repeatModel: child });\n        }\n        else if (typeof child === 'string' || child instanceof DataSource) {\n            child = new AurumTextElement(child);\n        }\n        else if (!(child instanceof AurumElement)) {\n            child = new AurumTextElement(child.toString());\n        }\n        return child;\n    }\n    addChildAt(child, index) {\n        if (child instanceof Template) {\n            return;\n        }\n        child = this.childNodeToAurum(child);\n        this.children.splice(index, 0, child);\n        this.render();\n    }\n    addChildren(nodes) {\n        if (nodes.length === 0) {\n            return;\n        }\n        for (const child of nodes) {\n            this.addChild(child);\n        }\n    }\n    dispose() {\n        this.internalDispose(true);\n    }\n    internalDispose(detach) {\n        var _a, _b;\n        if (this.cancellationToken.isCanceled) {\n            return;\n        }\n        this.cancellationToken.cancel();\n        if (detach) {\n            this.remove();\n        }\n        for (const child of this.node.childNodes) {\n            if (child[ownerSymbol]) {\n                child[ownerSymbol].dispose(false);\n            }\n        }\n        delete this.node[ownerSymbol];\n        delete this.node;\n        (_b = (_a = this).onDispose) === null || _b === void 0 ? void 0 : _b.call(_a, this);\n    }\n}\nexport class Template extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'template');\n        this.ref = props.ref;\n        this.generate = props.generator;\n    }\n}\nexport class AurumFragment {\n    constructor(props) {\n        this.children = [];\n        this.node = document.createDocumentFragment();\n        if (props.repeatModel) {\n            this.handleRepeat(props.repeatModel);\n        }\n    }\n    handleRepeat(dataSource) {\n        dataSource.listenAndRepeat((change) => {\n            switch (change.operationDetailed) {\n                case 'swap':\n                    const itemA = this.children[change.index];\n                    const itemB = this.children[change.index2];\n                    this.children[change.index2] = itemA;\n                    this.children[change.index] = itemB;\n                    break;\n                case 'append':\n                    const old = this.children;\n                    this.children = new Array(old.length);\n                    let i = 0;\n                    for (i = 0; i < old.length; i++) {\n                        this.children[i] = old[i];\n                    }\n                    for (let index = 0; index < change.items.length; index++) {\n                        this.children[i + index] = change.items[index];\n                    }\n                    break;\n                case 'prepend':\n                    this.children.unshift(...change.items);\n                    break;\n                case 'remove':\n                case 'removeLeft':\n                case 'removeRight':\n                    this.children.splice(change.index, change.count);\n                    break;\n                case 'clear':\n                    this.children = [];\n                    break;\n                default:\n                    throw new Error('unhandled operation');\n            }\n            this.render();\n        });\n    }\n    render() {\n        for (let i = 0; i < this.children.length; i++) {\n            if (this.node.childNodes.length <= i) {\n                for (let n = i; n < this.children.length; n++) {\n                    this.addChildDom(this.children[n]);\n                }\n                return;\n            }\n            if (this.node.childNodes[i][ownerSymbol] !== this.children[i]) {\n                if (!this.children.includes(this.node.childNodes[i][ownerSymbol])) {\n                    const child = this.node.childNodes[i];\n                    child.remove();\n                    child[ownerSymbol].dispose();\n                    i--;\n                    continue;\n                }\n                const index = this.getChildIndex(this.children[i].node);\n                if (index !== -1) {\n                    this.swapChildrenDom(i, index);\n                }\n                else {\n                    this.addDomNodeAt(this.children[i].node, i);\n                }\n            }\n        }\n        while (this.node.childNodes.length > this.children.length) {\n            const child = this.node.childNodes[this.node.childNodes.length - 1];\n            this.node.removeChild(child);\n            child[ownerSymbol].dispose();\n        }\n    }\n    addChildDom(child) {\n        var _a, _b;\n        this.node.appendChild(child.node);\n        (_b = (_a = child).handleAttach) === null || _b === void 0 ? void 0 : _b.call(_a, this);\n    }\n    swapChildrenDom(indexA, indexB) {\n        if (indexA === indexB) {\n            return;\n        }\n        const nodeA = this.node.children[indexA];\n        const nodeB = this.node.children[indexB];\n        nodeA.remove();\n        nodeB.remove();\n        if (indexA < indexB) {\n            this.addDomNodeAt(nodeB, indexA);\n            this.addDomNodeAt(nodeA, indexB);\n        }\n        else {\n            this.addDomNodeAt(nodeA, indexB);\n            this.addDomNodeAt(nodeB, indexA);\n        }\n    }\n    getChildIndex(node) {\n        let i = 0;\n        for (const child of node.childNodes) {\n            if (child === node) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n    addDomNodeAt(node, index) {\n        var _a, _b, _c, _d;\n        if (index >= this.node.childElementCount) {\n            this.node.appendChild(node);\n            (_b = (_a = node[ownerSymbol]).handleAttach) === null || _b === void 0 ? void 0 : _b.call(_a, this);\n        }\n        else {\n            this.node.insertBefore(node, this.node.children[index]);\n            (_d = (_c = node[ownerSymbol]).handleAttach) === null || _d === void 0 ? void 0 : _d.call(_c, this);\n        }\n    }\n}\n//# sourceMappingURL=aurum_element.js.map","import { AurumElement } from './special/aurum_element';\nexport class A extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'a');\n        if (props !== null) {\n            this.bindProps(['href', 'target'], props);\n        }\n    }\n}\n//# sourceMappingURL=a.js.map","import { AurumElement } from './special/aurum_element';\nexport class Abbr extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'abbr');\n    }\n}\n//# sourceMappingURL=abbr.js.map","import { AurumElement } from './special/aurum_element';\nexport class Area extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'area');\n    }\n}\n//# sourceMappingURL=area.js.map","import { AurumElement } from './special/aurum_element';\nexport class Article extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'article');\n    }\n}\n//# sourceMappingURL=article.js.map","import { AurumElement } from './special/aurum_element';\nexport class Aside extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'aside');\n    }\n}\n//# sourceMappingURL=aside.js.map","import { AurumElement } from './special/aurum_element';\nexport class Audio extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'audio');\n        if (props !== null) {\n            this.bindProps(['controls', 'autoplay', 'loop', 'muted', 'preload', 'src'], props);\n        }\n    }\n}\n//# sourceMappingURL=audio.js.map","import { AurumElement } from './special/aurum_element';\nexport class B extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'b');\n    }\n}\n//# sourceMappingURL=b.js.map","import { AurumElement } from './special/aurum_element';\nexport class Br extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'br');\n    }\n}\n//# sourceMappingURL=br.js.map","import { AurumElement } from './special/aurum_element';\nexport class Button extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'button');\n        if (props !== null) {\n            this.bindProps(['disabled'], props);\n        }\n    }\n}\n//# sourceMappingURL=button.js.map","import { AurumElement } from './special/aurum_element';\nexport class Canvas extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'canvas');\n        if (props !== null) {\n            this.bindProps(['width', 'height'], props);\n        }\n    }\n}\n//# sourceMappingURL=canvas.js.map","import { AurumElement } from './special/aurum_element';\nexport class Data extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'data');\n        if (props !== null) {\n            this.bindProps(['datalue'], props);\n        }\n    }\n}\n//# sourceMappingURL=data.js.map","import { AurumElement } from './special/aurum_element';\nexport class Details extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'details');\n    }\n}\n//# sourceMappingURL=details.js.map","import { AurumElement } from './special/aurum_element';\nexport class Div extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'div');\n    }\n}\n//# sourceMappingURL=div.js.map","import { AurumElement } from './special/aurum_element';\nexport class Em extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'em');\n    }\n}\n//# sourceMappingURL=em.js.map","import { AurumElement } from './special/aurum_element';\nexport class Footer extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'footer');\n    }\n}\n//# sourceMappingURL=footer.js.map","import { AurumElement } from './special/aurum_element';\nexport class Form extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'form');\n    }\n}\n//# sourceMappingURL=form.js.map","import { AurumElement } from './special/aurum_element';\nexport class H1 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h1');\n    }\n}\n//# sourceMappingURL=h1.js.map","import { AurumElement } from './special/aurum_element';\nexport class H2 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h2');\n    }\n}\n//# sourceMappingURL=h2.js.map","import { AurumElement } from './special/aurum_element';\nexport class H3 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h3');\n    }\n}\n//# sourceMappingURL=h3.js.map","import { AurumElement } from './special/aurum_element';\nexport class H4 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h4');\n    }\n}\n//# sourceMappingURL=h4.js.map","import { AurumElement } from './special/aurum_element';\nexport class H5 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h5');\n    }\n}\n//# sourceMappingURL=h5.js.map","import { AurumElement } from './special/aurum_element';\nexport class H6 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h6');\n    }\n}\n//# sourceMappingURL=h6.js.map","import { AurumElement } from './special/aurum_element';\nexport class Header extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'header');\n    }\n}\n//# sourceMappingURL=header.js.map","import { AurumElement } from './special/aurum_element';\nexport class Heading extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'heading');\n    }\n}\n//# sourceMappingURL=heading.js.map","import { AurumElement } from './special/aurum_element';\nexport class I extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'i');\n    }\n}\n//# sourceMappingURL=i.js.map","import { AurumElement } from './special/aurum_element';\nexport class IFrame extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'iframe');\n        if (props !== null) {\n            this.bindProps(['src', 'srcdoc', 'width', 'height', 'allow', 'allowFullscreen', 'allowPaymentRequest'], props);\n        }\n    }\n}\n//# sourceMappingURL=iframe.js.map","import { AurumElement } from './special/aurum_element';\nexport class Img extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'img');\n        if (props !== null) {\n            this.bindProps(['src', 'alt', 'width', 'height', 'referrerPolicy', 'sizes', 'srcset', 'useMap'], props);\n        }\n    }\n}\n//# sourceMappingURL=img.js.map","import { AurumElement } from './special/aurum_element';\nconst inputEvents = { input: 'onInput', change: 'onChange' };\nconst inputProps = [\n    'placeholder',\n    'readonly',\n    'disabled',\n    'accept',\n    'alt',\n    'autocomplete',\n    'autofocus',\n    'checked',\n    'defaultChecked',\n    'formAction',\n    'formEnctype',\n    'formMethod',\n    'formNoValidate',\n    'formTarget',\n    'max',\n    'maxLength',\n    'min',\n    'minLength',\n    'pattern',\n    'multiple',\n    'required',\n    'type'\n];\nexport class Input extends AurumElement {\n    constructor(props, children) {\n        var _a;\n        super(props, children, 'input');\n        if (props !== null) {\n            if (props.inputValueSource) {\n                props.inputValueSource.unique().listenAndRepeat((value) => (this.node.value = value), this.cancellationToken);\n            }\n            else {\n                this.node.value = (_a = props.initialValue, (_a !== null && _a !== void 0 ? _a : ''));\n            }\n            this.bindProps(inputProps, props);\n            this.createEventHandlers(inputEvents, props);\n            if (props.inputValueSource) {\n                this.node.addEventListener('input', () => {\n                    props.inputValueSource.update(this.node.value);\n                });\n            }\n        }\n    }\n}\n//# sourceMappingURL=input.js.map","import { AurumElement } from './special/aurum_element';\nexport class Label extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'label');\n        if (props !== null) {\n            this.bindProps(['for'], props);\n        }\n    }\n}\n//# sourceMappingURL=label.js.map","import { AurumElement } from './special/aurum_element';\nexport class Li extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'li');\n    }\n}\n//# sourceMappingURL=li.js.map","import { AurumElement } from './special/aurum_element';\nexport class Link extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'link');\n        if (props !== null) {\n            this.bindProps(['href', 'rel', 'media', 'as', 'disabled', 'type'], props);\n        }\n    }\n}\n//# sourceMappingURL=link.js.map","import { AurumElement } from './special/aurum_element';\nexport class Nav extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'nav');\n    }\n}\n//# sourceMappingURL=nav.js.map","import { AurumElement } from './special/aurum_element';\nexport class NoScript extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'noscript');\n    }\n}\n//# sourceMappingURL=noscript.js.map","import { AurumElement } from './special/aurum_element';\nexport class Ol extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'ol');\n    }\n}\n//# sourceMappingURL=ol.js.map","import { AurumElement } from './special/aurum_element';\nexport class Option extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'option');\n    }\n}\n//# sourceMappingURL=option.js.map","import { AurumElement } from './special/aurum_element';\nexport class P extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'p');\n    }\n}\n//# sourceMappingURL=p.js.map","import { AurumElement } from './special/aurum_element';\nexport class Pre extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'pre');\n    }\n}\n//# sourceMappingURL=pre.js.map","import { AurumElement } from './special/aurum_element';\nexport class Progress extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'progress');\n        if (props !== null) {\n            this.bindProps(['max', 'value'], props);\n        }\n    }\n}\n//# sourceMappingURL=progress.js.map","import { AurumElement } from './special/aurum_element';\nexport class Q extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'q');\n    }\n}\n//# sourceMappingURL=q.js.map","import { AurumElement } from './special/aurum_element';\nexport class Script extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'script');\n        if (props !== null) {\n            this.bindProps(['src', 'async', 'defer', 'integrity', 'noModule', 'type'], props);\n        }\n    }\n}\n//# sourceMappingURL=script.js.map","import { AurumElement } from './special/aurum_element';\nconst selectEvents = { change: 'onChange' };\nexport class Select extends AurumElement {\n    constructor(props, children) {\n        var _a;\n        super(props, children, 'select');\n        if (props !== null) {\n            this.createEventHandlers(selectEvents, props);\n            this.initialSelection = props.initialSelection;\n            if (props.selectedIndexSource) {\n                this.selectedIndexSource = props.selectedIndexSource;\n                props.selectedIndexSource.unique().listenAndRepeat((value) => (this.node.selectedIndex = value), this.cancellationToken);\n            }\n            else {\n                this.node.selectedIndex = (_a = props.initialSelection, (_a !== null && _a !== void 0 ? _a : -1));\n            }\n            if (props.selectedIndexSource) {\n                this.needAttach = true;\n                this.node.addEventListener('change', () => {\n                    props.selectedIndexSource.update(this.node.selectedIndex);\n                });\n            }\n        }\n    }\n    handleAttach(parent) {\n        super.handleAttach(parent);\n        if (this.node.isConnected) {\n            if (this.selectedIndexSource) {\n                this.node.selectedIndex = this.selectedIndexSource.value;\n            }\n            else if (this.initialSelection !== undefined) {\n                this.node.selectedIndex = this.initialSelection;\n            }\n        }\n    }\n}\n//# sourceMappingURL=select.js.map","import { AurumElement } from './special/aurum_element';\nexport class Source extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'source');\n        if (props !== null) {\n            this.bindProps(['src', 'srcSet', 'media', 'sizes', 'type'], props);\n        }\n    }\n}\n//# sourceMappingURL=source.js.map","import { AurumElement } from './special/aurum_element';\nexport class Span extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'span');\n    }\n}\n//# sourceMappingURL=span.js.map","import { AurumElement } from './special/aurum_element';\nexport class Style extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'style');\n        if (props !== null) {\n            this.bindProps(['media'], props);\n        }\n    }\n}\n//# sourceMappingURL=style.js.map","import { AurumElement } from './special/aurum_element';\nexport class Sub extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'sub');\n    }\n}\n//# sourceMappingURL=sub.js.map","import { AurumElement } from './special/aurum_element';\nexport class Summary extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'summary');\n    }\n}\n//# sourceMappingURL=summary.js.map","import { AurumElement } from './special/aurum_element';\nexport class Sup extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'sup');\n    }\n}\n//# sourceMappingURL=sup.js.map","import { AurumElement } from './special/aurum_element';\nexport class Svg extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'svg');\n        if (props !== null) {\n            this.bindProps(['width', 'height'], props);\n        }\n    }\n}\n//# sourceMappingURL=svg.js.map","import { AurumElement } from './special/aurum_element';\nexport class Table extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'table');\n    }\n}\n//# sourceMappingURL=table.js.map","import { AurumElement } from './special/aurum_element';\nexport class Tbody extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'tbody');\n    }\n}\n//# sourceMappingURL=tbody.js.map","import { AurumElement } from './special/aurum_element';\nexport class Td extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'td');\n    }\n}\n//# sourceMappingURL=td.js.map","import { AurumElement } from './special/aurum_element';\nconst textAreaEvents = { input: 'onInput', change: 'onChange' };\nconst textAreaProps = [\n    'placeholder',\n    'readonly',\n    'disabled',\n    'rows',\n    'wrap',\n    'autocomplete',\n    'autofocus',\n    'max',\n    'maxLength',\n    'min',\n    'minLength',\n    'required',\n    'type'\n];\nexport class TextArea extends AurumElement {\n    constructor(props, children) {\n        var _a, _b, _c;\n        super(props, children, 'textArea');\n        if (props !== null) {\n            if (props.inputValueSource) {\n                this.node.value = (_b = (_a = props.initialValue, (_a !== null && _a !== void 0 ? _a : props.inputValueSource.value)), (_b !== null && _b !== void 0 ? _b : ''));\n                props.inputValueSource.unique().listen((value) => (this.node.value = value), this.cancellationToken);\n            }\n            else {\n                this.node.value = (_c = props.initialValue, (_c !== null && _c !== void 0 ? _c : ''));\n            }\n            this.bindProps(textAreaProps, props);\n            this.createEventHandlers(textAreaEvents, props);\n            if (props.inputValueSource) {\n                this.node.addEventListener('input', () => {\n                    props.inputValueSource.update(this.node.value);\n                });\n            }\n        }\n    }\n}\n//# sourceMappingURL=textarea.js.map","import { AurumElement } from './special/aurum_element';\nexport class Tfoot extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'tfoot');\n    }\n}\n//# sourceMappingURL=tfoot.js.map","import { AurumElement } from './special/aurum_element';\nexport class Th extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'th');\n    }\n}\n//# sourceMappingURL=th.js.map","import { AurumElement } from './special/aurum_element';\nexport class Thead extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'thead');\n    }\n}\n//# sourceMappingURL=thead.js.map","import { AurumElement } from './special/aurum_element';\nexport class Time extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'time');\n        if (props !== null) {\n            this.bindProps(['datetime'], props);\n        }\n    }\n}\n//# sourceMappingURL=time.js.map","import { AurumElement } from './special/aurum_element';\nexport class Title extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'title');\n    }\n}\n//# sourceMappingURL=title.js.map","import { AurumElement } from './special/aurum_element';\nexport class Tr extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'tr');\n    }\n}\n//# sourceMappingURL=tr.js.map","import { AurumElement } from './special/aurum_element';\nexport class Ul extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'ul');\n    }\n}\n//# sourceMappingURL=ul.js.map","import { AurumElement } from './special/aurum_element';\nexport class Video extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'video');\n        if (props !== null) {\n            this.bindProps(['controls', 'autoplay', 'loop', 'muted', 'preload', 'src', 'poster', 'width', 'height'], props);\n        }\n    }\n}\n//# sourceMappingURL=video.js.map","import { AurumElement } from './special/aurum_element';\nexport class Body extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'body');\n    }\n}\n//# sourceMappingURL=body.js.map","import { AurumElement } from './special/aurum_element';\nexport class Head extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'head');\n    }\n}\n//# sourceMappingURL=head.js.map","import { DataSource } from './data_source';\nimport { EventEmitter } from '../utilities/event_emitter';\nexport class ObjectDataSource {\n    constructor(initialData) {\n        if (initialData) {\n            this.data = initialData;\n        }\n        this.updateEvent = new EventEmitter();\n        this.updateEventOnKey = new Map();\n    }\n    pick(key, cancellationToken) {\n        var _a;\n        const subDataSource = new DataSource((_a = this.data) === null || _a === void 0 ? void 0 : _a[key]);\n        this.listenOnKey(key, (v) => {\n            subDataSource.update(v.newValue);\n        }, cancellationToken);\n        return subDataSource;\n    }\n    listen(callback, cancellationToken) {\n        return this.updateEvent.subscribe(callback, cancellationToken).cancel;\n    }\n    listenOnKeyAndRepeat(key, callback, cancellationToken) {\n        callback({\n            key,\n            newValue: this.data[key],\n            oldValue: undefined\n        });\n        return this.listenOnKey(key, callback, cancellationToken);\n    }\n    listenOnKey(key, callback, cancellationToken) {\n        if (!this.updateEventOnKey.has(key)) {\n            this.updateEventOnKey.set(key, new EventEmitter());\n        }\n        const event = this.updateEventOnKey.get(key);\n        return event.subscribe(callback, cancellationToken).cancel;\n    }\n    get(key) {\n        return this.data[key];\n    }\n    set(key, value) {\n        if (this.data[key] === value) {\n            return;\n        }\n        const old = this.data[key];\n        this.data[key] = value;\n        this.updateEvent.fire({ oldValue: old, key, newValue: this.data[key] });\n        if (this.updateEventOnKey.has(key)) {\n            this.updateEventOnKey.get(key).fire({ oldValue: old, key, newValue: this.data[key] });\n        }\n    }\n    assign(newData) {\n        for (const key of Object.keys(newData)) {\n            this.set(key, newData[key]);\n        }\n    }\n    toObject() {\n        return Object.assign({}, this.data);\n    }\n    toDataSource() {\n        const stream = new DataSource(this.data);\n        this.listen((s) => {\n            stream.update(this.data);\n        });\n        return stream;\n    }\n}\n//# sourceMappingURL=object_data_source.js.map","import { Template } from '../nodes/special/aurum_element';\nimport { ownerSymbol } from './owner_symbol';\nimport { Div } from '../nodes/div';\nimport { Button } from '../nodes/button';\nimport { Input } from '../nodes/input';\nimport { Li } from '../nodes/li';\nimport { Span } from '../nodes/span';\nimport { Style } from '../nodes/style';\nimport { Audio } from '../nodes/audio';\nimport { Ul } from '../nodes/ul';\nimport { P } from '../nodes/p';\nimport { Img } from '../nodes/img';\nimport { Link } from '../nodes/link';\nimport { Canvas } from '../nodes/canvas';\nimport { A } from '../nodes/a';\nimport { Article } from '../nodes/article';\nimport { Br } from '../nodes/br';\nimport { Form } from '../nodes/form';\nimport { Label } from '../nodes/label';\nimport { Ol } from '../nodes/ol';\nimport { Pre } from '../nodes/pre';\nimport { Progress } from '../nodes/progress';\nimport { Table } from '../nodes/table';\nimport { Td } from '../nodes/td';\nimport { Tr } from '../nodes/tr';\nimport { Th } from '../nodes/th';\nimport { TextArea } from '../nodes/textarea';\nimport { H1 } from '../nodes/h1';\nimport { H2 } from '../nodes/h2';\nimport { H3 } from '../nodes/h3';\nimport { H4 } from '../nodes/h4';\nimport { H5 } from '../nodes/h5';\nimport { H6 } from '../nodes/h6';\nimport { Header } from '../nodes/header';\nimport { Footer } from '../nodes/footer';\nimport { Nav } from '../nodes/nav';\nimport { B } from '../nodes/b';\nimport { I } from '../nodes/i';\nimport { Script } from '../nodes/script';\nimport { Abbr } from '../nodes/abbr';\nimport { Area } from '../nodes/area';\nimport { Aside } from '../nodes/aside';\nimport { Em } from '../nodes/em';\nimport { Heading } from '../nodes/heading';\nimport { IFrame } from '../nodes/iframe';\nimport { NoScript } from '../nodes/noscript';\nimport { Q } from '../nodes/q';\nimport { Select } from '../nodes/select';\nimport { Source } from '../nodes/source';\nimport { Title } from '../nodes/title';\nimport { Video } from '../nodes/video';\nimport { Tbody } from '../nodes/tbody';\nimport { Tfoot } from '../nodes/tfoot';\nimport { Thead } from '../nodes/thead';\nimport { Summary } from '../nodes/summary';\nimport { Details } from '../nodes/details';\nimport { Sub } from '../nodes/sub';\nimport { Sup } from '../nodes/sup';\nimport { Svg } from '../nodes/svg';\nimport { Data } from '../nodes/data';\nimport { Time } from '../nodes/time';\nimport { Option } from '../nodes/option';\nconst nodeMap = {\n    button: Button,\n    div: Div,\n    input: Input,\n    li: Li,\n    span: Span,\n    style: Style,\n    ul: Ul,\n    p: P,\n    img: Img,\n    link: Link,\n    canvas: Canvas,\n    a: A,\n    article: Article,\n    br: Br,\n    form: Form,\n    label: Label,\n    ol: Ol,\n    pre: Pre,\n    progress: Progress,\n    table: Table,\n    td: Td,\n    tr: Tr,\n    th: Th,\n    textarea: TextArea,\n    h1: H1,\n    h2: H2,\n    h3: H3,\n    h4: H4,\n    h5: H5,\n    h6: H6,\n    header: Header,\n    footer: Footer,\n    nav: Nav,\n    b: B,\n    i: I,\n    script: Script,\n    abbr: Abbr,\n    area: Area,\n    aside: Aside,\n    audio: Audio,\n    em: Em,\n    heading: Heading,\n    iframe: IFrame,\n    noscript: NoScript,\n    option: Option,\n    q: Q,\n    select: Select,\n    source: Source,\n    title: Title,\n    video: Video,\n    tbody: Tbody,\n    tfoot: Tfoot,\n    thead: Thead,\n    summary: Summary,\n    details: Details,\n    sub: Sub,\n    sup: Sup,\n    svg: Svg,\n    data: Data,\n    time: Time,\n    template: Template\n};\nexport class Aurum {\n    static attach(aurumElement, dom) {\n        if (dom[ownerSymbol]) {\n            throw new Error('This node is already managed by aurum and cannot be used');\n        }\n        dom.appendChild(aurumElement.node);\n        aurumElement['handleAttach'](aurumElement);\n        dom[ownerSymbol] = aurumElement;\n    }\n    static isAttached(dom) {\n        return dom[ownerSymbol] !== undefined;\n    }\n    static detach(domNode) {\n        if (domNode[ownerSymbol]) {\n            domNode[ownerSymbol].node.remove();\n            domNode[ownerSymbol].handleDetach();\n            domNode[ownerSymbol].dispose();\n            domNode[ownerSymbol] = undefined;\n        }\n    }\n    static factory(node, args, ...innerNodes) {\n        if (typeof node === 'string') {\n            const type = node;\n            node = nodeMap[node];\n            if (node === undefined) {\n                throw new Error(`Node ${type} does not exist or is not supported`);\n            }\n        }\n        let children;\n        if (innerNodes.length && Array.isArray(innerNodes[0])) {\n            children = [].concat(...innerNodes).filter((e) => e);\n        }\n        else {\n            children = innerNodes.filter((e) => e);\n        }\n        const templateMap = {};\n        let defaultTemplate;\n        let hasRef = false;\n        for (const c of children) {\n            if (typeof c === 'string') {\n                continue;\n            }\n            if (c instanceof Template && (c.ref === undefined || c.ref === 'default')) {\n                defaultTemplate = c;\n            }\n            if (c.ref !== undefined) {\n                templateMap[c.ref] = c;\n                hasRef = true;\n            }\n        }\n        if (defaultTemplate) {\n            args = (args !== null && args !== void 0 ? args : {});\n            args.template = defaultTemplate;\n        }\n        if (hasRef) {\n            args = (args !== null && args !== void 0 ? args : {});\n            args.templateMap = templateMap;\n        }\n        let instance;\n        if (node.prototype) {\n            instance = new node(args, children);\n        }\n        else {\n            instance = node(args, children);\n        }\n        return instance;\n    }\n}\n//# sourceMappingURL=aurum.js.map","import { AurumElement } from './aurum_element';\nexport class Custom extends AurumElement {\n    constructor(props, children) {\n        super(props, children, props.tag);\n        if (props.attributes) {\n            if (props !== null) {\n                this.bindProps(Object.keys(props.attributes), props.attributes);\n            }\n        }\n    }\n}\n//# sourceMappingURL=custom.js.map","import { AurumElement } from './aurum_element';\nexport class Switch extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'switch');\n        this.firstRender = true;\n        this.templateMap = props.templateMap;\n        this.renderSwitch(props.state.value);\n        props.state.listen((data) => {\n            this.renderSwitch(data);\n        }, this.cancellationToken);\n    }\n    selectTemplate(ref) {\n        var _a;\n        if (ref === undefined || ref === null) {\n            return this.template;\n        }\n        else {\n            return _a = this.templateMap[ref], (_a !== null && _a !== void 0 ? _a : this.template);\n        }\n    }\n    renderSwitch(data) {\n        var _a;\n        if (data !== this.lastValue || this.firstRender) {\n            this.lastValue = data;\n            this.firstRender = false;\n            const template = this.selectTemplate((_a = data) === null || _a === void 0 ? void 0 : _a.toString());\n            if (template !== this.lastTemplate) {\n                this.lastTemplate = template;\n                this.clearChildren();\n                if (template) {\n                    const result = template.generate();\n                    this.addChild(result);\n                }\n            }\n        }\n    }\n}\n//# sourceMappingURL=switch.js.map","import { Switch } from './switch';\nimport { DataSource } from '../../stream/data_source';\nexport class AurumRouter extends Switch {\n    constructor(props, children) {\n        const urlDataSource = new DataSource(location.hash.substring(1));\n        super(Object.assign(Object.assign({}, props), { state: urlDataSource }), children);\n        window.addEventListener('hashchange', () => {\n            const hash = location.hash.substring(1);\n            if (hash.includes('?')) {\n                urlDataSource.update(hash.substring(0, hash.indexOf('?')));\n            }\n            else {\n                urlDataSource.update(hash);\n            }\n        });\n    }\n    selectTemplate(ref) {\n        if (ref === undefined || ref === null) {\n            return this.template;\n        }\n        else {\n            if (this.templateMap[ref]) {\n                return this.templateMap[ref];\n            }\n            else {\n                const segments = ref.split('/');\n                segments.pop();\n                while (segments.length) {\n                    const path = segments.join('/');\n                    if (this.templateMap[path]) {\n                        return this.templateMap[path];\n                    }\n                    segments.pop();\n                }\n                return this.template;\n            }\n        }\n    }\n}\n//# sourceMappingURL=router.js.map","import { AurumElement } from './aurum_element';\nexport class Suspense extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'suspense');\n        props.loader().then((newElement) => {\n            this.clearChildren();\n            this.addChild(newElement);\n        });\n    }\n}\n//# sourceMappingURL=suspense.js.map"],"names":["EventEmitter","subscribeChannel","onAfterFire","prototypeAccessors","subscriptions","this","length","subscribe","callback","cancellationToken","createSubscription","hasSubscriptions","cancelAll","isFiring","push","fireFiltered","data","filter","i","afterFire","forEach","cb","fire","channel","that","subscription","facade","cancel","undefined","addCancelable","index","indexOf","splice","DataSource","initialValue","value","updateEvent","update","newValue","updating","Error","backPropagate","sender","listenAndRepeat","listen","filteredSource","filterDuplex","cb2","pipe","targetDataSource","v","pipeDuplex","map","mappedSource","mapDuplex","reverseMap","unique","uniqueSource","uniqueDuplex","reduce","reducer","reduceSource","aggregate","otherSource","combinator","aggregatedSource","combine","combinedDataSource","debounce","time","timeout","debouncedDataSource","clearTimeout","setTimeout","buffer","bufferedDataSource","queue","queueDataSource","ArrayDataSource","pick","key","subDataSource","_a","initialData","slice","lengthSource","items","newState","count","getData","get","set","item","old","swap","indexA","indexB","itemA","itemB","swapItems","appendArray","Array","let","n","unshift","ref","pop","merge","newData","removeRight","result","removeLeft","remove","clear","shift","toArray","sort","comparator","SortedArrayView","mapper","MappedArrayView","FilteredArrayView","callbackfn","thisArg","toDataSource","stream","s","change","parent","initial","operationDetailed","ref$1","isArray","viewFilter","filteredItems","target","updateFilter","refresh","LinkedListNode","deleteNext","next","overNext","previous","deletePrevious","overPrevious","LinkedList","d","append","find","predicate","ptr","rootNode","element","lastNode","prepend","e","CancellationToken","cancelables","cancellables","_isCancelled","isCanceled","delegate","throwIfCancelled","console","log","removeCancelable","addDisposable","disposable","dispose","callIfNotCancelled","action","id","cancelable","setInterval","clearInterval","requestAnimationFrame","cancelAnimationFrame","animationLoop","f","msg","chain","twoWays","registerDomEvent","eventEmitter","event","addEventListener","removeEventListener","c","const","ownerSymbol","Symbol","AurumTextElement","text","node","create","textContent","resolveStringSource","source","document","createTextNode","hasParent","parentElement","removeChild","_b","call","defaultEvents","drag","dragstart","dragend","dragexit","dragover","dragenter","dragleave","blur","focus","click","dblclick","keydown","keyhit","keyup","mousedown","mouseup","mousemove","mouseenter","mouseleave","mousewheel","defaultProps","AurumElement","props","children","domNodeName","onDispose","onAttach","needAttach","onDetach","template","initialize","onCreate","addChildren","createEventHandlers","dataProps","Object","keys","includes","bindProps","class","handleClass","repeatModel","handleRepeat","dynamicProps","assignStringSourceToAttribute","events","dataSource","repeatData","index2","generate","render","childNodes","addChildDom","child","getChildIndex","swapChildrenDom","addDomNodeAt","setAttribute","handleAttach","isConnected","_e","_c","_d","handleDetach","className","join","p","createElement","hasChild","appendChild","nodeA","nodeB","childElementCount","insertBefore","removeChildAt","swapChildren","clearChildren","addChild","Template","childNodeToAurum","AurumFragment","toString","addChildAt","nodes","internalDispose","detach","generator","createDocumentFragment","A","Abbr","Area","Article","Aside","Audio","B","Br","Button","Canvas","Data","Details","Div","Em","Footer","Form","H1","H2","H3","H4","H5","H6","Header","Heading","I","IFrame","Img","inputEvents","input","inputProps","Input","inputValueSource","Label","Li","Link","Nav","NoScript","Ol","Option","P","Pre","Progress","Q","Script","selectEvents","Select","initialSelection","selectedIndexSource","selectedIndex","Source","Span","Style","Sub","Summary","Sup","Svg","Table","Tbody","Td","textAreaEvents","textAreaProps","TextArea","Tfoot","Th","Thead","Time","Title","Tr","Ul","Video","Body","Head","ObjectDataSource","updateEventOnKey","Map","listenOnKey","listenOnKeyAndRepeat","has","assign","toObject","nodeMap","button","div","li","span","style","ul","img","link","canvas","a","article","br","form","label","ol","pre","progress","table","td","tr","th","textarea","h1","h2","h3","h4","h5","h6","header","footer","nav","b","script","abbr","area","aside","audio","em","heading","iframe","noscript","option","q","select","title","video","tbody","tfoot","thead","summary","details","sub","sup","svg","Aurum","attach","aurumElement","dom","isAttached","domNode","factory","args","type","defaultTemplate","templateMap","hasRef","innerNodes","concat","prototype","Custom","tag","attributes","Switch","firstRender","renderSwitch","state","selectTemplate","lastValue","lastTemplate","AurumRouter","urlDataSource","location","hash","substring","window","segments","split","path","Suspense","loader","then","newElement"],"mappings":"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"}