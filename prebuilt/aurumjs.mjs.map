{"version":3,"file":"aurumjs.mjs","sources":["../dist/utilities/event_emitter.js","../dist/stream/data_source.js","../dist/stream/object_data_source.js","../dist/utilities/owner_symbol.js","../dist/nodes/special/aurum_text.js","../dist/nodes/special/aurum_element.js","../dist/nodes/div.js","../dist/nodes/button.js","../dist/nodes/input.js","../dist/nodes/li.js","../dist/nodes/span.js","../dist/nodes/style.js","../dist/nodes/audio.js","../dist/nodes/ul.js","../dist/nodes/p.js","../dist/nodes/img.js","../dist/nodes/link.js","../dist/nodes/canvas.js","../dist/nodes/a.js","../dist/nodes/article.js","../dist/nodes/br.js","../dist/nodes/form.js","../dist/nodes/label.js","../dist/nodes/ol.js","../dist/nodes/pre.js","../dist/nodes/progress.js","../dist/nodes/table.js","../dist/nodes/td.js","../dist/nodes/tr.js","../dist/nodes/th.js","../dist/nodes/textarea.js","../dist/nodes/h1.js","../dist/nodes/h2.js","../dist/nodes/h3.js","../dist/nodes/h4.js","../dist/nodes/h5.js","../dist/nodes/h6.js","../dist/nodes/header.js","../dist/nodes/footer.js","../dist/nodes/nav.js","../dist/nodes/b.js","../dist/nodes/i.js","../dist/nodes/script.js","../dist/nodes/abbr.js","../dist/nodes/area.js","../dist/nodes/aside.js","../dist/nodes/em.js","../dist/nodes/heading.js","../dist/nodes/iframe.js","../dist/nodes/noscript.js","../dist/nodes/q.js","../dist/nodes/select.js","../dist/nodes/source.js","../dist/nodes/title.js","../dist/nodes/video.js","../dist/nodes/tbody.js","../dist/nodes/tfoot.js","../dist/nodes/thead.js","../dist/nodes/summary.js","../dist/nodes/details.js","../dist/nodes/sub.js","../dist/nodes/sup.js","../dist/nodes/svg.js","../dist/nodes/data.js","../dist/nodes/time.js","../dist/utilities/aurum.js","../dist/nodes/option.js","../dist/nodes/template.js","../dist/utilities/linkedlist/linked_list_node.js","../dist/utilities/linkedlist/linked_list.js","../dist/utilities/cancellation_token.js","../dist/nodes/special/custom.js","../dist/nodes/special/router.js","../dist/nodes/special/suspense.js","../dist/nodes/special/switch.js"],"sourcesContent":["export class EventEmitter {\n    constructor() {\n        this.subscribeChannel = [];\n        this.onAfterFire = [];\n    }\n    get subscriptions() {\n        return this.subscribeChannel.length;\n    }\n    subscribe(callback, cancellationToken) {\n        const { facade } = this.createSubscription(callback, this.subscribeChannel, cancellationToken);\n        return facade;\n    }\n    hasSubscriptions() {\n        return this.subscriptions > 0;\n    }\n    cancelAll() {\n        if (!this.isFiring) {\n            this.subscribeChannel.length = 0;\n        }\n        else {\n            this.onAfterFire.push(() => (this.subscribeChannel.length = 0));\n        }\n    }\n    fireFiltered(data, filter) {\n        this.isFiring = true;\n        let length = this.subscribeChannel.length;\n        for (let i = 0; i < length; i++) {\n            if (this.subscribeChannel[i].callback !== filter) {\n                this.subscribeChannel[i].callback(data);\n            }\n        }\n        this.isFiring = false;\n        this.afterFire();\n    }\n    afterFire() {\n        if (this.onAfterFire.length > 0) {\n            this.onAfterFire.forEach((cb) => cb());\n            this.onAfterFire.length = 0;\n        }\n    }\n    fire(data) {\n        this.isFiring = true;\n        let length = this.subscribeChannel.length;\n        for (let i = 0; i < length; i++) {\n            this.subscribeChannel[i].callback(data);\n        }\n        this.isFiring = false;\n        this.afterFire();\n    }\n    createSubscription(callback, channel, cancellationToken) {\n        const that = this;\n        const subscription = {\n            callback\n        };\n        const facade = {\n            cancel() {\n                that.cancel(subscription, channel);\n            }\n        };\n        if (cancellationToken !== undefined) {\n            cancellationToken.addCancelable(() => that.cancel(subscription, channel));\n        }\n        channel.push(subscription);\n        return { subscription, facade };\n    }\n    cancel(subscription, channel) {\n        let index = channel.indexOf(subscription);\n        if (index >= 0) {\n            if (!this.isFiring) {\n                channel.splice(index, 1);\n            }\n            else {\n                this.onAfterFire.push(() => this.cancel(subscription, channel));\n            }\n        }\n    }\n}\n//# sourceMappingURL=event_emitter.js.map","import { EventEmitter } from '../utilities/event_emitter';\nexport class DataSource {\n    constructor(initialValue) {\n        this.value = initialValue;\n        this.updateEvent = new EventEmitter();\n    }\n    update(newValue) {\n        if (this.updating) {\n            throw new Error('Problem in datas source: Unstable value propagation, when updating a value the stream was updated back as a direct response. This can lead to infinite loops and is therefore not allowed');\n        }\n        this.updating = true;\n        this.value = newValue;\n        this.updateEvent.fire(newValue);\n        this.updating = false;\n    }\n    backPropagate(sender, newValue) {\n        this.value = newValue;\n        this.updating = true;\n        this.updateEvent.fireFiltered(newValue, sender);\n        this.updating = false;\n    }\n    listenAndRepeat(callback, cancellationToken) {\n        callback(this.value);\n        return this.listen(callback, cancellationToken);\n    }\n    listen(callback, cancellationToken) {\n        return this.updateEvent.subscribe(callback, cancellationToken).cancel;\n    }\n    filter(callback, cancellationToken) {\n        const filteredSource = new DataSource();\n        this.listen((value) => {\n            if (callback(value)) {\n                filteredSource.update(value);\n            }\n        }, cancellationToken);\n        return filteredSource;\n    }\n    filterDuplex(callback, cancellationToken) {\n        const filteredSource = new DataSource();\n        const cb = (value) => {\n            if (callback(value)) {\n                filteredSource.backPropagate(cb2, value);\n            }\n        };\n        const cb2 = (value) => {\n            if (callback(value)) {\n                this.backPropagate(cb, value);\n            }\n        };\n        this.listen(cb, cancellationToken);\n        filteredSource.listen(cb2, cancellationToken);\n        return filteredSource;\n    }\n    pipe(targetDataSource, cancellationToken) {\n        this.listen((v) => targetDataSource.update(v), cancellationToken);\n    }\n    pipeDuplex(targetDataSource, cancellationToken) {\n        const cb = (v) => targetDataSource.backPropagate(cb2, v);\n        const cb2 = (v) => this.backPropagate(cb, v);\n        this.listen(cb, cancellationToken);\n        targetDataSource.listen(cb2, cancellationToken);\n    }\n    map(callback, cancellationToken) {\n        const mappedSource = new DataSource(callback(this.value));\n        this.listen((value) => {\n            mappedSource.update(callback(value));\n        }, cancellationToken);\n        return mappedSource;\n    }\n    mapDuplex(callback, reverseMap, cancellationToken) {\n        const mappedSource = new DataSource(callback(this.value));\n        const cb = (value) => mappedSource.backPropagate(cb2, callback(value));\n        const cb2 = (value) => this.backPropagate(cb, reverseMap(value));\n        this.listen(cb, cancellationToken);\n        mappedSource.listen(cb2, cancellationToken);\n        return mappedSource;\n    }\n    unique(cancellationToken) {\n        const uniqueSource = new DataSource(this.value);\n        this.listen((value) => {\n            if (value !== uniqueSource.value) {\n                uniqueSource.update(value);\n            }\n        }, cancellationToken);\n        return uniqueSource;\n    }\n    uniqueDuplex(cancellationToken) {\n        const uniqueSource = new DataSource(this.value);\n        const cb = (value) => {\n            if (value !== uniqueSource.value) {\n                uniqueSource.backPropagate(cb2, value);\n            }\n        };\n        const cb2 = (value) => {\n            if (value !== this.value) {\n                this.backPropagate(cb, value);\n            }\n        };\n        this.listen(cb, cancellationToken);\n        uniqueSource.listen(cb2, cancellationToken);\n        return uniqueSource;\n    }\n    reduce(reducer, initialValue, cancellationToken) {\n        const reduceSource = new DataSource(initialValue);\n        this.listen((v) => reduceSource.update(reducer(reduceSource.value, v)), cancellationToken);\n        return reduceSource;\n    }\n    aggregate(otherSource, combinator, cancellationToken) {\n        const aggregatedSource = new DataSource(combinator(this.value, otherSource.value));\n        this.listen(() => aggregatedSource.update(combinator(this.value, otherSource.value)), cancellationToken);\n        otherSource.listen(() => aggregatedSource.update(combinator(this.value, otherSource.value)), cancellationToken);\n        return aggregatedSource;\n    }\n    combine(otherSource, cancellationToken) {\n        const combinedDataSource = new DataSource();\n        this.pipe(combinedDataSource, cancellationToken);\n        otherSource.pipe(combinedDataSource, cancellationToken);\n        return combinedDataSource;\n    }\n    debounce(time, cancellationToken) {\n        const debouncedDataSource = new DataSource(this.value);\n        let timeout;\n        this.listen((v) => {\n            clearTimeout(timeout);\n            timeout = setTimeout(() => {\n                debouncedDataSource.update(v);\n            }, time);\n        }, cancellationToken);\n        return debouncedDataSource;\n    }\n    buffer(time, cancellationToken) {\n        const bufferedDataSource = new DataSource();\n        let timeout;\n        let buffer = [];\n        this.listen((v) => {\n            buffer.push(v);\n            if (!timeout) {\n                timeout = setTimeout(() => {\n                    timeout = undefined;\n                    bufferedDataSource.update(buffer);\n                    buffer = [];\n                }, time);\n            }\n        }, cancellationToken);\n        return bufferedDataSource;\n    }\n    queue(cancellationToken) {\n        const queueDataSource = new ArrayDataSource();\n        this.listen((v) => {\n            queueDataSource.push(v);\n        }, cancellationToken);\n        return queueDataSource;\n    }\n    pick(key, cancellationToken) {\n        var _a;\n        const subDataSource = new DataSource((_a = this.value) === null || _a === void 0 ? void 0 : _a[key]);\n        this.listen((v) => {\n            if (v !== undefined && v !== null) {\n                subDataSource.update(v[key]);\n            }\n            else {\n                subDataSource.update(v);\n            }\n        }, cancellationToken);\n        return subDataSource;\n    }\n    cancelAll() {\n        this.updateEvent.cancelAll();\n    }\n}\nexport class ArrayDataSource {\n    constructor(initialData) {\n        if (initialData) {\n            this.data = initialData.slice();\n        }\n        else {\n            this.data = [];\n        }\n        this.lengthSource = new DataSource(this.data.length).unique();\n        this.updateEvent = new EventEmitter();\n    }\n    listenAndRepeat(callback, cancellationToken) {\n        callback({\n            operation: 'add',\n            operationDetailed: 'append',\n            index: 0,\n            items: this.data,\n            newState: this.data,\n            count: this.data.length\n        });\n        return this.listen(callback, cancellationToken);\n    }\n    listen(callback, cancellationToken) {\n        return this.updateEvent.subscribe(callback, cancellationToken).cancel;\n    }\n    get length() {\n        return this.lengthSource;\n    }\n    getData() {\n        return this.data.slice();\n    }\n    get(index) {\n        return this.data[index];\n    }\n    set(index, item) {\n        const old = this.data[index];\n        if (old === item) {\n            return;\n        }\n        this.data[index] = item;\n        this.update({ operation: 'replace', operationDetailed: 'replace', target: old, count: 1, index, items: [item], newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    swap(indexA, indexB) {\n        if (indexA === indexB) {\n            return;\n        }\n        const itemA = this.data[indexA];\n        const itemB = this.data[indexB];\n        this.data[indexB] = itemA;\n        this.data[indexA] = itemB;\n        this.update({ operation: 'swap', operationDetailed: 'swap', index: indexA, index2: indexB, items: [itemA, itemB], newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    swapItems(itemA, itemB) {\n        if (itemA === itemB) {\n            return;\n        }\n        const indexA = this.data.indexOf(itemA);\n        const indexB = this.data.indexOf(itemB);\n        if (indexA !== -1 && indexB !== -1) {\n            this.data[indexB] = itemA;\n            this.data[indexA] = itemB;\n        }\n        this.update({ operation: 'swap', operationDetailed: 'swap', index: indexA, index2: indexB, items: [itemA, itemB], newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    appendArray(items) {\n        const old = this.data;\n        this.data = new Array(old.length);\n        let i = 0;\n        for (i = 0; i < old.length; i++) {\n            this.data[i] = old[i];\n        }\n        for (let n = 0; n < items.length; n++) {\n            this.data[i + n] = items[n];\n        }\n        this.update({\n            operation: 'add',\n            operationDetailed: 'append',\n            count: items.length,\n            index: this.data.length - items.length,\n            items,\n            newState: this.data\n        });\n        this.lengthSource.update(this.data.length);\n    }\n    push(...items) {\n        this.appendArray(items);\n        this.lengthSource.update(this.data.length);\n    }\n    unshift(...items) {\n        this.data.unshift(...items);\n        this.update({ operation: 'add', operationDetailed: 'prepend', count: items.length, items, index: 0, newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    pop() {\n        const item = this.data.pop();\n        this.update({\n            operation: 'remove',\n            operationDetailed: 'removeRight',\n            count: 1,\n            index: this.data.length,\n            items: [item],\n            newState: this.data\n        });\n        this.lengthSource.update(this.data.length);\n        return item;\n    }\n    merge(newData) {\n        for (let i = 0; i < newData.length; i++) {\n            if (this.data[i] !== newData[i]) {\n                if (this.data.length > i) {\n                    this.set(i, newData[i]);\n                }\n                else {\n                    this.push(newData[i]);\n                }\n            }\n        }\n        if (this.data.length > newData.length) {\n            this.removeRight(this.data.length - newData.length);\n        }\n        this.lengthSource.update(this.data.length);\n    }\n    removeRight(count) {\n        const length = this.data.length;\n        const result = this.data.splice(length - count, count);\n        this.update({ operation: 'remove', operationDetailed: 'removeRight', count, index: length - count, items: result, newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    removeLeft(count) {\n        const result = this.data.splice(0, count);\n        this.update({ operation: 'remove', operationDetailed: 'removeLeft', count, index: 0, items: result, newState: this.data });\n        this.lengthSource.update(this.data.length);\n    }\n    remove(item) {\n        const index = this.data.indexOf(item);\n        if (index !== -1) {\n            this.data.splice(index, 1);\n            this.update({ operation: 'remove', operationDetailed: 'remove', count: 1, index, items: [item], newState: this.data });\n            this.lengthSource.update(this.data.length);\n        }\n    }\n    clear() {\n        const items = this.data;\n        this.data = [];\n        this.update({\n            operation: 'remove',\n            operationDetailed: 'clear',\n            count: items.length,\n            index: 0,\n            items,\n            newState: this.data\n        });\n        this.lengthSource.update(this.data.length);\n    }\n    shift() {\n        const item = this.data.shift();\n        this.update({ operation: 'remove', operationDetailed: 'removeLeft', items: [item], count: 1, index: 0, newState: this.data });\n        this.lengthSource.update(this.data.length);\n        return item;\n    }\n    toArray() {\n        return this.data.slice();\n    }\n    sort(comparator, cancellationToken) {\n        return new SortedArrayView(this, comparator, cancellationToken);\n    }\n    map(mapper, cancellationToken) {\n        return new MappedArrayView(this, mapper, cancellationToken);\n    }\n    filter(callback, cancellationToken) {\n        return new FilteredArrayView(this, callback, cancellationToken);\n    }\n    forEach(callbackfn) {\n        return this.data.forEach(callbackfn);\n    }\n    toDataSource() {\n        const stream = new DataSource(this.data);\n        this.listen((s) => {\n            stream.update(s.newState);\n        });\n        return stream;\n    }\n    update(change) {\n        this.updateEvent.fire(change);\n    }\n}\nexport class MappedArrayView extends ArrayDataSource {\n    constructor(parent, mapper, cancellationToken) {\n        const initial = parent.getData().map(mapper);\n        super(initial);\n        this.mapper = mapper;\n        parent.listen((change) => {\n            switch (change.operationDetailed) {\n                case 'removeLeft':\n                    this.removeLeft(change.count);\n                    break;\n                case 'removeRight':\n                    this.removeRight(change.count);\n                    break;\n                case 'remove':\n                    this.remove(this.data[change.index]);\n                    break;\n                case 'clear':\n                    this.clear();\n                    break;\n                case 'prepend':\n                    this.unshift(...change.items.map(this.mapper));\n                    break;\n                case 'append':\n                    this.appendArray(change.items.map(this.mapper));\n                    break;\n                case 'swap':\n                    this.swap(change.index, change.index2);\n                    break;\n                case 'replace':\n                    this.set(change.index, this.mapper(change.items[0]));\n                    break;\n            }\n        }, cancellationToken);\n    }\n}\nexport class SortedArrayView extends ArrayDataSource {\n    constructor(parent, comparator, cancellationToken) {\n        const initial = parent.getData().sort(comparator);\n        super(initial);\n        this.comparator = comparator;\n        parent.listen((change) => {\n            switch (change.operationDetailed) {\n                case 'removeLeft':\n                    this.removeLeft(change.count);\n                    break;\n                case 'removeRight':\n                    this.removeRight(change.count);\n                    break;\n                case 'remove':\n                    this.remove(change.items[0]);\n                    break;\n                case 'clear':\n                    this.data.length = 0;\n                    break;\n                case 'prepend':\n                    this.unshift(...change.items);\n                    this.data.sort(this.comparator);\n                    break;\n                case 'append':\n                    this.push(...change.items);\n                    this.data.sort(this.comparator);\n                    break;\n                case 'swap':\n                    break;\n                case 'replace':\n                    this.set(change.index, change.items[0]);\n                    this.data.sort(this.comparator);\n                    break;\n            }\n        }, cancellationToken);\n    }\n}\nexport class FilteredArrayView extends ArrayDataSource {\n    constructor(parent, filter, cancellationToken) {\n        if (Array.isArray(parent)) {\n            parent = new ArrayDataSource(parent);\n        }\n        filter = filter !== null && filter !== void 0 ? filter : (() => true);\n        const initial = parent.data.filter(filter);\n        super(initial);\n        this.parent = parent;\n        this.viewFilter = filter;\n        parent.listen((change) => {\n            let filteredItems;\n            switch (change.operationDetailed) {\n                case 'clear':\n                    this.clear();\n                    break;\n                case 'removeLeft':\n                case 'removeRight':\n                case 'remove':\n                    for (const item of change.items) {\n                        this.remove(item);\n                    }\n                    break;\n                case 'prepend':\n                    filteredItems = change.items.filter(this.viewFilter);\n                    this.unshift(...filteredItems);\n                    break;\n                case 'append':\n                    filteredItems = change.items.filter(this.viewFilter);\n                    this.push(...filteredItems);\n                    break;\n                case 'swap':\n                    const indexA = this.data.indexOf(change.items[0]);\n                    const indexB = this.data.indexOf(change.items[1]);\n                    if (indexA !== -1 && indexB !== -1) {\n                        this.swap(indexA, indexB);\n                    }\n                    break;\n                case 'replace':\n                    const index = this.data.indexOf(change.target);\n                    if (index !== -1) {\n                        const acceptNew = this.viewFilter(change.items[0]);\n                        if (acceptNew) {\n                            this.set(index, change.items[0]);\n                        }\n                        else {\n                            this.remove(change.target);\n                        }\n                    }\n                    break;\n            }\n        }, cancellationToken);\n    }\n    updateFilter(filter) {\n        if (this.viewFilter === filter) {\n            return;\n        }\n        this.viewFilter = filter;\n        this.refresh();\n        return this.data.length;\n    }\n    refresh() {\n        this.clear();\n        const data = this.parent.data.filter(this.viewFilter);\n        this.push(...data);\n    }\n}\n//# sourceMappingURL=data_source.js.map","import { DataSource } from './data_source';\nimport { EventEmitter } from '../utilities/event_emitter';\nexport class ObjectDataSource {\n    constructor(initialData) {\n        if (initialData) {\n            this.data = initialData;\n        }\n        this.updateEvent = new EventEmitter();\n        this.updateEventOnKey = new Map();\n    }\n    pick(key, cancellationToken) {\n        var _a;\n        const subDataSource = new DataSource((_a = this.data) === null || _a === void 0 ? void 0 : _a[key]);\n        this.listenOnKey(key, (v) => {\n            subDataSource.update(v.newValue);\n        }, cancellationToken);\n        return subDataSource;\n    }\n    listen(callback, cancellationToken) {\n        return this.updateEvent.subscribe(callback, cancellationToken).cancel;\n    }\n    listenOnKeyAndRepeat(key, callback, cancellationToken) {\n        callback({\n            key,\n            newValue: this.data[key],\n            oldValue: undefined\n        });\n        return this.listenOnKey(key, callback, cancellationToken);\n    }\n    listenOnKey(key, callback, cancellationToken) {\n        if (!this.updateEventOnKey.has(key)) {\n            this.updateEventOnKey.set(key, new EventEmitter());\n        }\n        const event = this.updateEventOnKey.get(key);\n        return event.subscribe(callback, cancellationToken).cancel;\n    }\n    get(key) {\n        return this.data[key];\n    }\n    set(key, value) {\n        if (this.data[key] === value) {\n            return;\n        }\n        const old = this.data[key];\n        this.data[key] = value;\n        this.updateEvent.fire({ oldValue: old, key, newValue: this.data[key] });\n        if (this.updateEventOnKey.has(key)) {\n            this.updateEventOnKey.get(key).fire({ oldValue: old, key, newValue: this.data[key] });\n        }\n    }\n    assign(newData) {\n        for (const key of Object.keys(newData)) {\n            this.set(key, newData[key]);\n        }\n    }\n    toObject() {\n        return Object.assign({}, this.data);\n    }\n    toDataSource() {\n        const stream = new DataSource(this.data);\n        this.listen((s) => {\n            stream.update(this.data);\n        });\n        return stream;\n    }\n}\n//# sourceMappingURL=object_data_source.js.map","export const ownerSymbol = Symbol('owner');\n//# sourceMappingURL=owner_symbol.js.map","import { DataSource } from '../../stream/data_source';\nimport { ownerSymbol } from '../../utilities/owner_symbol';\nexport class AurumTextElement {\n    constructor(text) {\n        this.node = this.create(text);\n        if (text instanceof DataSource) {\n            text.listen((v) => {\n                if (this.node) {\n                    this.node.textContent = v;\n                }\n            });\n        }\n    }\n    resolveStringSource(source) {\n        if (typeof source === 'string') {\n            return source;\n        }\n        else {\n            return source.value;\n        }\n    }\n    create(text) {\n        const node = document.createTextNode(this.resolveStringSource(text));\n        node[ownerSymbol] = this;\n        return node;\n    }\n    remove() {\n        if (this.hasParent()) {\n            this.node.parentElement[ownerSymbol].removeChild(this.node);\n        }\n    }\n    hasParent() {\n        return !!this.node.parentElement;\n    }\n}\n//# sourceMappingURL=aurum_text.js.map","import { ArrayDataSource, DataSource } from '../../stream/data_source';\nimport { ownerSymbol } from '../../utilities/owner_symbol';\nimport { AurumTextElement } from './aurum_text';\nimport { EventEmitter } from '../../utilities/event_emitter';\nexport const aurumElementModelIdentitiy = Symbol('AurumElementModel');\nconst defaultEvents = {\n    drag: 'onDrag',\n    dragstart: 'onDragStart',\n    dragend: 'onDragEnd',\n    dragexit: 'onDragExit',\n    dragover: 'onDragOver',\n    dragenter: 'onDragEnter',\n    dragleave: 'onDragLeave',\n    blur: 'onBlur',\n    focus: 'onFocus',\n    click: 'onClick',\n    dblclick: 'onDblClick',\n    keydown: 'onKeyDown',\n    keyhit: 'onKeyHit',\n    keyup: 'onKeyUp',\n    mousedown: 'onMouseDown',\n    mouseup: 'onMouseUp',\n    mousemove: 'onMouseMove',\n    mouseenter: 'onMouseEnter',\n    mouseleave: 'onMouseLeave',\n    mousewheel: 'onMouseWheel',\n    load: 'onLoad',\n    error: 'onError'\n};\nconst defaultProps = ['id', 'name', 'draggable', 'tabindex', 'style', 'role', 'contentEditable'];\nexport function buildRenderableFromModel(model) {\n    if (model && model[aurumElementModelIdentitiy]) {\n        const result = model.constructor(model.props, model.innerNodes);\n        return buildRenderableFromModel(result);\n    }\n    else {\n        return model;\n    }\n}\nexport class AurumElement {\n    constructor(props, children, domNodeName) {\n        var _a;\n        this.node = this.create(domNodeName);\n        this.children = [];\n        if (props != null) {\n            if (props.onAttach) {\n                this.onAttach = props.onAttach;\n                this.needAttach = true;\n            }\n            this.onDetach = props.onDetach;\n            this.initialize(props);\n            (_a = props.onCreate) === null || _a === void 0 ? void 0 : _a.call(props, this.node);\n        }\n        if (children) {\n            this.addChildren(children);\n        }\n    }\n    initialize(props) {\n        this.createEventHandlers(defaultEvents, props);\n        const dataProps = Object.keys(props).filter((e) => e.includes('-'));\n        this.bindProps(defaultProps, props, dataProps);\n        if (props.class) {\n            this.handleClass(props.class);\n        }\n    }\n    bindProps(keys, props, dynamicProps) {\n        for (const key of keys) {\n            if (props[key]) {\n                this.assignStringSourceToAttribute(props[key], key);\n            }\n        }\n        if (dynamicProps) {\n            for (const key of dynamicProps) {\n                if (props[key]) {\n                    this.assignStringSourceToAttribute(props[key], key);\n                }\n            }\n        }\n    }\n    createEventHandlers(events, props) {\n        for (const key in events) {\n            if (props[events[key]]) {\n                if (props[events[key]] instanceof DataSource) {\n                    this.node.addEventListener(key, (e) => props[events[key]].update(e));\n                }\n                else if (typeof props[events[key]] === 'function') {\n                    this.node.addEventListener(key, (e) => props[events[key]](e));\n                }\n            }\n        }\n    }\n    render() {\n        let absoluteIndex = 0;\n        for (let i = 0; i < this.children.length; i++, absoluteIndex++) {\n            if (this.children[i] instanceof AurumFragment) {\n                absoluteIndex = this.renderFragment(this.children[i], absoluteIndex);\n            }\n            else {\n                this.renderChild(this.children[i], absoluteIndex);\n            }\n        }\n        while (this.node.childNodes.length > absoluteIndex) {\n            const child = this.node.childNodes[this.node.childNodes.length - 1];\n            this.node.removeChild(child);\n        }\n    }\n    renderFragment(fragment, absoluteIndex) {\n        for (let j = 0; j < fragment.children.length; j++, absoluteIndex++) {\n            if (fragment.children[j] instanceof AurumFragment) {\n                absoluteIndex = this.renderFragment(fragment.children[j], absoluteIndex);\n            }\n            else {\n                this.renderChild(fragment.children[j], absoluteIndex);\n            }\n        }\n        absoluteIndex--;\n        return absoluteIndex;\n    }\n    renderChild(child, index) {\n        if (this.node.childNodes.length <= index) {\n            return this.addChildDom(child);\n        }\n        if (this.node.childNodes[index][ownerSymbol] !== child) {\n            const childIndex = this.getChildIndex(child.node);\n            if (childIndex !== -1) {\n                this.swapChildrenDom(index, childIndex);\n            }\n            else {\n                this.addDomNodeAt(child.node, index);\n            }\n        }\n    }\n    assignStringSourceToAttribute(data, key) {\n        if (typeof data === 'string') {\n            this.node.setAttribute(key, data);\n        }\n        else {\n            if (data.value) {\n                this.node.setAttribute(key, data.value);\n            }\n            data.unique().listen((v) => this.node.setAttribute(key, v));\n        }\n    }\n    handleAttach(parent) {\n        var _a, _b, _c;\n        if (this.needAttach) {\n            if (parent.isConnected()) {\n                (_a = this.onAttach) === null || _a === void 0 ? void 0 : _a.call(this, this.node);\n                for (const child of this.node.childNodes) {\n                    (_c = (_b = child[ownerSymbol]) === null || _b === void 0 ? void 0 : _b.handleAttach) === null || _c === void 0 ? void 0 : _c.call(_b, this);\n                }\n            }\n            else {\n                parent.needAttach = true;\n            }\n        }\n    }\n    handleDetach() {\n        var _a, _b, _c;\n        if (!this.node.isConnected) {\n            (_a = this.onDetach) === null || _a === void 0 ? void 0 : _a.call(this, this.node);\n            for (const child of this.node.childNodes) {\n                if (child[ownerSymbol]) {\n                    (_c = (_b = child[ownerSymbol]).handleDetach) === null || _c === void 0 ? void 0 : _c.call(_b);\n                }\n            }\n        }\n    }\n    handleClass(data) {\n        if (typeof data === 'string') {\n            this.node.className = data;\n        }\n        else if (data instanceof DataSource) {\n            if (data.value) {\n                if (Array.isArray(data.value)) {\n                    this.node.className = data.value.join(' ');\n                    data.unique().listen(() => {\n                        this.node.className = data.value.join(' ');\n                    });\n                }\n                else {\n                    this.node.className = data.value;\n                    data.unique().listen(() => {\n                        this.node.className = data.value;\n                    });\n                }\n            }\n            data.unique().listen((v) => (this.node.className = v));\n        }\n        else {\n            const value = data.reduce((p, c) => {\n                if (typeof c === 'string') {\n                    return `${p} ${c}`;\n                }\n                else {\n                    if (c.value) {\n                        return `${p} ${c.value}`;\n                    }\n                    else {\n                        return p;\n                    }\n                }\n            }, '');\n            this.node.className = value;\n            for (const i of data) {\n                if (i instanceof DataSource) {\n                    i.unique().listen((v) => {\n                        const value = data.reduce((p, c) => {\n                            if (typeof c === 'string') {\n                                return `${p} ${c}`;\n                            }\n                            else {\n                                if (c.value) {\n                                    return `${p} ${c.value}`;\n                                }\n                                else {\n                                    return p;\n                                }\n                            }\n                        }, '');\n                        this.node.className = value;\n                    });\n                }\n            }\n        }\n    }\n    resolveStringSource(source) {\n        if (typeof source === 'string') {\n            return source;\n        }\n        else {\n            return source.value;\n        }\n    }\n    create(domNodeName) {\n        const node = document.createElement(domNodeName);\n        node[ownerSymbol] = this;\n        return node;\n    }\n    getChildIndex(node) {\n        let i = 0;\n        for (const child of this.node.childNodes) {\n            if (child === node) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n    hasChild(node) {\n        for (const child of node.children) {\n            if (child === node) {\n                return true;\n            }\n        }\n        return false;\n    }\n    addChildDom(child) {\n        var _a;\n        this.node.appendChild(child.node);\n        (_a = child.handleAttach) === null || _a === void 0 ? void 0 : _a.call(child, this);\n    }\n    swapChildrenDom(indexA, indexB) {\n        if (indexA === indexB) {\n            return;\n        }\n        const nodeA = this.node.children[indexA];\n        const nodeB = this.node.children[indexB];\n        nodeA.remove();\n        nodeB.remove();\n        if (indexA < indexB) {\n            this.addDomNodeAt(nodeB, indexA);\n            this.addDomNodeAt(nodeA, indexB);\n        }\n        else {\n            this.addDomNodeAt(nodeA, indexB);\n            this.addDomNodeAt(nodeB, indexA);\n        }\n    }\n    addDomNodeAt(node, index) {\n        var _a, _b, _c, _d;\n        if (index >= this.node.childElementCount) {\n            this.node.appendChild(node);\n            (_b = (_a = node[ownerSymbol]).handleAttach) === null || _b === void 0 ? void 0 : _b.call(_a, this);\n        }\n        else {\n            this.node.insertBefore(node, this.node.children[index]);\n            (_d = (_c = node[ownerSymbol]).handleAttach) === null || _d === void 0 ? void 0 : _d.call(_c, this);\n        }\n    }\n    remove() {\n        if (this.hasParent()) {\n            this.node.parentElement[ownerSymbol].removeChild(this.node);\n        }\n    }\n    hasParent() {\n        return !!this.node.parentElement;\n    }\n    isConnected() {\n        return this.node.isConnected;\n    }\n    removeChild(child) {\n        const index = this.children.indexOf(child);\n        if (index !== -1) {\n            this.children.splice(index, 1);\n        }\n        this.render();\n    }\n    removeChildAt(index) {\n        this.children.splice(index, 1);\n        this.render();\n    }\n    swapChildren(indexA, indexB) {\n        if (indexA === indexB) {\n            return;\n        }\n        const nodeA = this.children[indexA];\n        const nodeB = this.children[indexB];\n        this.children[indexA] = nodeB;\n        this.children[indexB] = nodeA;\n        this.render();\n    }\n    clearChildren() {\n        this.children.length = 0;\n        this.render();\n    }\n    addChild(child) {\n        if (child === undefined || child === null) {\n            return;\n        }\n        if (child[aurumElementModelIdentitiy]) {\n            child = buildRenderableFromModel(child);\n            if (child === undefined) {\n                return;\n            }\n        }\n        if (Array.isArray(child)) {\n            for (const subChild of child) {\n                this.addChild(subChild);\n            }\n            return;\n        }\n        this.children.push(this.childNodeToAurum(child));\n        this.render();\n    }\n    childNodeToAurum(child) {\n        if (child instanceof AurumElement) {\n            return child;\n        }\n        if (child instanceof Promise) {\n            const result = new AurumFragment({});\n            child.then((value) => {\n                result.addChildren([value]);\n                this.render();\n            });\n            return result;\n        }\n        else if (child instanceof ArrayDataSource) {\n            const result = new AurumFragment({ repeatModel: child });\n            result.onChange.subscribe(() => this.render());\n            return result;\n        }\n        else if (typeof child === 'string' || typeof child === 'number' || typeof child === 'boolean' || typeof child === 'bigint') {\n            return new AurumTextElement(child.toString());\n        }\n        else if (child instanceof DataSource) {\n            const result = new AurumFragment({}, [child]);\n            result.onChange.subscribe(() => this.render());\n            return result;\n        }\n        else {\n            throw new Error('Unsupported child type');\n        }\n    }\n    addChildAt(child, index) {\n        this.children.splice(index, 0, this.childNodeToAurum(child));\n        this.render();\n    }\n    addChildren(nodes) {\n        if (nodes.length === 0) {\n            return;\n        }\n        for (const child of nodes) {\n            this.addChild(child);\n        }\n    }\n}\nexport class AurumFragment {\n    constructor(props, children) {\n        this.onChange = new EventEmitter();\n        this.children = [];\n        if (props.repeatModel) {\n            this.handleRepeat(props.repeatModel);\n        }\n        else if (children) {\n            this.addChildren(children);\n        }\n    }\n    addChildren(children) {\n        for (const child of children) {\n            let renderable;\n            if (child[aurumElementModelIdentitiy]) {\n                renderable = buildRenderableFromModel(child);\n            }\n            else {\n                renderable = child;\n            }\n            if (renderable instanceof AurumElement) {\n                this.children.push(renderable);\n            }\n            else if (renderable instanceof DataSource) {\n                let sourceChild = undefined;\n                let wasArray;\n                const freshnessToken = { ts: undefined };\n                renderable.unique().listenAndRepeat((newValue) => {\n                    freshnessToken.ts = Date.now();\n                    if ((newValue === undefined || newValue === null) && wasArray) {\n                        this.children.length = 0;\n                        this.onChange.fire();\n                        wasArray = false;\n                        return;\n                    }\n                    else if (!Array.isArray(newValue) && wasArray) {\n                        this.children.length = 0;\n                        this.onChange.fire();\n                        wasArray = false;\n                    }\n                    if (Array.isArray(newValue)) {\n                        wasArray = true;\n                        this.children.length = 0;\n                        this.onChange.fire();\n                        for (const newSubValue of newValue) {\n                            this.handleSourceChild(newSubValue, undefined, undefined, freshnessToken, freshnessToken.ts);\n                        }\n                    }\n                    else {\n                        sourceChild = this.handleSourceChild(newValue, sourceChild, renderable, freshnessToken, freshnessToken.ts);\n                    }\n                });\n            }\n            else {\n                throw new Error('case not yet implemented');\n            }\n        }\n    }\n    handleSourceChild(newValue, sourceChild, dataSource, freshnessToken, timestamp) {\n        if (newValue === undefined || newValue === null) {\n            if (sourceChild) {\n                this.children.splice(this.children.indexOf(sourceChild), 1);\n                sourceChild = undefined;\n                this.onChange.fire();\n            }\n            return;\n        }\n        if (newValue[aurumElementModelIdentitiy]) {\n            newValue = buildRenderableFromModel(newValue);\n        }\n        if (typeof newValue === 'string' || typeof newValue === 'bigint' || typeof newValue === 'number' || typeof newValue === 'boolean') {\n            if (!sourceChild) {\n                const textNode = new AurumTextElement(dataSource !== null && dataSource !== void 0 ? dataSource : newValue);\n                this.children.push(textNode);\n                sourceChild = textNode;\n                this.onChange.fire();\n            }\n            else if (sourceChild instanceof AurumElement) {\n                const textNode = new AurumTextElement(dataSource !== null && dataSource !== void 0 ? dataSource : newValue);\n                this.children.splice(this.children.indexOf(sourceChild), 1, textNode);\n                sourceChild = textNode;\n                this.onChange.fire();\n            }\n        }\n        else if (newValue instanceof AurumElement) {\n            if (newValue !== sourceChild) {\n                if (sourceChild) {\n                    this.children.splice(this.children.indexOf(sourceChild), 1, newValue);\n                }\n                else {\n                    this.children.push(newValue);\n                }\n                sourceChild = newValue;\n                this.onChange.fire();\n            }\n        }\n        else if (newValue instanceof Promise) {\n            newValue.then((value) => {\n                if (freshnessToken.ts === timestamp) {\n                    this.addChildren([value]);\n                    this.onChange.fire();\n                }\n            });\n        }\n        else if (newValue instanceof DataSource) {\n            if (!sourceChild) {\n                const result = new AurumFragment({}, [newValue]);\n                sourceChild = result;\n                this.children.push(result);\n                result.onChange.subscribe(() => this.onChange.fire());\n                this.onChange.fire();\n            }\n            else if (sourceChild !== newValue) {\n                const result = new AurumFragment({}, [newValue]);\n                result.onChange.subscribe(() => this.onChange.fire());\n                this.children.splice(this.children.indexOf(sourceChild), 1, result);\n                sourceChild = result;\n                this.onChange.fire();\n            }\n        }\n        else if (newValue instanceof ArrayDataSource) {\n            if (!sourceChild) {\n                const result = new AurumFragment({ repeatModel: newValue });\n                sourceChild = result;\n                this.children.push(result);\n                result.onChange.subscribe(() => this.onChange.fire());\n                this.onChange.fire();\n            }\n            else if (sourceChild !== newValue) {\n                const result = new AurumFragment({ repeatModel: newValue });\n                result.onChange.subscribe(() => this.onChange.fire());\n                this.children.splice(this.children.indexOf(sourceChild), 1, result);\n                sourceChild = result;\n                this.onChange.fire();\n            }\n        }\n        return sourceChild;\n    }\n    handleRepeat(dataSource) {\n        dataSource.listenAndRepeat((change) => {\n            switch (change.operationDetailed) {\n                case 'replace':\n                    this.children[change.index] = buildRenderableFromModel(change.items[0]);\n                    break;\n                case 'swap':\n                    const itemA = this.children[change.index];\n                    const itemB = this.children[change.index2];\n                    this.children[change.index2] = itemA;\n                    this.children[change.index] = itemB;\n                    break;\n                case 'append':\n                    this.children = this.children.concat(change.items.map(buildRenderableFromModel));\n                    break;\n                case 'prepend':\n                    this.children.unshift(...change.items.map(buildRenderableFromModel));\n                    break;\n                case 'remove':\n                case 'removeLeft':\n                case 'removeRight':\n                    this.children.splice(change.index, change.count);\n                    break;\n                case 'clear':\n                    this.children = [];\n                    break;\n                default:\n                    throw new Error('unhandled operation');\n            }\n            this.onChange.fire();\n        });\n    }\n}\n//# sourceMappingURL=aurum_element.js.map","import { AurumElement } from './special/aurum_element';\nexport class Div extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'div');\n    }\n}\n//# sourceMappingURL=div.js.map","import { AurumElement } from './special/aurum_element';\nexport class Button extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'button');\n        if (props !== null) {\n            this.bindProps(['disabled'], props);\n        }\n    }\n}\n//# sourceMappingURL=button.js.map","import { AurumElement } from './special/aurum_element';\nconst inputEvents = { input: 'onInput', change: 'onChange' };\nconst inputProps = [\n    'placeholder',\n    'readonly',\n    'disabled',\n    'accept',\n    'alt',\n    'autocomplete',\n    'autofocus',\n    'checked',\n    'defaultChecked',\n    'formAction',\n    'formEnctype',\n    'formMethod',\n    'formNoValidate',\n    'formTarget',\n    'max',\n    'maxLength',\n    'min',\n    'minLength',\n    'pattern',\n    'multiple',\n    'required',\n    'type'\n];\nexport class Input extends AurumElement {\n    constructor(props, children) {\n        var _a;\n        super(props, children, 'input');\n        if (props !== null) {\n            if (props.inputValueSource) {\n                props.inputValueSource.unique().listenAndRepeat((value) => (this.node.value = value));\n            }\n            else {\n                this.node.value = (_a = props.initialValue) !== null && _a !== void 0 ? _a : '';\n            }\n            this.bindProps(inputProps, props);\n            this.createEventHandlers(inputEvents, props);\n            if (props.inputValueSource) {\n                this.node.addEventListener('input', () => {\n                    props.inputValueSource.update(this.node.value);\n                });\n            }\n        }\n    }\n}\n//# sourceMappingURL=input.js.map","import { AurumElement } from './special/aurum_element';\nexport class Li extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'li');\n    }\n}\n//# sourceMappingURL=li.js.map","import { AurumElement } from './special/aurum_element';\nexport class Span extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'span');\n    }\n}\n//# sourceMappingURL=span.js.map","import { AurumElement } from './special/aurum_element';\nexport class Style extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'style');\n        if (props !== null) {\n            this.bindProps(['media'], props);\n        }\n    }\n}\n//# sourceMappingURL=style.js.map","import { AurumElement } from './special/aurum_element';\nexport class Audio extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'audio');\n        if (props !== null) {\n            this.bindProps(['controls', 'autoplay', 'loop', 'muted', 'preload', 'src'], props);\n        }\n    }\n}\n//# sourceMappingURL=audio.js.map","import { AurumElement } from './special/aurum_element';\nexport class Ul extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'ul');\n    }\n}\n//# sourceMappingURL=ul.js.map","import { AurumElement } from './special/aurum_element';\nexport class P extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'p');\n    }\n}\n//# sourceMappingURL=p.js.map","import { AurumElement } from './special/aurum_element';\nexport class Img extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'img');\n        if (props !== null) {\n            this.bindProps(['src', 'alt', 'width', 'height', 'referrerPolicy', 'sizes', 'srcset', 'useMap'], props);\n        }\n    }\n}\n//# sourceMappingURL=img.js.map","import { AurumElement } from './special/aurum_element';\nexport class Link extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'link');\n        if (props !== null) {\n            this.bindProps(['href', 'rel', 'media', 'as', 'disabled', 'type'], props);\n        }\n    }\n}\n//# sourceMappingURL=link.js.map","import { AurumElement } from './special/aurum_element';\nexport class Canvas extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'canvas');\n        if (props !== null) {\n            this.bindProps(['width', 'height'], props);\n        }\n    }\n}\n//# sourceMappingURL=canvas.js.map","import { AurumElement } from './special/aurum_element';\nexport class A extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'a');\n        if (props !== null) {\n            this.bindProps(['href', 'target'], props);\n        }\n    }\n}\n//# sourceMappingURL=a.js.map","import { AurumElement } from './special/aurum_element';\nexport class Article extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'article');\n    }\n}\n//# sourceMappingURL=article.js.map","import { AurumElement } from './special/aurum_element';\nexport class Br extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'br');\n    }\n}\n//# sourceMappingURL=br.js.map","import { AurumElement } from './special/aurum_element';\nexport class Form extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'form');\n    }\n}\n//# sourceMappingURL=form.js.map","import { AurumElement } from './special/aurum_element';\nexport class Label extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'label');\n        if (props !== null) {\n            this.bindProps(['for'], props);\n        }\n    }\n}\n//# sourceMappingURL=label.js.map","import { AurumElement } from './special/aurum_element';\nexport class Ol extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'ol');\n    }\n}\n//# sourceMappingURL=ol.js.map","import { AurumElement } from './special/aurum_element';\nexport class Pre extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'pre');\n    }\n}\n//# sourceMappingURL=pre.js.map","import { AurumElement } from './special/aurum_element';\nexport class Progress extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'progress');\n        if (props !== null) {\n            this.bindProps(['max', 'value'], props);\n        }\n    }\n}\n//# sourceMappingURL=progress.js.map","import { AurumElement } from './special/aurum_element';\nexport class Table extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'table');\n    }\n}\n//# sourceMappingURL=table.js.map","import { AurumElement } from './special/aurum_element';\nexport class Td extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'td');\n    }\n}\n//# sourceMappingURL=td.js.map","import { AurumElement } from './special/aurum_element';\nexport class Tr extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'tr');\n    }\n}\n//# sourceMappingURL=tr.js.map","import { AurumElement } from './special/aurum_element';\nexport class Th extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'th');\n    }\n}\n//# sourceMappingURL=th.js.map","import { AurumElement } from './special/aurum_element';\nconst textAreaEvents = { input: 'onInput', change: 'onChange' };\nconst textAreaProps = [\n    'placeholder',\n    'readonly',\n    'disabled',\n    'rows',\n    'wrap',\n    'autocomplete',\n    'autofocus',\n    'max',\n    'maxLength',\n    'min',\n    'minLength',\n    'required',\n    'type'\n];\nexport class TextArea extends AurumElement {\n    constructor(props, children) {\n        var _a, _b, _c;\n        super(props, children, 'textArea');\n        if (props !== null) {\n            if (props.inputValueSource) {\n                this.node.value = (_b = (_a = props.initialValue) !== null && _a !== void 0 ? _a : props.inputValueSource.value) !== null && _b !== void 0 ? _b : '';\n                props.inputValueSource.unique().listen((value) => (this.node.value = value));\n            }\n            else {\n                this.node.value = (_c = props.initialValue) !== null && _c !== void 0 ? _c : '';\n            }\n            this.bindProps(textAreaProps, props);\n            this.createEventHandlers(textAreaEvents, props);\n            if (props.inputValueSource) {\n                this.node.addEventListener('input', () => {\n                    props.inputValueSource.update(this.node.value);\n                });\n            }\n        }\n    }\n}\n//# sourceMappingURL=textarea.js.map","import { AurumElement } from './special/aurum_element';\nexport class H1 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h1');\n    }\n}\n//# sourceMappingURL=h1.js.map","import { AurumElement } from './special/aurum_element';\nexport class H2 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h2');\n    }\n}\n//# sourceMappingURL=h2.js.map","import { AurumElement } from './special/aurum_element';\nexport class H3 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h3');\n    }\n}\n//# sourceMappingURL=h3.js.map","import { AurumElement } from './special/aurum_element';\nexport class H4 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h4');\n    }\n}\n//# sourceMappingURL=h4.js.map","import { AurumElement } from './special/aurum_element';\nexport class H5 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h5');\n    }\n}\n//# sourceMappingURL=h5.js.map","import { AurumElement } from './special/aurum_element';\nexport class H6 extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'h6');\n    }\n}\n//# sourceMappingURL=h6.js.map","import { AurumElement } from './special/aurum_element';\nexport class Header extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'header');\n    }\n}\n//# sourceMappingURL=header.js.map","import { AurumElement } from './special/aurum_element';\nexport class Footer extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'footer');\n    }\n}\n//# sourceMappingURL=footer.js.map","import { AurumElement } from './special/aurum_element';\nexport class Nav extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'nav');\n    }\n}\n//# sourceMappingURL=nav.js.map","import { AurumElement } from './special/aurum_element';\nexport class B extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'b');\n    }\n}\n//# sourceMappingURL=b.js.map","import { AurumElement } from './special/aurum_element';\nexport class I extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'i');\n    }\n}\n//# sourceMappingURL=i.js.map","import { AurumElement } from './special/aurum_element';\nexport class Script extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'script');\n        if (props !== null) {\n            this.bindProps(['src', 'async', 'defer', 'integrity', 'noModule', 'type'], props);\n        }\n    }\n}\n//# sourceMappingURL=script.js.map","import { AurumElement } from './special/aurum_element';\nexport class Abbr extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'abbr');\n    }\n}\n//# sourceMappingURL=abbr.js.map","import { AurumElement } from './special/aurum_element';\nexport class Area extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'area');\n    }\n}\n//# sourceMappingURL=area.js.map","import { AurumElement } from './special/aurum_element';\nexport class Aside extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'aside');\n    }\n}\n//# sourceMappingURL=aside.js.map","import { AurumElement } from './special/aurum_element';\nexport class Em extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'em');\n    }\n}\n//# sourceMappingURL=em.js.map","import { AurumElement } from './special/aurum_element';\nexport class Heading extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'heading');\n    }\n}\n//# sourceMappingURL=heading.js.map","import { AurumElement } from './special/aurum_element';\nexport class IFrame extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'iframe');\n        if (props !== null) {\n            this.bindProps(['src', 'srcdoc', 'width', 'height', 'allow', 'allowFullscreen', 'allowPaymentRequest'], props);\n        }\n    }\n}\n//# sourceMappingURL=iframe.js.map","import { AurumElement } from './special/aurum_element';\nexport class NoScript extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'noscript');\n    }\n}\n//# sourceMappingURL=noscript.js.map","import { AurumElement } from './special/aurum_element';\nexport class Q extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'q');\n    }\n}\n//# sourceMappingURL=q.js.map","import { AurumElement } from './special/aurum_element';\nconst selectEvents = { change: 'onChange' };\nexport class Select extends AurumElement {\n    constructor(props, children) {\n        var _a;\n        super(props, children, 'select');\n        if (props !== null) {\n            this.createEventHandlers(selectEvents, props);\n            this.initialSelection = props.initialSelection;\n            if (props.selectedIndexSource) {\n                this.selectedIndexSource = props.selectedIndexSource;\n                props.selectedIndexSource.unique().listenAndRepeat((value) => (this.node.selectedIndex = value));\n            }\n            else {\n                this.node.selectedIndex = (_a = props.initialSelection) !== null && _a !== void 0 ? _a : -1;\n            }\n            if (props.selectedIndexSource) {\n                this.needAttach = true;\n                this.node.addEventListener('change', () => {\n                    props.selectedIndexSource.update(this.node.selectedIndex);\n                });\n            }\n        }\n    }\n    handleAttach(parent) {\n        super.handleAttach(parent);\n        if (this.node.isConnected) {\n            if (this.selectedIndexSource) {\n                this.node.selectedIndex = this.selectedIndexSource.value;\n            }\n            else if (this.initialSelection !== undefined) {\n                this.node.selectedIndex = this.initialSelection;\n            }\n        }\n    }\n}\n//# sourceMappingURL=select.js.map","import { AurumElement } from './special/aurum_element';\nexport class Source extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'source');\n        if (props !== null) {\n            this.bindProps(['src', 'srcSet', 'media', 'sizes', 'type'], props);\n        }\n    }\n}\n//# sourceMappingURL=source.js.map","import { AurumElement } from './special/aurum_element';\nexport class Title extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'title');\n    }\n}\n//# sourceMappingURL=title.js.map","import { AurumElement } from './special/aurum_element';\nexport class Video extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'video');\n        if (props !== null) {\n            this.bindProps(['controls', 'autoplay', 'loop', 'muted', 'preload', 'src', 'poster', 'width', 'height'], props);\n        }\n    }\n}\n//# sourceMappingURL=video.js.map","import { AurumElement } from './special/aurum_element';\nexport class Tbody extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'tbody');\n    }\n}\n//# sourceMappingURL=tbody.js.map","import { AurumElement } from './special/aurum_element';\nexport class Tfoot extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'tfoot');\n    }\n}\n//# sourceMappingURL=tfoot.js.map","import { AurumElement } from './special/aurum_element';\nexport class Thead extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'thead');\n    }\n}\n//# sourceMappingURL=thead.js.map","import { AurumElement } from './special/aurum_element';\nexport class Summary extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'summary');\n    }\n}\n//# sourceMappingURL=summary.js.map","import { AurumElement } from './special/aurum_element';\nexport class Details extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'details');\n    }\n}\n//# sourceMappingURL=details.js.map","import { AurumElement } from './special/aurum_element';\nexport class Sub extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'sub');\n    }\n}\n//# sourceMappingURL=sub.js.map","import { AurumElement } from './special/aurum_element';\nexport class Sup extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'sup');\n    }\n}\n//# sourceMappingURL=sup.js.map","import { AurumElement } from './special/aurum_element';\nexport class Svg extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'svg');\n        if (props !== null) {\n            this.bindProps(['width', 'height'], props);\n        }\n    }\n}\n//# sourceMappingURL=svg.js.map","import { AurumElement } from './special/aurum_element';\nexport class Data extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'data');\n        if (props !== null) {\n            this.bindProps(['datalue'], props);\n        }\n    }\n}\n//# sourceMappingURL=data.js.map","import { AurumElement } from './special/aurum_element';\nexport class Time extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'time');\n        if (props !== null) {\n            this.bindProps(['datetime'], props);\n        }\n    }\n}\n//# sourceMappingURL=time.js.map","import { AurumElement, buildRenderableFromModel, aurumElementModelIdentitiy } from '../nodes/special/aurum_element';\nimport { ownerSymbol } from './owner_symbol';\nimport { Div } from '../nodes/div';\nimport { Button } from '../nodes/button';\nimport { Input } from '../nodes/input';\nimport { Li } from '../nodes/li';\nimport { Span } from '../nodes/span';\nimport { Style } from '../nodes/style';\nimport { Audio } from '../nodes/audio';\nimport { Ul } from '../nodes/ul';\nimport { P } from '../nodes/p';\nimport { Img } from '../nodes/img';\nimport { Link } from '../nodes/link';\nimport { Canvas } from '../nodes/canvas';\nimport { A } from '../nodes/a';\nimport { Article } from '../nodes/article';\nimport { Br } from '../nodes/br';\nimport { Form } from '../nodes/form';\nimport { Label } from '../nodes/label';\nimport { Ol } from '../nodes/ol';\nimport { Pre } from '../nodes/pre';\nimport { Progress } from '../nodes/progress';\nimport { Table } from '../nodes/table';\nimport { Td } from '../nodes/td';\nimport { Tr } from '../nodes/tr';\nimport { Th } from '../nodes/th';\nimport { TextArea } from '../nodes/textarea';\nimport { H1 } from '../nodes/h1';\nimport { H2 } from '../nodes/h2';\nimport { H3 } from '../nodes/h3';\nimport { H4 } from '../nodes/h4';\nimport { H5 } from '../nodes/h5';\nimport { H6 } from '../nodes/h6';\nimport { Header } from '../nodes/header';\nimport { Footer } from '../nodes/footer';\nimport { Nav } from '../nodes/nav';\nimport { B } from '../nodes/b';\nimport { I } from '../nodes/i';\nimport { Script } from '../nodes/script';\nimport { Abbr } from '../nodes/abbr';\nimport { Area } from '../nodes/area';\nimport { Aside } from '../nodes/aside';\nimport { Em } from '../nodes/em';\nimport { Heading } from '../nodes/heading';\nimport { IFrame } from '../nodes/iframe';\nimport { NoScript } from '../nodes/noscript';\nimport { Q } from '../nodes/q';\nimport { Select } from '../nodes/select';\nimport { Source } from '../nodes/source';\nimport { Title } from '../nodes/title';\nimport { Video } from '../nodes/video';\nimport { Tbody } from '../nodes/tbody';\nimport { Tfoot } from '../nodes/tfoot';\nimport { Thead } from '../nodes/thead';\nimport { Summary } from '../nodes/summary';\nimport { Details } from '../nodes/details';\nimport { Sub } from '../nodes/sub';\nimport { Sup } from '../nodes/sup';\nimport { Svg } from '../nodes/svg';\nimport { Data } from '../nodes/data';\nimport { Time } from '../nodes/time';\nimport { Option } from '../nodes/option';\nimport { Template } from '../nodes/template';\nconst nodeMap = {\n    button: Button,\n    div: Div,\n    input: Input,\n    li: Li,\n    span: Span,\n    style: Style,\n    ul: Ul,\n    p: P,\n    img: Img,\n    link: Link,\n    canvas: Canvas,\n    a: A,\n    article: Article,\n    br: Br,\n    form: Form,\n    label: Label,\n    ol: Ol,\n    pre: Pre,\n    progress: Progress,\n    table: Table,\n    td: Td,\n    tr: Tr,\n    th: Th,\n    textarea: TextArea,\n    h1: H1,\n    h2: H2,\n    h3: H3,\n    h4: H4,\n    h5: H5,\n    h6: H6,\n    header: Header,\n    footer: Footer,\n    nav: Nav,\n    b: B,\n    i: I,\n    script: Script,\n    abbr: Abbr,\n    area: Area,\n    aside: Aside,\n    audio: Audio,\n    em: Em,\n    heading: Heading,\n    iframe: IFrame,\n    noscript: NoScript,\n    option: Option,\n    q: Q,\n    select: Select,\n    source: Source,\n    title: Title,\n    video: Video,\n    tbody: Tbody,\n    tfoot: Tfoot,\n    thead: Thead,\n    summary: Summary,\n    details: Details,\n    sub: Sub,\n    sup: Sup,\n    svg: Svg,\n    data: Data,\n    time: Time,\n    template: Template\n};\nexport class Aurum {\n    static attach(aurumElementModel, dom) {\n        const aurumElement = buildRenderableFromModel(aurumElementModel);\n        if (dom[ownerSymbol]) {\n            throw new Error('This node is already managed by aurum and cannot be used');\n        }\n        if (aurumElement instanceof AurumElement) {\n            dom.appendChild(aurumElement.node);\n            aurumElement['handleAttach'](aurumElement);\n            dom[ownerSymbol] = aurumElement;\n        }\n        else {\n            throw new Error('Root node of aurum application must be a single dom node');\n        }\n    }\n    static isAttached(dom) {\n        return dom[ownerSymbol] !== undefined;\n    }\n    static detach(domNode) {\n        if (domNode[ownerSymbol]) {\n            domNode[ownerSymbol].node.remove();\n            domNode[ownerSymbol].handleDetach();\n            domNode[ownerSymbol] = undefined;\n        }\n    }\n    static factory(node, args, ...innerNodes) {\n        if (typeof node === 'string') {\n            const type = node;\n            node = nodeMap[node];\n            if (node === undefined) {\n                throw new Error(`Node ${type} does not exist or is not supported`);\n            }\n        }\n        if (Object.getPrototypeOf(node) === AurumElement) {\n            return {\n                [aurumElementModelIdentitiy]: true,\n                constructor: (args, innerNodes) => new node(args, innerNodes),\n                props: args,\n                innerNodes: innerNodes\n            };\n        }\n        else {\n            return {\n                [aurumElementModelIdentitiy]: true,\n                constructor: node,\n                props: args,\n                innerNodes: innerNodes\n            };\n        }\n    }\n}\n//# sourceMappingURL=aurum.js.map","import { AurumElement } from './special/aurum_element';\nexport class Option extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'option');\n    }\n}\n//# sourceMappingURL=option.js.map","import { AurumElement } from './special/aurum_element';\nexport class Template extends AurumElement {\n    constructor(props, children) {\n        super(props, children, 'template');\n    }\n}\n//# sourceMappingURL=template.js.map","export class LinkedListNode {\n    constructor(data) {\n        this.data = data;\n    }\n    deleteNext() {\n        if (this.next) {\n            const overNext = this.next.next;\n            this.next.next = undefined;\n            this.next.previous = undefined;\n            this.next = overNext;\n            if (this.next) {\n                this.next.previous = this;\n            }\n        }\n    }\n    deletePrevious() {\n        if (this.previous) {\n            const overPrevious = this.previous.previous;\n            this.previous.next = undefined;\n            this.previous.previous = undefined;\n            this.previous = overPrevious;\n            if (this.previous) {\n                this.previous.next = this;\n            }\n        }\n    }\n}\n//# sourceMappingURL=linked_list_node.js.map","import { LinkedListNode } from './linked_list_node';\nexport class LinkedList {\n    constructor(data = []) {\n        this.length = 0;\n        data.forEach((d) => this.append(d));\n    }\n    find(predicate) {\n        let ptr = this.rootNode;\n        while (ptr && !predicate(ptr)) {\n            ptr = ptr.next;\n        }\n        return ptr;\n    }\n    append(element) {\n        if (!this.rootNode && !this.lastNode) {\n            this.rootNode = this.lastNode = new LinkedListNode(element);\n        }\n        else {\n            this.lastNode.next = new LinkedListNode(element);\n            this.lastNode.next.previous = this.lastNode;\n            this.lastNode = this.lastNode.next;\n        }\n        this.length++;\n        return element;\n    }\n    forEach(cb) {\n        this.find((n) => {\n            cb(n.data);\n            return false;\n        });\n    }\n    prepend(element) {\n        if (!this.rootNode && !this.lastNode) {\n            this.rootNode = this.lastNode = new LinkedListNode(element);\n        }\n        else {\n            this.rootNode.previous = new LinkedListNode(element);\n            this.rootNode.previous.next = this.rootNode;\n            this.rootNode = this.rootNode.previous;\n        }\n        this.length++;\n        return element;\n    }\n    remove(element) {\n        if (element === this.rootNode.data) {\n            if (this.rootNode === this.lastNode) {\n                this.rootNode = this.lastNode = undefined;\n            }\n            else {\n                this.rootNode = this.rootNode.next;\n            }\n            this.length--;\n        }\n        else {\n            const result = this.find((e) => e.next && e.next.data === element);\n            if (result) {\n                if (result.next === this.lastNode) {\n                    this.lastNode = result;\n                }\n                result.deleteNext();\n                this.length--;\n            }\n        }\n    }\n}\n//# sourceMappingURL=linked_list.js.map","import { LinkedList } from './linkedlist/linked_list';\nexport class CancellationToken {\n    constructor(...cancellables) {\n        this.cancelables = new LinkedList(cancellables);\n        this._isCancelled = false;\n    }\n    get isCanceled() {\n        return this._isCancelled;\n    }\n    addCancelable(delegate) {\n        this.throwIfCancelled('attempting to add cancellable to token that is already cancelled');\n        this.cancelables.append(delegate);\n        if (this.cancelables.length > 200) {\n            console.log('potential memory leak: cancellation token has over 200 clean up calls');\n        }\n        return this;\n    }\n    removeCancelable(delegate) {\n        this.throwIfCancelled('attempting to remove cancellable from token that is already cancelled');\n        this.cancelables.remove(delegate);\n        return this;\n    }\n    addDisposable(disposable) {\n        this.addCancelable(() => disposable.dispose());\n        return this;\n    }\n    callIfNotCancelled(action) {\n        if (!this.isCanceled) {\n            action();\n        }\n    }\n    setTimeout(cb, time = 0) {\n        const id = setTimeout(() => {\n            this.removeCancelable(cancelable);\n            cb();\n        }, time);\n        const cancelable = () => clearTimeout(id);\n        this.addCancelable(cancelable);\n    }\n    setInterval(cb, time) {\n        const id = setInterval(cb, time);\n        this.addCancelable(() => clearInterval(id));\n    }\n    requestAnimationFrame(cb) {\n        const id = requestAnimationFrame(cb);\n        this.addCancelable(() => cancelAnimationFrame(id));\n    }\n    animationLoop(cb) {\n        let id = requestAnimationFrame(function f(time) {\n            cb(time);\n            id = requestAnimationFrame(f);\n        });\n        this.addCancelable(() => cancelAnimationFrame(id));\n    }\n    throwIfCancelled(msg) {\n        if (this.isCanceled) {\n            throw new Error(msg || 'cancellation token is cancelled');\n        }\n    }\n    chain(target, twoWays = false) {\n        if (twoWays) {\n            target.chain(this, false);\n        }\n        this.addCancelable(() => target.cancel());\n        return this;\n    }\n    registerDomEvent(eventEmitter, event, callback) {\n        eventEmitter.addEventListener(event, callback);\n        this.addCancelable(() => eventEmitter.removeEventListener(event, callback));\n        return this;\n    }\n    cancel() {\n        if (this.isCanceled) {\n            return;\n        }\n        this._isCancelled = true;\n        this.cancelables.forEach((c) => c());\n        this.cancelables = undefined;\n    }\n}\n//# sourceMappingURL=cancellation_token.js.map","import { AurumElement } from './aurum_element';\nexport class Custom extends AurumElement {\n    constructor(props, children) {\n        super(props, children, props.tag);\n        if (props.attributes) {\n            if (props !== null) {\n                this.bindProps(Object.keys(props.attributes), props.attributes);\n            }\n        }\n    }\n}\n//# sourceMappingURL=custom.js.map","import { DataSource } from '../../stream/data_source';\nimport { buildRenderableFromModel } from './aurum_element';\nconst routeIdentity = Symbol('route');\nexport function AurumRouter(props, children) {\n    children = children.map(buildRenderableFromModel);\n    if (children.some((c) => !c[routeIdentity])) {\n        throw new Error('Aurum Router only accepts Route and DefaultRoute instances as children');\n    }\n    if (children.filter((c) => c.default).length > 1) {\n        throw new Error('Too many default routes only 0 or 1 allowed');\n    }\n    const urlDataSource = new DataSource(location.hash.substring(1));\n    window.addEventListener('hashchange', () => {\n        const hash = location.hash.substring(1);\n        if (hash.includes('?')) {\n            urlDataSource.update(hash.substring(0, hash.indexOf('?')));\n        }\n        else {\n            urlDataSource.update(hash);\n        }\n    });\n    return urlDataSource.unique().map((p) => selectRoute(p, children));\n}\nfunction selectRoute(url, routes) {\n    var _a, _b;\n    if (url === undefined || url === null) {\n        return (_a = routes.find((r) => r.default)) === null || _a === void 0 ? void 0 : _a.content;\n    }\n    else {\n        if (routes.find((r) => r.href === url)) {\n            return routes.find((r) => r.href === url).content;\n        }\n        else {\n            const segments = url.split('/');\n            segments.pop();\n            while (segments.length) {\n                const path = segments.join('/');\n                if (routes.find((r) => r.href === path)) {\n                    return routes.find((r) => r.href === path).content;\n                }\n                segments.pop();\n            }\n            return (_b = routes.find((r) => r.default)) === null || _b === void 0 ? void 0 : _b.content;\n        }\n    }\n}\nexport function Route(props, children) {\n    return {\n        [routeIdentity]: true,\n        content: children,\n        default: false,\n        href: props.href\n    };\n}\nexport function DefaultRoute(props, children) {\n    return {\n        [routeIdentity]: true,\n        content: children,\n        default: true,\n        href: undefined\n    };\n}\n//# sourceMappingURL=router.js.map","import { DataSource } from '../../stream/data_source';\nexport function Suspense(props, children) {\n    const data = new DataSource(props.fallback);\n    Promise.all(children).then(() => {\n        data.update(children);\n    });\n    return data;\n}\n//# sourceMappingURL=suspense.js.map","import { buildRenderableFromModel } from './aurum_element';\nconst switchCaseIdentity = Symbol('switchCase');\nexport function Switch(props, children) {\n    children = children.map(buildRenderableFromModel);\n    if (children.some((c) => !c[switchCaseIdentity])) {\n        throw new Error('Switch only accepts SwitchCase as children');\n    }\n    if (children.filter((c) => c.default).length > 1) {\n        throw new Error('Too many default switch cases only 0 or 1 allowed');\n    }\n    return props.state.unique().map((state) => selectCase(state, children));\n}\nfunction selectCase(state, children) {\n    var _a, _b, _c;\n    return (_b = (_a = children.find((c) => c.value === state)) === null || _a === void 0 ? void 0 : _a.content) !== null && _b !== void 0 ? _b : (_c = children.find((p) => p.default)) === null || _c === void 0 ? void 0 : _c.content;\n}\nexport function SwitchCase(props, children) {\n    return {\n        [switchCaseIdentity]: true,\n        content: children,\n        default: false,\n        value: props.when\n    };\n}\nexport function DefaultSwitchCase(props, children) {\n    return {\n        [switchCaseIdentity]: true,\n        content: children,\n        default: true,\n        value: undefined\n    };\n}\n//# sourceMappingURL=switch.js.map"],"names":["EventEmitter","subscribeChannel","onAfterFire","subscriptions","this","length","subscribe","callback","cancellationToken","createSubscription","hasSubscriptions","cancelAll","isFiring","push","fireFiltered","data","filter","i","afterFire","forEach","cb","fire","channel","that","subscription","facade","cancel","undefined","addCancelable","index","indexOf","splice","DataSource","initialValue","value","updateEvent","update","newValue","updating","Error","backPropagate","sender","listenAndRepeat","listen","filteredSource","filterDuplex","cb2","pipe","targetDataSource","v","pipeDuplex","map","mappedSource","mapDuplex","reverseMap","unique","uniqueSource","uniqueDuplex","reduce","reducer","reduceSource","aggregate","otherSource","combinator","aggregatedSource","combine","combinedDataSource","debounce","time","timeout","debouncedDataSource","clearTimeout","setTimeout","buffer","bufferedDataSource","queue","queueDataSource","ArrayDataSource","pick","key","subDataSource","_a","initialData","slice","lengthSource","operation","operationDetailed","items","newState","count","getData","get","set","item","old","target","swap","indexA","indexB","itemA","itemB","index2","swapItems","appendArray","Array","let","n","unshift","pop","merge","newData","removeRight","result","removeLeft","remove","clear","shift","toArray","sort","comparator","SortedArrayView","mapper","MappedArrayView","FilteredArrayView","callbackfn","toDataSource","stream","s","change","parent","initial","isArray","viewFilter","filteredItems","updateFilter","refresh","ObjectDataSource","updateEventOnKey","Map","listenOnKey","listenOnKeyAndRepeat","oldValue","has","assign","Object","keys","const","toObject","ownerSymbol","Symbol","AurumTextElement","text","node","create","textContent","resolveStringSource","source","document","createTextNode","hasParent","parentElement","removeChild","aurumElementModelIdentitiy","defaultEvents","drag","dragstart","dragend","dragexit","dragover","dragenter","dragleave","blur","focus","click","dblclick","keydown","keyhit","keyup","mousedown","mouseup","mousemove","mouseenter","mouseleave","mousewheel","load","error","defaultProps","buildRenderableFromModel","model","constructor","props","innerNodes","AurumElement","children","domNodeName","onAttach","needAttach","onDetach","initialize","onCreate","call","addChildren","createEventHandlers","dataProps","e","includes","bindProps","class","handleClass","dynamicProps","assignStringSourceToAttribute","events","addEventListener","render","absoluteIndex","AurumFragment","renderFragment","renderChild","childNodes","fragment","j","child","addChildDom","childIndex","getChildIndex","swapChildrenDom","addDomNodeAt","setAttribute","handleAttach","isConnected","_c","_b","handleDetach","className","join","p","c","createElement","hasChild","appendChild","nodeA","nodeB","childElementCount","insertBefore","_d","removeChildAt","swapChildren","clearChildren","addChild","childNodeToAurum","Promise","then","repeatModel","onChange","toString","addChildAt","nodes","handleRepeat","renderable","sourceChild","wasArray","freshnessToken","ts","Date","now","handleSourceChild","dataSource","timestamp","textNode","concat","Div","Button","inputEvents","input","inputProps","Input","inputValueSource","Li","Span","Style","Audio","Ul","P","Img","Link","Canvas","A","Article","Br","Form","Label","Ol","Pre","Progress","Table","Td","Tr","Th","textAreaEvents","textAreaProps","TextArea","H1","H2","H3","H4","H5","H6","Header","Footer","Nav","B","I","Script","Abbr","Area","Aside","Em","Heading","IFrame","NoScript","Q","selectEvents","Select","initialSelection","selectedIndexSource","selectedIndex","Source","Title","Video","Tbody","Tfoot","Thead","Summary","Details","Sub","Sup","Svg","Data","Time","nodeMap","button","div","li","span","style","ul","img","link","canvas","a","article","br","form","label","ol","pre","progress","table","td","tr","th","textarea","h1","h2","h3","h4","h5","h6","header","footer","nav","b","script","abbr","area","aside","audio","em","heading","iframe","noscript","option","q","select","title","video","tbody","tfoot","thead","summary","details","sub","sup","svg","template","Aurum","attach","aurumElementModel","dom","aurumElement","isAttached","detach","domNode","factory","args","type","getPrototypeOf","LinkedListNode","deleteNext","next","overNext","previous","deletePrevious","overPrevious","LinkedList","d","append","find","predicate","ptr","rootNode","element","lastNode","prepend","CancellationToken","cancelables","cancellables","_isCancelled","isCanceled","delegate","throwIfCancelled","console","log","removeCancelable","addDisposable","disposable","dispose","callIfNotCancelled","action","id","cancelable","setInterval","clearInterval","requestAnimationFrame","cancelAnimationFrame","animationLoop","f","msg","chain","twoWays","registerDomEvent","eventEmitter","event","removeEventListener","Custom","tag","attributes","routeIdentity","AurumRouter","some","default","urlDataSource","location","hash","substring","window","url","routes","r","content","href","segments","split","path","selectRoute","Route","DefaultRoute","Suspense","fallback","all","switchCaseIdentity","Switch","state","selectCase","SwitchCase","when","DefaultSwitchCase"],"mappings":"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"}